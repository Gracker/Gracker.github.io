<!DOCTYPE html>
<html lang="en">
    <!-- title -->
            <!-- keywords -->

                  <head>
                    <meta charset="utf-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
                    <meta name="author" content="Gracker">
                    <meta name="renderer" content="webkit">
                    <meta name="copyright" content="Gracker">
                      <meta name="keywords" content="Android,Performance,AndroidPerformance,性能,优化,性能优化,Perf,Flutter,Linux,LinuxPerformance,AndroidFramework,Framework,Android Performance,Flutter,Kotlin,Memory,内存,流畅性,卡顿,响应速度,Jank,Smooth,Android Framework,ANR,Crash,Dalvik,ART,Jetpack,Compose,Optimization,Startup,Perfetto,Systrace,RenderThread,Java,Responsiveness,Smoothness">
                          <meta name="description" content="Technical blog about Android system performance optimization">
                          <meta name="description" content="This is the ninth article in the Perfetto series, focusing on CPU information analysis in Perfetto. Perfetto provides far superior data visualization and analysis capabilities compared to Systrace. Un">
<meta property="og:type" content="article">
<meta property="og:title" content="Android Perfetto Series 9: CPU Information Interpretation">
<meta property="og:url" content="https://androidperformance.com/en/2025/11/12/Android-Perfetto-09-CPU/index.html">
<meta property="og:site_name" content="Android Performance">
<meta property="og:description" content="This is the ninth article in the Perfetto series, focusing on CPU information analysis in Perfetto. Perfetto provides far superior data visualization and analysis capabilities compared to Systrace. Un">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112214415666.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112214626810.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112215105550.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112214833158.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112215332310.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112215540626.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112215705017.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112220248837.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112220534899.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112221122170.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112221703122.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112220738143.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112221703122.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112222240991.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112223105996.png">
<meta property="og:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112223237018.png">
<meta property="og:image" content="https://androidperformance.com/en/images/WechatIMG581.png">
<meta property="article:published_time" content="2025-11-12T02:00:00.000Z">
<meta property="article:modified_time" content="2026-01-11T12:56:53.321Z">
<meta property="article:author" content="Gracker">
<meta property="article:tag" content="Android">
<meta property="article:tag" content="Perfetto">
<meta property="article:tag" content="Systrace">
<meta property="article:tag" content="Performance Optimization">
<meta property="article:tag" content="Thread Optimization">
<meta property="article:tag" content="Jank Optimization">
<meta property="article:tag" content="Battery Optimization">
<meta property="article:tag" content="ANR Analysis">
<meta property="article:tag" content="Page Response">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://androidperformance.com/en/images/Android-Perfetto-09-CPU/image-20251112214415666.png">
                            <meta http-equiv="Cache-control" content="no-cache">
                            <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
                            <link rel="icon" href="/en/assets/favicon.ico">
                                <title>
                                  Android Perfetto Series 9: CPU Information Interpretation · Android Performance
                                </title>
                                <link rel="canonical" href="https://androidperformance.com/en/2025/11/12/Android-Perfetto-09-CPU/">
                                <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
    (function (w) {
        'use strict'
        // rel=preload support test
        if (!w.loadCSS) {
            w.loadCSS = function () {}
        }
        // define on the loadCSS obj
        var rp = (loadCSS.relpreload = {})
        // rel=preload feature support test
        // runs once and returns a function for compat purposes
        rp.support = (function () {
            var ret
            try {
                ret = w.document.createElement('link').relList.supports('preload')
            } catch (e) {
                ret = false
            }
            return function () {
                return ret
            }
        })()

        // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
        // then change that media back to its intended value on load
        rp.bindMediaToggle = function (link) {
            // remember existing media attr for ultimate state, or default to 'all'
            var finalMedia = link.media || 'all'

            function enableStylesheet() {
                link.media = finalMedia
            }

            // bind load handlers to enable media
            if (link.addEventListener) {
                link.addEventListener('load', enableStylesheet)
            } else if (link.attachEvent) {
                link.attachEvent('onload', enableStylesheet)
            }

            // Set rel and non-applicable media type to start an async request
            // note: timeout allows this to happen async to let rendering continue in IE
            setTimeout(function () {
                link.rel = 'stylesheet'
                link.media = 'only x'
            })
            // also enable media after 3 seconds,
            // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
            setTimeout(enableStylesheet, 3000)
        }

        // loop through link elements in DOM
        rp.poly = function () {
            // double check this to prevent external calls from running
            if (rp.support()) {
                return
            }
            var links = w.document.getElementsByTagName('link')
            for (var i = 0; i < links.length; i++) {
                var link = links[i]
                // qualify links to those with rel=preload and as=style attrs
                if (
                    link.rel === 'preload' &&
                    link.getAttribute('as') === 'style' &&
                    !link.getAttribute('data-loadcss')
                ) {
                    // prevent rerunning on link
                    link.setAttribute('data-loadcss', true)
                    // bind listeners to toggle media back
                    rp.bindMediaToggle(link)
                }
            }
        }

        // if unsupported, run the polyfill
        if (!rp.support()) {
            // run once at least
            rp.poly()

            // rerun poly on an interval until onload
            var run = w.setInterval(rp.poly, 500)
            if (w.addEventListener) {
                w.addEventListener('load', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            } else if (w.attachEvent) {
                w.attachEvent('onload', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            }
        }

        // commonjs
        if (typeof exports !== 'undefined') {
            exports.loadCSS = loadCSS
        } else {
            w.loadCSS = loadCSS
        }
    })(typeof global !== 'undefined' ? global : this)
</script>

                                  <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/en/font/Oswald-Regular.woff2") format('woff2'),
             url("/en/font/Oswald-Regular.ttf") format('truetype');
        font-display: swap;
    }

    body {
        margin: 0;
    }

    /* Removed initial hide to show content immediately */

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(
            -45deg,
            #444 0,
            #444 80px,
            #333 80px,
            #333 160px
        );
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }
</style>

                                    <link id="stylesheet-base" rel="stylesheet" href="/en/css/style.css">
                                    <link id="stylesheet-mobile" rel="stylesheet" href="/en/css/mobile.css" media="screen and (max-width: 960px)">
                                    <link id="stylesheet-theme-dark" rel="stylesheet" href="/en/css/dark.css">
                                    <!-- Font Awesome CSS (with CDN fallback) -->
                                    <link id="stylesheet-fontawesome" rel="stylesheet"
                                      href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.4/css/all.min.css">
                                    <script>
                                      // Fallback for Font Awesome if CDN fails
                                      var faLink = document.getElementById('stylesheet-fontawesome');
                                      faLink.onerror = function () {
                                        var newLink = document.createElement('link');
                                        newLink.rel = 'stylesheet';
                                        newLink.href = 'https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css';
                                        document.head.appendChild(newLink);
                                      };
                                    </script>
                                    <link rel="preconnect" href="https://cdn.bootcdn.net" crossorigin>
                                    <link rel="dns-prefetch" href="//cdn.bootcdn.net">
                                    <link rel="preconnect" href="https://cdn.staticfile.org" crossorigin>
                                    <link rel="dns-prefetch" href="//cdn.staticfile.org">
                                    <link rel="preload"
                                      href="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js" as="script">
                                    <link rel="preload" href="/en/scripts/main.js" as="script">
                                    <!-- use compressed font format to reduce transfer size -->
                                    <link rel="preload" href="/en/font/Source%5C%20Sans%5C%20Pro.woff2"
                                      as="font" type="font/woff2" crossorigin>
                                    <link rel="preload" href="/en/font/Source%5C%20Sans%5C%20Pro.woff" as="font"
                                      type="font/woff" crossorigin>
                                    <link rel="preload" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff"
                                      as="font" crossorigin>
                                    <!-- algolia -->
                                        <!-- 百度统计（延迟加载，失败静默）  -->
                                            <!-- CNZZ（延迟加载，失败静默）  -->
                                                <!-- Google tag (gtag.js) 延迟加载，失败静默 -->
                                                  <script>
                                                    (function () {
                                                      function loadGtag() {
                                                        try {
                                                          window.dataLayer = window.dataLayer || []
                                                          function gtag() { dataLayer.push(arguments) }
                                                          window.gtag = gtag
                                                          gtag('js', new Date())
                                                          var s = document.createElement('script')
                                                          s.async = true
                                                          s.src = 'https://www.googletagmanager.com/gtag/js?id=UA-50993302-2'
                                                          s.onerror = function () { }
                                                          s.onload = function () { gtag('config', 'UA-50993302-2') }
                                                          document.head.appendChild(s)
                                                        } catch (e) { }
                                                      }
                                                      if (window.requestIdleCallback) {
                                                        requestIdleCallback(loadGtag, { timeout: 5000 })
                                                      } else {
                                                        window.addEventListener('load', function () { setTimeout(loadGtag, 3000) })
                                                      }
                                                    })();
                                                  </script>
                                                    <!-- Hreflang Tags -->
                                                    
                                                      <link rel="alternate" hreflang="zh-CN" href="https://androidperformance.com/2025/11/12/Android-Perfetto-09-CPU/" />
                                                      <link rel="alternate" hreflang="en" href="https://androidperformance.com/en/2025/11/12/Android-Perfetto-09-CPU/" />
                                                      <link rel="alternate" hreflang="x-default" href="https://androidperformance.com/en/2025/11/12/Android-Perfetto-09-CPU/" />
                  <meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/en/atom.xml" title="Android Performance" type="application/atom+xml">
</head>
        <body class="post-body">
        <!-- header -->
        <header class="header header-mobile">
    <!-- top read progress line -->
    <div class="header-element">
        <div class="read-progress"></div>
    </div>
    <!-- sidebar menu button -->
    <div class="header-element">
        <div
            class="header-sidebar-menu">
                    <div style="padding-left: 1px;">&#xe775;</div>
        </div>
    </div>
    <!-- header actions -->
    <div class="header-actions">
        <!-- theme mode switch button -->
        <span class="header-theme-btn header-element">
            <i class="fas fa-adjust"></i>
        </span>
        <!-- language transition button -->
        <span class="header-lang-btn header-element">
            <a href="javascript:void(0)" onclick="toggleLanguage()" style="color: inherit; text-decoration: none;">
                <i class="fas fa-globe"></i>
            </a>
            <script>
                function toggleLanguage() {
                    var path = window.location.pathname;
                    console.log('Current path:', path);
                    // Check if path starts with /en/ or is exactly /en
                    var isEn = /^\/en(\/|$)/.test(path);

                    if (isEn) {
                        // Switch to CN: remove /en prefix
                        // If path is /en or /en/, it becomes /
                        // If path is /en/foo, it becomes /foo
                        var newPath = path.replace(/^\/en(\/|$)/, '/');
                        // Ensure we don't end up with empty string if something weird happens, though / covers it
                        if (newPath === '') newPath = '/';
                        // Clean up double slashes if any (except root /)
                        if (newPath !== '/' && newPath.endsWith('/')) newPath = newPath.slice(0, -1) + '/';
                        console.log('Switching to CN:', newPath);
                        window.location.href = newPath;
                    } else {
                        // Switch to EN: add /en prefix
                        // Handle root / specially to avoid /en//
                        var suffix = path;
                        if (suffix === '/') suffix = '';
                        console.log('Switching to EN:', '/en' + suffix);
                        window.location.href = '/en' + suffix;
                    }
                }
            </script>
        </span>
        <!-- back to home page text -->
        <span class="home-link header-element">
            <a href="/en/">Android Performance</a>
        </span>
    </div>
    <!-- toggle banner -->
                <div class="banner">
                        <div class="blog-title header-element">
                            <a href="/en/">
                                Android Performance
                            </a>
                        </div>
                        <div class="post-title header-element">
                            <a href="#" class="post-name">Android Perfetto Series 9: CPU Information Interpretation</a>
                        </div>
                </div>
</header>
        <!-- fixed footer -->
        <footer class="footer-fixed">
    <!-- donate button -->
    <div class="donate-popup donate-popup--hidden">
    <div class="donate-popup__title">Buy Me A Coffee</div>
    <div class="donate-popup__content">
        <div class="donate-popup__content-description">If you find this article helpful, consider buying me a coffee.</div>
        <img
            class="donate-popup__content-qrCode"
            title="Wechat"
            alt="Wechat"
            src="/en/assets/donate-wechat.png"
        ></img>
        <img
            class="donate-popup__content-qrCode"
            title="Alipay"
            alt="Alipay"
            src="/en/assets/donate-alipay.png"
        ></img>
    </div>
</div>

    <div
        title="Donate to the author"
        class="footer-fixed-btn footer-fixed-btn--hidden donate-btn"
    >
        <i class="fas fa-donate"></i>
    </div>

    <!-- back to top button -->
    <div class="footer-fixed-btn footer-fixed-btn--hidden back-top">
        <div>&#xe639;</div>
    </div>
</footer>

        <!-- wrapper -->
        <div class="wrapper">
            <div class="site-intro" style="    height:50vh;
">
    <!-- 主页  -->
    <!-- 404页  -->
    <div class="site-intro-placeholder"></div>
    <picture>
            <source type="image/webp" srcset="/en/intro/post-bg.webp">
        <img class="site-intro-img"
             src="/en/intro/post-bg.jpg"
             alt=""
loading="lazy"             decoding="async"
             fetchpriority="auto"
             sizes="100vw">
    </picture>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
                Android Perfetto Series 9: CPU Information Interpretation
            <!-- 404 -->
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            <!-- 404 -->
        </p>
        <!-- 文章页 meta -->
            <div class="post-intros">
                <!-- 文章页标签  -->
                    <div class="post-intro-tags" >
        <span class="post-category" data-categories="Android Performance Optimization">
            <i class="fas fa-folder post-category-icon"></i>
            <span class="post-category-text">
                Android Performance Optimization
            </span>
        </span>
        <a class="post-tag" href="javascript:void(0);" data-tags="Android">Android</a>
        <a class="post-tag" href="javascript:void(0);" data-tags="Perfetto">Perfetto</a>
        <a class="post-tag" href="javascript:void(0);" data-tags="Systrace">Systrace</a>
        <a class="post-tag" href="javascript:void(0);" data-tags="Performance Optimization">Performance Optimization</a>
        <a class="post-tag" href="javascript:void(0);" data-tags="Thread Optimization">Thread Optimization</a>
        <a class="post-tag" href="javascript:void(0);" data-tags="Jank Optimization">Jank Optimization</a>
        <a class="post-tag" href="javascript:void(0);" data-tags="Battery Optimization">Battery Optimization</a>
        <a class="post-tag" href="javascript:void(0);" data-tags="ANR Analysis">ANR Analysis</a>
        <a class="post-tag" href="javascript:void(0);" data-tags="Page Response">Page Response</a>
</div>

                <!-- 文章字数统计 -->
                    <div class="post-intro-read">
                        <span>Word count: <span class="post-count word-count">4.8k</span>Reading time: <span class="post-count reading-time">29 min</span></span>
                    </div>
                <div class="post-intro-meta">
                    <!-- 撰写日期 -->
                    <span class="iconfont-archer post-intro-calander">&#xe676;</span>
                    <span class="post-intro-time">2025/11/12</span>
                    <!-- 文章分享 -->
                    <span class="share-wrapper">
                        <span class="iconfont-archer share-icon">&#xe71d;</span>
                        <span class="share-text">Share</span>
                        <ul class="share-list">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
    </div>
</div>

            
            <script>
  // get user agent
  function getBrowserVersions() {
    var u = window.navigator.userAgent
    return {
      userAgent: u,
      trident: u.indexOf('Trident') > -1, //IE内核
      presto: u.indexOf('Presto') > -1, //opera内核
      webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
      gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
      mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
      ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
      android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
      iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
      iPad: u.indexOf('iPad') > -1, //是否为iPad
      webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
      weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
      uc: u.indexOf('UCBrowser') > -1, //是否为android下的UC浏览器
    }
  }
  var browser = {
    versions: getBrowserVersions(),
  }
  console.log('userAgent: ' + browser.versions.userAgent)

  // callback
  function fontLoaded() {
    console.log('font loaded')
    if (document.getElementsByClassName('site-intro-meta')) {
      document
        .getElementsByClassName('intro-title')[0]
        .classList.add('intro-fade-in')
      document
        .getElementsByClassName('intro-subtitle')[0]
        .classList.add('intro-fade-in')
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in')
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb() {
    if (browser.versions.uc) {
      console.log('UCBrowser')
      fontLoaded()
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular'],
        },
        loading: function () {
          // 所有字体开始加载
          // console.log('font loading');
        },
        active: function () {
          // 所有字体已渲染
          fontLoaded()
        },
        inactive: function () {
          // 字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout')
          fontLoaded()
        },
        timeout: 5000, // Set the timeout to two seconds
      })
    }
  }

  function asyncErr() {
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0]
    o.src = u
    if (cb) {
      o.addEventListener(
        'load',
        function (e) {
          cb(null, e)
        },
        false
      )
    }
    if (err) {
      o.addEventListener(
        'error',
        function (e) {
          err(null, e)
        },
        false
      )
    }
    s.parentNode.insertBefore(o, s)
  }

  var asyncLoadWithFallBack = function (arr, success, reject) {
    var currReject = function () {
      reject()
      arr.shift()
      if (arr.length) async(arr[0], success, currReject)
    }

    async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack(
    [
      'https://cdn.bootcdn.net/ajax/libs/webfont/1.6.28/webfontloader.min.js',
      'https://cdn.staticfile.org/webfont/1.6.28/webfontloader.min.js',
      'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js',
      "/en/lib/webfontloader.min.js",
    ],
    asyncCb,
    asyncErr
  )
</script>

            <img class="loading" src="/en/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" alt="loading">
            <div class="container container-unloaded">
                <main class="main post-page">
    <article class="article-entry">
        <p>This is the ninth article in the Perfetto series, focusing on CPU information analysis in Perfetto. Perfetto provides far superior data visualization and analysis capabilities compared to Systrace. Understanding CPU-related information is the foundation for locating performance bottlenecks and analyzing power consumption issues.</p>
<p>The goal of this series is to examine the overall operation of the Android system from a brand new graphical perspective through the Perfetto tool, while also providing a new way to learn the Framework. Perhaps you’ve read many source code analysis articles but always feel confused by the complex call chains or can’t remember specific execution flows. Through Perfetto, by visualizing these processes, you may gain a deeper and more intuitive understanding of the system.</p>
<span id="more"></span>

<h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ul>
<li><a href="#series">Perfetto Series Articles</a></li>
<li><a href="#overview">CPU Information Overview in Perfetto</a></li>
<li><a href="#traceconfig">Trace Config Required for Capturing CPU Information</a></li>
<li><a href="#biglittle">CPU Core Architecture: big.LITTLE</a></li>
<li><a href="#scheduling">CPU Scheduling</a></li>
<li><a href="#frequency">CPU Frequency Deep Dive</a></li>
<li><a href="#eas">Linux Kernel Scheduling Strategy: Core Selection and Migration</a></li>
<li><a href="#practices-sql">Practice and SQL</a></li>
<li><a href="#summary">Summary</a></li>
</ul>
<p><a id="series"></a></p>
<h2 id="Perfetto-Series-Articles"><a href="#Perfetto-Series-Articles" class="headerlink" title="Perfetto Series Articles"></a>Perfetto Series Articles</h2><ol>
<li><a target="_blank" rel="noopener" href="https://www.androidperformance.com/en/2024/03/27/Android-Perfetto-101/#/Perfetto-Series-Catalog">Android Perfetto Series Catalog</a></li>
<li><a target="_blank" rel="noopener" href="https://www.androidperformance.com/en/2024/05/21/Android-Perfetto-01-What-is-perfetto/">Android Perfetto Series 1: Introduction to Perfetto</a></li>
<li><a target="_blank" rel="noopener" href="https://www.androidperformance.com/en/2024/05/21/Android-Perfetto-02-how-to-get-perfetto/">Android Perfetto Series 2: Capturing Perfetto Traces</a></li>
<li><a target="_blank" rel="noopener" href="https://www.androidperformance.com/en/2024/05/21/Android-Perfetto-03-how-to-analysis-perfetto/">Android Perfetto Series 3: Familiarizing with Perfetto View</a></li>
<li><a target="_blank" rel="noopener" href="https://www.androidperformance.com/en/2025/02/08/Android-Perfetto-04-Open-Big-Trace-With-Command-Line/">Android Perfetto Series 4: Opening Large Traces via Command Line</a></li>
<li><a target="_blank" rel="noopener" href="https://www.androidperformance.com/en/2025/03/26/Android-Perfetto-05-Chorergrapher/">Android Perfetto Series 5: Android App Rendering Flow Based on Choreographer</a></li>
<li><a target="_blank" rel="noopener" href="https://www.androidperformance.com/en/2025/04/26/Android-Perfetto-06-Why-120Hz/">Android Perfetto Series 6: Why 120Hz? Advantages and Challenges of High Refresh Rates</a></li>
<li><a href="https://androidperformance.com/en/2025/08/02/Android-Perfetto-07-MainThread-And-RenderThread/">Android Perfetto Series 7: MainThread and RenderThread Deep Dive</a></li>
<li><a href="https://androidperformance.com/en/2025/08/05/Android-Perfetto-08-Vsync/">Android Perfetto Series 8: Understanding Vsync Mechanism and Performance Analysis</a></li>
<li><a target="_blank" rel="noopener" href="https://www.androidperformance.com/en/2025/11/12/Android-Perfetto-09-CPU/">Android Perfetto Series 9: CPU Information Interpretation</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1oi82efE4D/?vd_source=0c6d2191e785de0a36dc21a9da7e664e">Video (Bilibili) - Android Perfetto Basics and Case Sharing</a></li>
</ol>
<p><a id="overview"></a></p>
<h2 id="CPU-Information-Overview-in-Perfetto"><a href="#CPU-Information-Overview-in-Perfetto" class="headerlink" title="CPU Information Overview in Perfetto"></a>CPU Information Overview in Perfetto</h2><p>In the Perfetto UI, CPU-related information is usually grouped at the top and is the starting point for performance analysis. It mainly includes the following three core tracks:</p>
<ul>
<li><strong>CPU Scheduling</strong>: Shows which thread is executing on each CPU core at each time point.</li>
<li><strong>CPU Frequency</strong>: Shows the frequency changes of each CPU core or core cluster.</li>
<li><strong>CPU Idle</strong>: Shows the low-power states (C-States) entered by each CPU core.</li>
</ul>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112214415666.png" alt="image-20251112214415666"></p>
<p>By analyzing CPU-related information, you can answer the following key performance questions or perform competitive analysis:</p>
<ul>
<li>Why isn’t the application main thread executing? Is it being preempted by other threads?</li>
<li>What’s the reason for a task executing slowly? Was it scheduled to a low-performance core?</li>
<li>In specific scenarios, is the CPU frequency limited?</li>
<li>When the application is in the background, does the CPU effectively enter deep sleep state?</li>
</ul>
<p><a id="traceconfig"></a></p>
<h2 id="Trace-Config-Required-for-Capturing-CPU-Information"><a href="#Trace-Config-Required-for-Capturing-CPU-Information" class="headerlink" title="Trace Config Required for Capturing CPU Information"></a>Trace Config Required for Capturing CPU Information</h2><p>To collect all CPU data needed for analysis in this article, you need a correct <code>TraceConfig</code>. Incorrect configuration will cause certain tracks (such as CPU frequency) or certain kernel events (such as wakeup events) to be missing. Below is the Perfetto official documentation’s recommended configuration for general CPU analysis. You can add it to your Perfetto Config and use it when capturing traces.</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">data_sources &#123;</span><br><span class="line">  config &#123;</span><br><span class="line">    name: <span class="string">&quot;linux.ftrace&quot;</span></span><br><span class="line">    ftrace_config &#123;</span><br><span class="line">      ftrace_events: <span class="string">&quot;sched/sched_process_exit&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;sched/sched_process_free&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;task/task_newtask&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;task/task_rename&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;sched/sched_switch&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;power/suspend_resume&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;sched/sched_blocked_reason&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;sched/sched_wakeup&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;sched/sched_wakeup_new&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;sched/sched_waking&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;sched/sched_process_exit&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;sched/sched_process_free&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;task/task_newtask&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;task/task_rename&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;power/cpu_frequency&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;power/cpu_idle&quot;</span></span><br><span class="line">      ftrace_events: <span class="string">&quot;power/suspend_resume&quot;</span></span><br><span class="line">      symbolize_ksyms: <span class="literal">true</span></span><br><span class="line">      disable_generic_events: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">data_sources &#123;</span><br><span class="line">  config &#123;</span><br><span class="line">    name: <span class="string">&quot;linux.process_stats&quot;</span></span><br><span class="line">    process_stats_config &#123;</span><br><span class="line">      scan_all_processes_on_start: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">data_sources &#123;</span><br><span class="line">  config &#123;</span><br><span class="line">    name: <span class="string">&quot;linux.sys_stats&quot;</span></span><br><span class="line">    sys_stats_config &#123;</span><br><span class="line">      cpufreq_period_ms: <span class="number">250</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>This configuration enables key ftrace events including <code>sched</code> (scheduling), <code>power</code> (frequency and idle), and <code>task</code> (task lifecycle), which are the foundation for deep CPU analysis.</p>
<p><a id="biglittle"></a></p>
<h2 id="CPU-Core-Architecture-big-LITTLE"><a href="#CPU-Core-Architecture-big-LITTLE" class="headerlink" title="CPU Core Architecture: big.LITTLE"></a>CPU Core Architecture: big.LITTLE</h2><p>Before diving into analysis, you must understand the CPU core architecture of modern mobile SoCs. Currently, mainstream mobile processors generally adopt the <code>big.LITTLE</code> heterogeneous multi-core architecture, or its variants, such as <code>big.Medium.LITTLE</code> (big-medium-small cores).</p>
<ul>
<li><strong>LITTLE cores</strong>: Designed for low power consumption, with lower frequencies, used for background tasks and lightweight computing to ensure battery life.</li>
<li><strong>Big cores</strong>: Designed for high performance, with higher frequencies and greater power consumption, used for user interaction, gaming, app launches, and other heavy load scenarios.</li>
<li><strong>Prime Core</strong>: Some flagship chips have an extremely high-frequency prime core for the most demanding single-core performance challenges.</li>
</ul>
<p>In Perfetto’s CPU tracks, cores are usually numbered starting from 0. For example, in a typical octa-core processor, <code>CPU 0-3</code> might be LITTLE cores, <code>CPU 4-6</code> big cores, and <code>CPU 7</code> the prime core. <strong>Identifying core types is crucial for performance analysis</strong>: if a compute-intensive task runs on a LITTLE core for an extended period, its execution time will far exceed expectations. During analysis, you need to match the thread’s running core with its task attributes to judge whether the scheduler’s behavior meets expectations.</p>
<p>Below is a typical 4+4 CPU:</p>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112214626810.png" alt="image-20251112214626810"></p>
<p>Below is a typical 4+3+1 CPU (MTK Dimensity 9500, 9400, and Qualcomm Snapdragon high-end series):</p>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112215105550.png" alt="image-20251112215105550"></p>
<p>Below is a 5+2 CPU (Qualcomm 8Elite 1 lite version; the standard 8Elite 1 has cores 0-5 as LITTLE cores and 6-7 as big cores, so I won’t include that image here):</p>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112214833158.png" alt="image-20251112214833158"></p>
<p>Generally, you can find out the big-medium-small core architecture by checking the CPU spec, or by cat-ing the corresponding CPU nodes. I won’t elaborate further here.</p>
<p><a id="scheduling"></a></p>
<h2 id="CPU-Scheduling"><a href="#CPU-Scheduling" class="headerlink" title="CPU Scheduling"></a>CPU Scheduling</h2><p>The <code>CPU Scheduling</code> track is the most commonly used and most important part. It visualizes the decision-making process of the Linux kernel scheduler. Its data source is the <code>sched/sched_switch</code> event in kernel ftrace.</p>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112215332310.png" alt="CPU Scheduling Area"></p>
<p>Each CPU core corresponds to an independent track row. Different colored blocks on the track represent specific threads running on that CPU core during that time slice.</p>
<ul>
<li>UI details: Clicking a CPU slice, the details panel will show the <code>cpu</code>, <code>end_state</code>, <code>priority</code>, associated <code>process/thread</code>, etc. for that scheduling; expanding the process downward also shows each thread’s independent track, facilitating tracking of a single thread’s state evolution (refer to <a target="_blank" rel="noopener" href="https://perfetto.dev/docs/data-sources/cpu-scheduling">official documentation</a>).</li>
</ul>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112215540626.png" alt="image-20251112215540626"></p>
<h3 id="Thread-State-Deep-Dive"><a href="#Thread-State-Deep-Dive" class="headerlink" title="Thread State Deep Dive"></a>Thread State Deep Dive</h3><p>Understanding Linux thread states is a prerequisite for performance optimization. In Perfetto, selecting a thread, the <code>Current State</code> panel below will show its current state. This state information comes from Perfetto’s parsed <code>thread_state</code>&#x2F;<code>thread_state_slice</code> tables.</p>
<h4 id="Running-Green"><a href="#Running-Green" class="headerlink" title="Running (Green)"></a>Running (Green)</h4><p><strong>State Definition</strong>: Green represents the thread is executing code on the CPU. This is the only state truly consuming CPU resources for computation.</p>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112215705017.png" alt="image-20251112215705017"></p>
<p><strong>Analysis Points</strong>:</p>
<ul>
<li><strong>Execution Duration</strong>: Excessively long <code>Running</code> states, especially on critical threads, usually mean intensive computational tasks, such as complex algorithms or loops. This increases task duration and may block other threads’ execution.</li>
<li><strong>Running Core</strong>: Analyze in combination with the CPU’s core architecture (e.g., big.LITTLE). Whether a compute-intensive task is scheduled to the expected performance core (big core) is an important basis for evaluating whether the scheduling strategy is reasonable.</li>
<li><strong>Running Frequency</strong>: The thread’s actual execution speed is also affected by CPU frequency. Even if the thread runs on a big core, if frequency is reduced due to thermal throttling or other reasons, its performance will decline. Therefore, comprehensive analysis is needed in combination with the <code>CPU Frequency</code> track.</li>
</ul>
<h4 id="R-Runnable"><a href="#R-Runnable" class="headerlink" title="R (Runnable)"></a>R (Runnable)</h4><p><strong>State Definition</strong>: The thread has all conditions for running and is waiting for the scheduler to assign a CPU core. In Perfetto’s thread private track, the <code>Runnable</code> state is usually displayed as light green or white bars.</p>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112220248837.png" alt="image-20251112220248837"></p>
<p><strong>Analysis Points</strong>:</p>
<ul>
<li><strong><code>Runnable</code> and Jank</strong>: For threads sensitive to response time like UI threads, long periods in <code>Runnable</code> state are a direct cause of jank. It means the thread cannot get CPU time in time to handle tasks (such as UI drawing), leading to frame drops.</li>
</ul>
<p><strong>Three Types of <code>Runnable</code></strong>:<br>Careful observation reveals that the “predecessor” of threads entering <code>Runnable</code> state varies. Based on the kernel’s scheduling timing, we can divide it into three situations:</p>
<ol>
<li><p><strong>Wake-up from Sleep</strong>: This is the most common type. The thread is awakened from <code>S</code> or <code>D</code> state because the resource it was waiting for (such as lock, I&#x2F;O, Binder reply) is ready, enters <code>Runnable</code> state, waiting to be selected by the scheduler for execution.</p>
</li>
<li><p><strong>User Preemption</strong>: Refers to the thread’s running time slice expiring, or a higher priority task appearing, causing the scheduler to decide to swap out the current thread <strong>when returning from kernel mode to user mode</strong> (such as after system call, interrupt return). At this time, the swapped-out thread changes from <code>Running</code> to <code>Runnable</code>. In the underlying <code>sched_switch</code> trace, its <code>prev_state</code> is marked as <code>R</code>.</p>
</li>
<li><p><strong>Kernel Preemption</strong>: Refers to a higher priority task or interrupt “forcibly” interrupting the current thread <strong>while it’s executing kernel mode code</strong>, making it yield the CPU. This situation usually means a more urgent scheduling. At this time, the swapped-out thread changes from <code>Running</code> to <code>Runnable (Preempted)</code>. In the underlying trace, its <code>prev_state</code> is marked as <code>R+</code>, which Perfetto parses and displays accordingly.</p>
</li>
</ol>
<p>Understanding the differences between these three types helps more precisely judge the causes of scheduling delays. For example, a large number of <code>Runnable (Preempted)</code> may suggest the system has frequent, high-priority wakeup sources, causing critical threads to be frequently interrupted in kernel mode, or the CPU is already fully loaded (a more common situation). At this time, lower priority Tasks are easily preempted by higher priority Tasks and forced to yield the CPU. If your critical Task is always being preempted, you need to adjust priorities.</p>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112220534899.png" alt="image-20251112220534899"></p>
<h4 id="S-Sleep-x2F-Interruptible-Sleep"><a href="#S-Sleep-x2F-Interruptible-Sleep" class="headerlink" title="S (Sleep &#x2F; Interruptible Sleep)"></a>S (Sleep &#x2F; Interruptible Sleep)</h4><p><strong>State Definition</strong>: The thread enters sleep while waiting for an event and can be interrupted by signals. This is the most common sleep state and is usually benign because it doesn’t consume CPU resources while waiting.</p>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112221122170.png" alt="image-20251112221122170"></p>
<p><strong>Analysis Points</strong>:</p>
<ul>
<li><strong>Waiting Resources</strong>: If critical threads (such as UI thread) sleep for too long, it will also cause performance issues. Common waiting reasons include:<ul>
<li><strong>Lock Contention</strong>: Waiting to acquire a <code>mutex</code> (Java lock or native futex).</li>
<li><strong>Binder Communication</strong>: Waiting for another process to return results through Binder call.</li>
<li><strong>I&#x2F;O Operations</strong>: Waiting for network socket data (<code>epoll_wait</code>).</li>
<li><strong>Explicit Sleep</strong>: Code called <code>Thread.sleep()</code> or <code>Object.wait()</code>.</li>
</ul>
</li>
<li><strong>Dependency Analysis</strong>: In Perfetto, selecting a Task that is Running in the CPU area will show UI indicating which Task on which CPU woke it up. This helps quickly locate inter-thread dependencies. Combined with function call stacks, you can further locate the specific code causing sleep.<br><img src="/en/images/Android-Perfetto-09-CPU/image-20251112221703122.png" alt="image-20251112221703122"></li>
</ul>
<h4 id="D-Uninterruptible-Sleep"><a href="#D-Uninterruptible-Sleep" class="headerlink" title="D (Uninterruptible Sleep)"></a>D (Uninterruptible Sleep)</h4><p><strong>State Definition</strong>: The thread is waiting for hardware I&#x2F;O operations to complete and cannot be interrupted by any signal during this period. This state is designed to protect data consistency during process-device interactions. In Perfetto, this state is usually displayed as orange or red and is a signal requiring key attention.</p>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112220738143.png" alt="image-20251112220738143"></p>
<p><strong>Analysis Points</strong>:</p>
<ul>
<li><strong>Serious Performance Bottleneck</strong>: Long periods in <code>D</code> state mean the thread is completely blocked and cannot respond to any events. If it occurs on the UI thread, it easily leads to ANR.</li>
<li><strong>Common Causes</strong>:<ol>
<li><strong>Disk I&#x2F;O</strong>: Frequent or single large file read&#x2F;write operations.</li>
<li><strong>Memory Pressure</strong>: Insufficient system physical memory, leading to frequent page swap in&#x2F;out, which is essentially high-frequency disk I&#x2F;O.</li>
<li><strong>Kernel Driver Issues</strong>: Implementation defects in some kernel drivers may also cause threads to fall into <code>D</code> state.</li>
</ol>
</li>
<li><strong>Investigation Direction</strong>: In the <code>Current State</code> panel, if <code>D</code> state is accompanied by <code>(iowait)</code> marking, it clearly indicates waiting for I&#x2F;O. You need to check the application’s I&#x2F;O patterns, evaluate their reasonableness, such as whether time-consuming I&#x2F;O operations are placed on the main thread, or whether there’s room for optimization (such as reducing I&#x2F;O frequency and data volume).</li>
</ul>
<h3 id="Wakeup-Relationship-Analysis"><a href="#Wakeup-Relationship-Analysis" class="headerlink" title="Wakeup Relationship Analysis"></a>Wakeup Relationship Analysis</h3><p>Inter-thread dependencies are a difficult point in performance analysis. For a thread sleeping for a long time, the key is finding out “who it’s waiting for”. Perfetto provides powerful wakeup relationship visualization functionality.</p>
<ul>
<li><strong>UI Operation</strong>: In Perfetto’s CPU area, left-click to select a thread Task in <code>Running</code> state. Perfetto will automatically draw a dependency arrow from “waker” to “wakee” and highlight the thread slice where the wakeup source is located.<br><img src="/en/images/Android-Perfetto-09-CPU/image-20251112221703122.png" alt="image-20251112221703122"></li>
<li><strong>Underlying Principle</strong>: This functionality depends on the kernel’s <code>sched_wakeup</code> ftrace event. When thread T1 releases a resource (such as unlocking, completing Binder call), and thread T2 is waiting for that resource, the kernel marks T2 as <code>Runnable</code> state and records this T1 -&gt; T2 wakeup event. Perfetto parses these events to build the dependency chain between threads.</li>
</ul>
<p>Through wakeup analysis, you can clearly track complex call chains, for example: UI thread waits for a Binder call -&gt; Binder thread executes task -&gt; Binder thread waits for another lock -&gt; Lock-holding thread releases lock and wakes Binder thread -&gt; Binder thread completes task and wakes UI thread. Bottleneck points in the entire process will be clear at a glance.</p>
<h4 id="Scheduling-Wakeup-and-Latency-Analysis"><a href="#Scheduling-Wakeup-and-Latency-Analysis" class="headerlink" title="Scheduling Wakeup and Latency Analysis"></a>Scheduling Wakeup and Latency Analysis</h4><p>When thread A suspends on <code>wait()</code>, it enters <code>S</code> (Sleeping) and is removed from the CPU run queue. After thread B calls <code>notify()</code>, the kernel converts thread A to <code>R</code> (Runnable). At this time thread A is “eligible” to be put back into some CPU’s run queue, but this doesn’t mean “immediate” running.</p>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112222240991.png" alt="image-20251112222240991"></p>
<p>Common waiting reasons include:</p>
<ul>
<li>All CPUs are busy: Thread A needs to wait for a queue slot to open up (or currently running threads have higher priority).</li>
<li>There’s an idle CPU, but migration takes time: The load balancer needs a certain time window to migrate the thread to another CPU.</li>
</ul>
<p>Unless using real-time priority, most Linux scheduler configurations are not strictly “work-conserving”. The scheduler sometimes “waits” for the current CPU thread to naturally idle to avoid extra overhead and power consumption from cross-CPU migration. This forms observable “queuing delay” in <code>R</code> state. Combined with <code>sched_waking</code>&#x2F;<code>sched_wakeup_new</code>, you can more precisely characterize the time period from “being awakened” to “actually queued&#x2F;running” (refer to official documentation: differences and applicable scenarios of <code>sched_waking / sched_wakeup</code>).</p>
<ul>
<li>In the target thread’s <code>thread_state</code> track, filter <code>state=R</code> slices as direct evidence of “scheduling delay”.</li>
<li>Synchronously compare other heavy-load threads and IRQ&#x2F;SoftIRQ traces on the same CPU to verify whether there’s time overlap of preemption or high-priority suppression.</li>
<li>If frequently queuing in <code>R</code> state and ending with <code>end_state=R+</code>, view as serious involuntary preemption, need to evaluate priority, placement, and load balancing strategies.</li>
</ul>
<h4 id="Differences-Between-sched-waking-and-sched-wakeup-and-Non-strict-Work-conserving"><a href="#Differences-Between-sched-waking-and-sched-wakeup-and-Non-strict-Work-conserving" class="headerlink" title="Differences Between sched_waking and sched_wakeup and Non-strict Work-conserving"></a>Differences Between sched_waking and sched_wakeup and Non-strict Work-conserving</h4><ul>
<li><code>sched_waking</code> is issued when a thread is marked as runnable (R), <code>sched_wakeup</code> is related to cross-CPU wakeup and may be recorded on source or destination CPU; for most latency analysis, only <code>sched_waking</code> is sufficient (see official explanation).</li>
<li>Most Linux scheduling configurations under general priority are not strictly “work-conserving”. The scheduler sometimes “waits for current CPU to idle” to avoid extra overhead and power consumption from cross-core migration. This causes waiting time in R state (queuing delay) which is not abnormal but a result of trade-offs (see <a target="_blank" rel="noopener" href="https://perfetto.dev/docs/data-sources/cpu-scheduling">Perfetto CPU Scheduling</a>).</li>
</ul>
<h3 id="User-Mode-and-Kernel-Mode-sys-Slices-Locate-Empty-Flame-Graphs"><a href="#User-Mode-and-Kernel-Mode-sys-Slices-Locate-Empty-Flame-Graphs" class="headerlink" title="User Mode and Kernel Mode: sys_* Slices Locate Empty Flame Graphs"></a>User Mode and Kernel Mode: sys_* Slices Locate Empty Flame Graphs</h3><ul>
<li>Not all green <code>Running</code> slices are application code busy. If a thread falls into a single long system call like <code>sys_read</code>, <code>sys_futex</code>, user mode sampling flame graphs may be almost empty.</li>
<li>If a UI thread’s某段 <code>sched_slice</code> is very long, but CPU flame graph hotspots are few or almost none:<ol>
<li>Open that thread’s <code>slice</code> view, check if there are long <code>sys_*</code> slices;</li>
<li>If exists: Bottleneck is mostly in I&#x2F;O or synchronization primitives, prioritize checking I&#x2F;O paths, lock granularity, and access patterns;</li>
<li>If not exists: Return to flame graph, continue profiling user mode hotspot functions.</li>
</ol>
</li>
<li>Suggestions: Merge I&#x2F;O, switch to async, optimize lock contention, reduce system call frequency and single data volume.</li>
</ul>
<h3 id="CPU-Time-and-Wall-Time"><a href="#CPU-Time-and-Wall-Time" class="headerlink" title="CPU Time and Wall Time"></a>CPU Time and Wall Time</h3><p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112223105996.png" alt="image-20251112223105996"></p>
<ul>
<li><code>Wall</code> is the real-world time from slice start to end, <code>CPU</code> is the time actually running on CPU.</li>
<li>Relationship: <code>Wall = CPU + Runnable + Sleep</code>.<ol>
<li>Select target slice (e.g., <code>Choreographer#doFrame</code>), compare <code>Wall</code> with <code>CPU</code>;</li>
<li>If <code>Wall ≈ CPU</code>, it’s computation-heavy, use flame graph to locate hotspots;</li>
<li>If <code>Wall &gt;&gt; CPU</code>, it’s scheduling or dependency waiting, check <code>thread_state</code>‘s <code>R/S/D</code> distribution and wakeup chain.</li>
</ol>
</li>
</ul>
<p><a id="frequency"></a></p>
<h2 id="CPU-Frequency-Deep-Dive"><a href="#CPU-Frequency-Deep-Dive" class="headerlink" title="CPU Frequency Deep Dive"></a>CPU Frequency Deep Dive</h2><p>CPU frequency directly affects code execution speed and is also positively correlated with power consumption. The <code>CPU Frequency</code> track shows each core’s operating frequency (<code>scaling_cur_freq</code>) at specific times. But more importantly, understanding the limiting factors behind it:</p>
<h3 id="Core-Factors-Affecting-CPU-Frequency"><a href="#Core-Factors-Affecting-CPU-Frequency" class="headerlink" title="Core Factors Affecting CPU Frequency"></a>Core Factors Affecting CPU Frequency</h3><ol>
<li><p><strong>Task Utilization</strong>: This is the main driving factor. Modern Android systems mostly use <code>schedutil</code> as the <code>cpufreq</code> frequency scaling policy. It directly associates with the Scheduler, deciding frequency based on thread “busyness” (<code>utilization</code>). A high-load thread (high <code>util</code>) will prompt <code>schedutil</code> to request higher frequency, and vice versa.</p>
</li>
<li><p><strong>Scenario Policy (Power HAL)</strong>: Android Framework passes the current system state, i.e., “scenario”, to the lower layer through Power HAL. For example, during app launch, gaming, or screen touch, Power HAL requests higher performance from the kernel, usually by raising the CPU’s <strong>floor frequency (<code>scaling_min_freq</code>)</strong> and&#x2F;or <strong>ceiling frequency (<code>scaling_max_freq</code>)</strong>, ensuring the CPU can respond quickly.</p>
</li>
<li><p><strong>Thermal Throttling</strong>: This has the highest priority limitation. When device temperature (from battery, CPU, NPU, and other sensors) exceeds preset thresholds, the thermal control system forcibly lowers the CPU’s <strong>ceiling frequency</strong> to reduce heat and protect hardware. At this time, even with high-load tasks, CPU frequency cannot increase, a common external cause of game frame drops and app jank.</p>
</li>
<li><p><strong>Power Limitation and Power Saving Mode</strong>: In low battery or power saving mode enabled, the system similarly limits maximum performance output by lowering ceiling frequency to extend battery life.</p>
</li>
</ol>
<p>Therefore, when finding a heavy task running with CPU frequency not increasing, you should not only look at current frequency but also pay attention to whether <code>scaling_max_freq</code> is limited. This usually means the root cause of the performance bottleneck is not in the application code itself but in the system’s thermal or power consumption policy.</p>
<p><img src="/en/images/Android-Perfetto-09-CPU/image-20251112223237018.png" alt="image-20251112223237018"></p>
<p>The above image is a marker diagram of the CPU frequency area. Hovering the mouse over it shows the current frequency. CPU frequency changes very quickly. In the image, CPU has colored and non-colored parts. Colored parts indicate the current CPU has Tasks running, non-colored parts indicate the current CPU is empty with no Tasks.</p>
<h3 id="Frequency-Data-Collection-and-Platform-Differences"><a href="#Frequency-Data-Collection-and-Platform-Differences" class="headerlink" title="Frequency Data Collection and Platform Differences"></a>Frequency Data Collection and Platform Differences</h3><ul>
<li>Two acquisition methods:<ul>
<li>Event-driven: Enable <code>power/cpu_frequency</code>, record events when kernel cpufreq driver changes frequency. Not all platforms support it, reliable on most ARM SoCs, often no data on many modern Intel platforms.</li>
<li>Polling sampling: Enable <code>linux.sys_stats</code> and set <code>cpufreq_period_ms &gt; 0</code>, periodically read <code>/sys/devices/system/cpu/cpu*/cpufreq/cpuinfo_cur_freq</code>, works on both ARM&#x2F;Intel. Recommended to combine with event-driven to fill “initial frequency snapshot”.</li>
</ul>
</li>
<li>Android devices often scale frequency by “cluster”, common phenomenon is multiple CPUs within the same cluster synchronously changing frequency.</li>
<li>Known issues:<ul>
<li>Events only generate when frequency changes, short Traces or stable scenarios may have left-side “blanks”. At this time, rely on polling to fill.</li>
<li>Some UI versions don’t render cpufreq track when Idle state not captured, but data can still be obtained through queries.</li>
<li>Reference: <code>CPU frequency and idle states</code> official explanation.</li>
</ul>
</li>
</ul>
<h3 id="big-LITTLE-Same-Frequency-Doesn’t-Equal-Same-Performance-or-Power-Consumption"><a href="#big-LITTLE-Same-Frequency-Doesn’t-Equal-Same-Performance-or-Power-Consumption" class="headerlink" title="big.LITTLE: Same Frequency Doesn’t Equal Same Performance or Power Consumption"></a>big.LITTLE: Same Frequency Doesn’t Equal Same Performance or Power Consumption</h3><ul>
<li>On heterogeneous CPUs, both at 2.0GHz, LITTLE cores and big cores’ actual computing power and energy consumption are not equivalent. Frequency must be understood in combination with core type.</li>
<li>Core capacity and IPC: Big cores usually have wider out-of-order execution, more execution ports, larger cache, and more aggressive prefetch&#x2F;branch prediction, higher instructions per cycle (IPC); at the same frequency, big cores need less time and energy to complete the same work.</li>
<li>Cluster-level DVFS: Mobile SoCs mostly scale frequency by “cluster”. LITTLE core cluster’s high frequency doesn’t equal big core cluster’s medium frequency performance output; different clusters have different voltage-frequency-energy curves, same frequency point cannot be horizontally compared for “performance per watt”.</li>
<li>Memory&#x2F;cache&#x2F;interconnect bottleneck: If hotspot is constrained by memory bandwidth, LLC hit rate, or system interconnect (NoC), simply raising LITTLE core frequency has limited benefit; big cores’ larger cache&#x2F;stronger prefetch can significantly reduce same task’s memory access waiting, reflecting “same frequency different effect”.</li>
<li>Energy efficiency curve is non-linear: LITTLE cores approaching maximum frequency often enter energy efficiency steep decline zone (voltage elevation causes marginal energy consumption surge), while big cores at medium frequency points may achieve “higher unit energy efficiency”. Same frequency comparison ignores “voltage-frequency-energy” three-dimensional trade-off.</li>
</ul>
<h4 id="P-States-and-governor"><a href="#P-States-and-governor" class="headerlink" title="P-States and governor"></a>P-States and governor</h4><ul>
<li>CPU frequency is not a continuous value but discrete performance states P-States. Common governor is <code>schedutil</code>, selecting appropriate P-State based on task utilization and other signals, coordinating voltage adjustment.</li>
<li>Frequency changes in UI are essentially governor switching between different P-States. High frequency doesn’t necessarily mean faster or more power-efficient, needs to be understood in combination with core cluster type and current upper&#x2F;lower limit constraints.</li>
<li>Verification steps:<ol>
<li>In <code>CPU Frequency</code>, observe whether frequency upper&#x2F;lower limits are raised&#x2F;lowered (such as scenario policy&#x2F;thermal throttling limiting <code>scaling_max_freq</code>).</li>
<li>In <code>CPU Scheduling</code>, check which type of core critical threads run on (combined with device’s core number division).</li>
<li>If “high frequency + LITTLE core + still slow”, prioritize considering core selection&#x2F;memory access bottleneck, not simply “frequency insufficient”.</li>
</ol>
</li>
<li>Recommend combining Power HAL scenarios, thermal management, and task profile (CPU intensive or memory access intensive) for comprehensive optimization, avoid simply using frequency as tuning target. Reference official documentation: <a target="_blank" rel="noopener" href="https://perfetto.dev/docs/data-sources/cpu-scheduling">Perfetto CPU Scheduling</a>.</li>
</ul>
<p><a id="eas"></a></p>
<h2 id="Linux-Kernel-Scheduling-Strategy-Core-Selection-and-Migration"><a href="#Linux-Kernel-Scheduling-Strategy-Core-Selection-and-Migration" class="headerlink" title="Linux Kernel Scheduling Strategy: Core Selection and Migration"></a>Linux Kernel Scheduling Strategy: Core Selection and Migration</h2><p>After understanding thread states and frequency, we also need to deeply understand two core behaviors of the Linux kernel scheduler (mainly EAS - Energy Aware Scheduling in Android): how to select a CPU core for tasks, and why to migrate tasks from one core to another.</p>
<h3 id="Core-Selection-Logic-Task-Placement"><a href="#Core-Selection-Logic-Task-Placement" class="headerlink" title="Core Selection Logic (Task Placement)"></a>Core Selection Logic (Task Placement)</h3><p>When a thread is awakened from <code>Sleep</code> state, or a new thread is created, the EAS scheduler needs to select the most suitable CPU core for it. Its core goal is to minimize system power consumption while meeting task performance requirements. The decision-making process is roughly as follows:</p>
<ol>
<li><strong>Evaluate Task Load (Task Utilization)</strong>: The scheduler evaluates the thread’s <code>util</code>, i.e., how much computing resources it needs. This is a dynamically adjusted value reflecting the thread’s historical busyness.</li>
<li><strong>Find “Sufficient” Core</strong>: The scheduler traverses all available CPU cores, comparing task’s <code>util</code> with each core’s <code>capacity</code> (capacity&#x2F;maximum computing ability). Big cores’ <code>capacity</code> is far higher than LITTLE cores. The scheduler looks for cores where <code>capacity &gt; util</code>, i.e., cores that can “accommodate” this task.</li>
<li><strong>Find “Most Energy-Efficient” Core</strong>: Among all cores meeting <code>capacity</code> requirements, the scheduler uses the “Energy Model” preset in the kernel for calculation. This model knows each core’s power consumption at each frequency. The scheduler selects a CPU core that makes the entire system (including the task itself and other running tasks) have the lowest total power consumption as the final choice.</li>
</ol>
<p><strong>In short</strong>: EAS’s goal is not to find the fastest core for a task, but to find a core that’s “just enough” and “most power-efficient”.</p>
<h3 id="Core-Migration-Logic-Task-Migration"><a href="#Core-Migration-Logic-Task-Migration" class="headerlink" title="Core Migration Logic (Task Migration)"></a>Core Migration Logic (Task Migration)</h3><p>Moving tasks from one CPU core to another is a key means for the scheduler to perform dynamic tuning. It mainly occurs in the following situations:</p>
<ol>
<li><p><strong>Load Balancing</strong>: This is the most common migration reason. The scheduler periodically checks whether the system is in a “load imbalance” state. For example, <code>CPU-1</code> (LITTLE core) is packed with high-load tasks causing its utilization to saturate, while <code>CPU-7</code> (big core) is very idle. At this time, the scheduler judges the system is imbalanced and will “pull” a high-load task from <code>CPU-1</code> to <code>CPU-7</code> to run, to restore balance and improve performance.</p>
</li>
<li><p><strong>Wake-up Migration</strong>: When a thread wakes up, the scheduler re-evaluates its best core. If this thread’s <code>util</code> changed during sleep (for example, a background download thread suddenly receives a large file download task, <code>util</code> spikes), or the core it was running on is now very busy, the scheduler may directly select a more suitable new core for it at wake-up, rather than letting it queue in the original place.</p>
</li>
</ol>
<p>Understanding core selection and migration logic helps us judge whether the scheduler’s behavior is “abnormal”. For example, an obvious foreground UI thread being unreasonably restricted to LITTLE cores for a long time, or “bouncing back and forth” too frequently between big and LITTLE cores, may suggest problems with system scheduling strategy or task priority settings.</p>
<p>Of course, currently Android manufacturers have made a lot of customizations to the scheduler. Critical Tasks usually occupy more CPU and are more likely to get on big cores. There are also many core binding strategies and core signing strategies, causing phenomena seen by each manufacturer to be different. This is also each manufacturer’s core competitiveness (such as Oppo’s Hummingbird Engine).</p>
<p><a id="practices-sql"></a></p>
<h2 id="Practice-and-SQL"><a href="#Practice-and-SQL" class="headerlink" title="Practice and SQL"></a>Practice and SQL</h2><h3 id="Using-SQL-for-Quantitative-Analysis"><a href="#Using-SQL-for-Quantitative-Analysis" class="headerlink" title="Using SQL for Quantitative Analysis"></a>Using SQL for Quantitative Analysis</h3><p>Perfetto’s built-in SQL query engine is one of its powerful features, allowing developers to perform precise aggregation, filtering, and analysis on Trace data. Below are some commonly used CPU analysis queries.</p>
<h3 id="1-Calculate-Total-CPU-Time-for-Each-Process"><a href="#1-Calculate-Total-CPU-Time-for-Each-Process" class="headerlink" title="1. Calculate Total CPU Time for Each Process"></a>1. Calculate Total CPU Time for Each Process</h3><p>This query counts each process’s total running time on all CPUs, sorted in descending order, used to quickly locate processes consuming the most CPU resources.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  process.name,</span><br><span class="line">  <span class="built_in">sum</span>(dur) <span class="operator">/</span> <span class="number">1e9</span> <span class="keyword">AS</span> total_cpu_time_s</span><br><span class="line"><span class="keyword">FROM</span> sched</span><br><span class="line"><span class="keyword">JOIN</span> thread <span class="keyword">ON</span> sched.utid <span class="operator">=</span> thread.utid</span><br><span class="line"><span class="keyword">JOIN</span> process <span class="keyword">ON</span> thread.upid <span class="operator">=</span> process.upid</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> process.name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> total_cpu_time_s <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2-Analyze-Single-Thread’s-Time-State-Distribution"><a href="#2-Analyze-Single-Thread’s-Time-State-Distribution" class="headerlink" title="2. Analyze Single Thread’s Time State Distribution"></a>2. Analyze Single Thread’s Time State Distribution</h3><p>This query based on the <code>thread_state</code> table can be used to analyze a specific thread’s (example <code>surfaceflinger</code>) time distribution in various states, thus judging its main bottleneck.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">CASE</span> state</span><br><span class="line">    <span class="keyword">WHEN</span> <span class="string">&#x27;Running&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;Running&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="string">&#x27;R&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;Runnable&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="string">&#x27;S&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;Interruptible Sleep&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="string">&#x27;D&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;Uninterruptible Sleep&#x27;</span></span><br><span class="line">    <span class="keyword">ELSE</span> state</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">AS</span> human_state,</span><br><span class="line">  <span class="built_in">sum</span>(dur) <span class="operator">/</span> <span class="number">1e6</span> <span class="keyword">AS</span> total_time_ms</span><br><span class="line"><span class="keyword">FROM</span> thread_state</span><br><span class="line"><span class="keyword">WHERE</span> utid <span class="operator">=</span> (<span class="keyword">SELECT</span> utid <span class="keyword">FROM</span> thread <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;surfaceflinger&#x27;</span> LIMIT <span class="number">1</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> human_state</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> total_time_ms <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-Find-Threads-with-Highest-CPU-Consumption-in-Specific-Time-Period"><a href="#3-Find-Threads-with-Highest-CPU-Consumption-in-Specific-Time-Period" class="headerlink" title="3. Find Threads with Highest CPU Consumption in Specific Time Period"></a>3. Find Threads with Highest CPU Consumption in Specific Time Period</h3><p>This query is used to analyze threads consuming the longest CPU time in specific scenarios (such as 2-5s time period during app launch).</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  thread.name,</span><br><span class="line">  <span class="built_in">sum</span>(dur) <span class="operator">/</span> <span class="number">1e9</span> <span class="keyword">AS</span> cpu_time_s</span><br><span class="line"><span class="keyword">FROM</span> sched</span><br><span class="line"><span class="keyword">JOIN</span> thread <span class="keyword">ON</span> sched.utid <span class="operator">=</span> thread.utid</span><br><span class="line"><span class="comment">-- Timestamp unit is nanoseconds, you can add WHERE ts &gt; 2e9 AND ts &lt; 5e9 to get a certain time period</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> thread.name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> cpu_time_s <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<h3 id="4-View-Thread’s-Running-Time-Distribution-on-Each-CPU-Core"><a href="#4-View-Thread’s-Running-Time-Distribution-on-Each-CPU-Core" class="headerlink" title="4. View Thread’s Running Time Distribution on Each CPU Core"></a>4. View Thread’s Running Time Distribution on Each CPU Core</h3><p>This query helps understand a thread’s CPU affinity and whether it runs on expected big&#x2F;LITTLE cores.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  cpu,</span><br><span class="line">  <span class="built_in">sum</span>(dur) <span class="operator">/</span> <span class="number">1e6</span> <span class="keyword">AS</span> time_on_cpu_ms</span><br><span class="line"><span class="keyword">FROM</span> sched</span><br><span class="line"><span class="keyword">WHERE</span> utid <span class="operator">=</span> (<span class="keyword">SELECT</span> utid <span class="keyword">FROM</span> thread <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;system_server&#x27;</span> LIMIT <span class="number">1</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> cpu</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> cpu;</span><br></pre></td></tr></table></figure>

<h3 id="5-Calculate-CPU-Utilization-for-Each-Process"><a href="#5-Calculate-CPU-Utilization-for-Each-Process" class="headerlink" title="5. Calculate CPU Utilization for Each Process"></a>5. Calculate CPU Utilization for Each Process</h3><p>This query calculates each process’s CPU utilization within the entire Trace time range.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  process.name <span class="keyword">AS</span> process_name,</span><br><span class="line">  <span class="number">100</span> <span class="operator">*</span> <span class="built_in">sum</span>(dur) <span class="operator">/</span> <span class="built_in">CAST</span>(TRACE_END() <span class="operator">-</span> TRACE_START() <span class="keyword">AS</span> <span class="type">REAL</span>) <span class="keyword">AS</span> cpu_utilization_percent</span><br><span class="line"><span class="keyword">FROM</span> sched</span><br><span class="line"><span class="keyword">JOIN</span> thread <span class="keyword">ON</span> thread.utid <span class="operator">=</span> sched.utid</span><br><span class="line"><span class="keyword">JOIN</span> process <span class="keyword">ON</span> process.upid <span class="operator">=</span> thread.upid</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> process.name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> cpu_utilization_percent <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<p><a id="summary"></a></p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Proficient analysis of CPU information in Perfetto is a key skill for Android performance optimization. By deeply understanding <strong>core architecture</strong>, <strong>thread states</strong>, <strong>wakeup relationships</strong>, <strong>frequency limitations</strong>, and <strong>C-State</strong>, combined with powerful <strong>SQL queries</strong> for quantitative analysis, developers can precisely locate and solve various performance and power consumption issues.</p>
<h1 id="About-Me-amp-amp-Blog"><a href="#About-Me-amp-amp-Blog" class="headerlink" title="About Me &amp;&amp; Blog"></a>About Me &amp;&amp; Blog</h1><p>Below is a personal introduction and related links. I look forward to communicating with you all. When three people walk together, one of them can be my teacher!</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://www.androidperformance.com/about/">Blogger Personal Introduction</a>: Contains personal WeChat and WeChat group links.</li>
<li><a target="_blank" rel="noopener" href="https://www.androidperformance.com/2019/12/01/BlogMap/">Blog Content Navigation</a>: A navigation of personal blog content.</li>
<li><a href="https://androidperformance.com/2018/05/07/Android-performance-optimization-skills-and-tools/">Excellent Blog Articles Collected and Organized by Individuals - Must-Know for Android Performance Optimization</a>: Welcome everyone to recommend yourself and recommend (WeChat private chat is fine)</li>
<li><a target="_blank" rel="noopener" href="https://www.androidperformance.com/2023/12/30/the-performance/">Android Performance Optimization Knowledge Planet</a>: Welcome to join, thanks for support~</li>
</ol>
<blockquote>
<p><strong>One person can go faster, a group of people can go further</strong></p>
</blockquote>
<p><img src="/en/images/WechatIMG581.png" alt="WeChat QR Code"></p>

    </article>
    <!-- license -->
        <div class="license-wrapper">
            <p>Author：<a href="https://androidperformance.com/en">Gracker</a>
            <p>Link：<a href="https://androidperformance.com/en/2025/11/12/Android-Perfetto-09-CPU/">https://androidperformance.com/en/2025/11/12/Android-Perfetto-09-CPU/</a>
            <p>Publish date：<a href="https://androidperformance.com/en/2025/11/12/Android-Perfetto-09-CPU/">November 12th 2025, 10:00:00 am</a>
            <p>Update date：<a href="https://androidperformance.com/en/2025/11/12/Android-Perfetto-09-CPU/">January 11th 2026, 8:56:53 pm</a>
            <p>License：This work is licensed under <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a></p>
        </div>
    <!-- paginator -->
    <ul class="post-paginator">
        <li class="next">
                <div class="nextSlogan">Next Post</div>
                <a href="/en/2025/11/16/Android-Perfetto-10-Binder/" title="Android Perfetto Series 10: Binder Scheduling and Lock Contention">
                    <div class="nextTitle">Android Perfetto Series 10: Binder Scheduling and Lock Contention</div>
                </a>
        </li>
        <li class="previous">
                <div class="prevSlogan">Previous Post</div>
                <a href="/en/2025/08/05/Android-Perfetto-08-Vsync/" title="Android Perfetto Series 8: Understanding Vsync Mechanism and Performance Analysis">
                    <div class="prevTitle">Android Perfetto Series 8: Understanding Vsync Mechanism and Performance Analysis</div>
                </a>
        </li>
    </ul>
    <!-- comment -->
        <div class="post-comment">
            <!-- 来必力 City 版安装代码 -->

            
            
            
            <!-- utteranc评论 -->

            <!-- partial('_partial/comment/changyan') -->
            <!--PC版-->

            
            
            
        </div>
    <!-- timeliness note -->
    <!-- idea from: https://hexo.fluid-dev.com/posts/hexo-injector/#%E6%96%87%E7%AB%A0%E6%97%B6%E6%95%88%E6%80%A7%E6%8F%90%E7%A4%BA -->
    <!-- Mathjax -->
</main>

                <!-- profile -->
            </div>
            <footer class="footer footer-unloaded">
    <!-- social  -->
        <div class="social">
                            <a href="mailto:Dreamtale.jg@gmail.com" class="iconfont-archer email" title="email" ></a>
                <a href="https://github.com/gracker" class="iconfont-archer github" target="_blank" title="github"></a>
                <span class="iconfont-archer wechat" title="wechat">
                    <img class="profile-qr" src="/en/assets/Wechat.jpeg" />
                </span>
                <span class="iconfont-archer qq" title="qq">
                    <img class="profile-qr" src="/en/553000664" />
                </span>
                <a href="https://weibo.com/gracker520" class="iconfont-archer weibo" target="_blank" title="weibo"></a>
                <a href="https://www.zhihu.com/people/gracker" class="iconfont-archer zhihu" target="_blank" title="zhihu"></a>
                <a href="https://twitter.com/Gracker_Gao" class="iconfont-archer twitter" target="_blank" title="twitter"></a>
                <a href="https://juejin.im/user/557b0590e4b052e031453d76" class="iconfont-archer juejin" target="_blank" title="juejin"></a>
                <a href="https://www.youtube.com/@grackers" class="iconfont-archer youtube" target="_blank" title="youtube"></a>
                <a href="/en/atom.xml" class="iconfont-archer rss" target="_blank" title="rss"></a>

        </div>
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- website approve for Chinese user -->
        <div class="website-approve">
                <span id="icp-approve" class="icp-approve">
                    <a href="https://beian.miit.gov.cn/" target="_blank">蜀 ICP 备 20016190 号</a>
                </span>
        </div>
</footer>

        </div>
        <!-- toc -->
            <div class="toc-wrapper toc-wrapper-loding" style=    top:50vh;
>
                <div class="toc-catalog">
                    <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
                </div>
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Table-of-Contents"><span class="toc-number">1.</span> <span class="toc-text">Table of Contents</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Perfetto-Series-Articles"><span class="toc-number">2.</span> <span class="toc-text">Perfetto Series Articles</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CPU-Information-Overview-in-Perfetto"><span class="toc-number">3.</span> <span class="toc-text">CPU Information Overview in Perfetto</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Trace-Config-Required-for-Capturing-CPU-Information"><span class="toc-number">4.</span> <span class="toc-text">Trace Config Required for Capturing CPU Information</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CPU-Core-Architecture-big-LITTLE"><span class="toc-number">5.</span> <span class="toc-text">CPU Core Architecture: big.LITTLE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CPU-Scheduling"><span class="toc-number">6.</span> <span class="toc-text">CPU Scheduling</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Thread-State-Deep-Dive"><span class="toc-number">6.1.</span> <span class="toc-text">Thread State Deep Dive</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Running-Green"><span class="toc-number">6.1.1.</span> <span class="toc-text">Running (Green)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#R-Runnable"><span class="toc-number">6.1.2.</span> <span class="toc-text">R (Runnable)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S-Sleep-x2F-Interruptible-Sleep"><span class="toc-number">6.1.3.</span> <span class="toc-text">S (Sleep &#x2F; Interruptible Sleep)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-Uninterruptible-Sleep"><span class="toc-number">6.1.4.</span> <span class="toc-text">D (Uninterruptible Sleep)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Wakeup-Relationship-Analysis"><span class="toc-number">6.2.</span> <span class="toc-text">Wakeup Relationship Analysis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Scheduling-Wakeup-and-Latency-Analysis"><span class="toc-number">6.2.1.</span> <span class="toc-text">Scheduling Wakeup and Latency Analysis</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Differences-Between-sched-waking-and-sched-wakeup-and-Non-strict-Work-conserving"><span class="toc-number">6.2.2.</span> <span class="toc-text">Differences Between sched_waking and sched_wakeup and Non-strict Work-conserving</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#User-Mode-and-Kernel-Mode-sys-Slices-Locate-Empty-Flame-Graphs"><span class="toc-number">6.3.</span> <span class="toc-text">User Mode and Kernel Mode: sys_* Slices Locate Empty Flame Graphs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CPU-Time-and-Wall-Time"><span class="toc-number">6.4.</span> <span class="toc-text">CPU Time and Wall Time</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CPU-Frequency-Deep-Dive"><span class="toc-number">7.</span> <span class="toc-text">CPU Frequency Deep Dive</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Core-Factors-Affecting-CPU-Frequency"><span class="toc-number">7.1.</span> <span class="toc-text">Core Factors Affecting CPU Frequency</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Frequency-Data-Collection-and-Platform-Differences"><span class="toc-number">7.2.</span> <span class="toc-text">Frequency Data Collection and Platform Differences</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#big-LITTLE-Same-Frequency-Doesn%E2%80%99t-Equal-Same-Performance-or-Power-Consumption"><span class="toc-number">7.3.</span> <span class="toc-text">big.LITTLE: Same Frequency Doesn’t Equal Same Performance or Power Consumption</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#P-States-and-governor"><span class="toc-number">7.3.1.</span> <span class="toc-text">P-States and governor</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux-Kernel-Scheduling-Strategy-Core-Selection-and-Migration"><span class="toc-number">8.</span> <span class="toc-text">Linux Kernel Scheduling Strategy: Core Selection and Migration</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Core-Selection-Logic-Task-Placement"><span class="toc-number">8.1.</span> <span class="toc-text">Core Selection Logic (Task Placement)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Core-Migration-Logic-Task-Migration"><span class="toc-number">8.2.</span> <span class="toc-text">Core Migration Logic (Task Migration)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Practice-and-SQL"><span class="toc-number">9.</span> <span class="toc-text">Practice and SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Using-SQL-for-Quantitative-Analysis"><span class="toc-number">9.1.</span> <span class="toc-text">Using SQL for Quantitative Analysis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Calculate-Total-CPU-Time-for-Each-Process"><span class="toc-number">9.2.</span> <span class="toc-text">1. Calculate Total CPU Time for Each Process</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Analyze-Single-Thread%E2%80%99s-Time-State-Distribution"><span class="toc-number">9.3.</span> <span class="toc-text">2. Analyze Single Thread’s Time State Distribution</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Find-Threads-with-Highest-CPU-Consumption-in-Specific-Time-Period"><span class="toc-number">9.4.</span> <span class="toc-text">3. Find Threads with Highest CPU Consumption in Specific Time Period</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-View-Thread%E2%80%99s-Running-Time-Distribution-on-Each-CPU-Core"><span class="toc-number">9.5.</span> <span class="toc-text">4. View Thread’s Running Time Distribution on Each CPU Core</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Calculate-CPU-Utilization-for-Each-Process"><span class="toc-number">9.6.</span> <span class="toc-text">5. Calculate CPU Utilization for Each Process</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary"><span class="toc-number">10.</span> <span class="toc-text">Summary</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#About-Me-amp-amp-Blog"><span class="toc-number"></span> <span class="toc-text">About Me &amp;&amp; Blog</span></a>
            </div>
        <!-- sidebar -->
        <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
        <div class="sidebar-panel-archives">
    <!-- 在 ejs 中将 archive 按照时间排序 -->
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    <div class="total-and-search">
        <div class="total-archive">
        Total : 121
        </div>
        <!-- search  -->
    </div>
    <div class="post-archive">
            <div class="archive-year"> 2025 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">11/16</span>
            <a class="archive-post-title" href="/en/2025/11/16/Android-Perfetto-10-Binder/">Android Perfetto Series 10: Binder Scheduling and Lock Contention</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/12</span>
            <a class="archive-post-title" href="/en/2025/11/12/Android-Perfetto-09-CPU/">Android Perfetto Series 9: CPU Information Interpretation</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">08/05</span>
            <a class="archive-post-title" href="/en/2025/08/05/Android-Perfetto-08-Vsync/">Android Perfetto Series 8: Understanding Vsync Mechanism and Performance Analysis</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">08/02</span>
            <a class="archive-post-title" href="/en/2025/08/02/Android-Perfetto-07-MainThread-And-RenderThread/">Android Perfetto Series 7: MainThread and RenderThread Deep Dive</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/26</span>
            <a class="archive-post-title" href="/en/2025/04/26/Android-Perfetto-06-Why-120Hz/">Android Perfetto Series 6: Why 120Hz? Advantages and Challenges</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/26</span>
            <a class="archive-post-title" href="/en/2025/03/26/Android-Perfetto-05-Chorergrapher/">Android Perfetto Series 5: Choreographer-based Rendering Flow</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">02/08</span>
            <a class="archive-post-title" href="/en/2025/02/08/Android-Perfetto-04-Open-Big-Trace-With-Command-Line/">Android Perfetto Series 4: Opening Large Traces via Command Line</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">02/08</span>
            <a class="archive-post-title" href="/en/2025/02/08/Android-ANR-01-ANR-Design/">Android ANR Series 1: Understanding Android ANR Design Philosophy</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">02/08</span>
            <a class="archive-post-title" href="/en/2025/02/08/Android-ANR-02-How-to-analysis-ANR/">Android ANR Series 2: ANR Analysis Methodology and Key Logs</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">02/08</span>
            <a class="archive-post-title" href="/en/2025/02/08/Android-ANR-03-ANR-Case-Share/">Android ANR Series 3 - ANR Case Studies</a>
        </li>
                </ul>
            <div class="archive-year"> 2024 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">05/21</span>
            <a class="archive-post-title" href="/en/2024/05/21/Android-Perfetto-01-What-is-perfetto/">Android Perfetto Series 1: Introduction to Perfetto</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/21</span>
            <a class="archive-post-title" href="/en/2024/05/21/Android-Perfetto-02-how-to-get-perfetto/">Android Perfetto Series 2: Capturing Perfetto Traces</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/21</span>
            <a class="archive-post-title" href="/en/2024/05/21/Android-Perfetto-03-how-to-analysis-perfetto/">Android Perfetto Series 3: Familiarizing with the Perfetto View</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/27</span>
            <a class="archive-post-title" href="/en/2024/03/27/Android-Perfetto-101/">Android Perfetto Series Catalog</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/01</span>
            <a class="archive-post-title" href="/en/2024/01/01/2023-review/">Reflections on 2023: Health, Career, and the Future</a>
        </li>
                </ul>
            <div class="archive-year"> 2023 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">12/30</span>
            <a class="archive-post-title" href="/en/2023/12/30/the-performance/">Introduction to The Android Performance Knowledge Planet</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">08/21</span>
            <a class="archive-post-title" href="/en/2023/08/21/the-performance-design-of-os/">Performance Considerations in Operating System Design</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/14</span>
            <a class="archive-post-title" href="/en/2023/05/14/bad-android-app-with-system-permissions/">Can an App Really Do Whatever It Wants With System Permissions?</a>
        </li>
                </ul>
            <div class="archive-year"> 2022 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">03/27</span>
            <a class="archive-post-title" href="/en/2022/03/27/the-performance-tea-part-01/">The Performance Community Tea Talk - Episode 1</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/13</span>
            <a class="archive-post-title" href="/en/2022/03/13/android-systrace-cpu-state-sleep/">Systrace Thread CPU State Analysis Tips - Sleep and Uninterruptible Sleep</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/13</span>
            <a class="archive-post-title" href="/en/2022/03/13/android-systrace-cpu-state-running/">Systrace Thread CPU State Analysis Tips - Running</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/21</span>
            <a class="archive-post-title" href="/en/2022/01/21/android-systrace-cpu-state-runnable/">Systrace Thread CPU State Analysis Tips - Runnable</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/07</span>
            <a class="archive-post-title" href="/en/2022/01/07/Techniques-Philosophy-and-Tools-for-Android-Performance-Optimization/">Techniques, Philosophy, and Tools for Android Performance Optimization</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/07</span>
            <a class="archive-post-title" href="/en/2022/01/07/The-Performace-1-Performance-Tools/">Android Performance Optimization: Techniques, Methods, and Tools</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/03</span>
            <a class="archive-post-title" href="/en/2022/01/03/2021-Review/">2021 Year in Review: Baby, Career, and Growth</a>
        </li>
                </ul>
            <div class="archive-year"> 2021 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">10/27</span>
            <a class="archive-post-title" href="/en/2021/10/27/if-i-write-a-book-about-performance/">What Should Be in a Book About Android Smoothness?</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/26</span>
            <a class="archive-post-title" href="/en/2021/10/26/build-android-12/">Android System Development Series (1): Downloading, Compiling, and Flashing Android 12</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/13</span>
            <a class="archive-post-title" href="/en/2021/09/13/android-systrace-Responsiveness-in-action-1/">Android Systrace Responsiveness in Action 1 - Understanding Responsiveness Principles</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/13</span>
            <a class="archive-post-title" href="/en/2021/09/13/android-systrace-Responsiveness-in-action-2/">Android Systrace Responsiveness in Action 2 - Responsiveness Analysis - Using App Startup as an Example</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/13</span>
            <a class="archive-post-title" href="/en/2021/09/13/android-systrace-Responsiveness-in-action-3/">Android Systrace Responsiveness in Action 3 - Extended Knowledge on Responsiveness</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/24</span>
            <a class="archive-post-title" href="/en/2021/04/24/android-systrace-smooth-in-action-1/">Android Systrace Smoothness in Action 1 - Understanding Jank Principles</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/24</span>
            <a class="archive-post-title" href="/en/2021/04/24/android-systrace-smooth-in-action-2/">Android Systrace Smoothness in Action 2 - Case Analysis - MIUI Launcher Scroll Jank Analysis</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/24</span>
            <a class="archive-post-title" href="/en/2021/04/24/android-systrace-smooth-in-action-3/">Android Systrace Smoothness in Action 3 - FAQs During Jank Analysis</a>
        </li>
                </ul>
            <div class="archive-year"> 2020 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">08/20</span>
            <a class="archive-post-title" href="/en/2020/08/20/weibo-imageload-opt-on-huawei/">Why is the Weibo Experience Better on Huawei? A Technical Analysis and Reflection</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/26</span>
            <a class="archive-post-title" href="/en/2020/05/26/samsung_crash/">An Incident Caused by a 'Leap' Month - Analysis of Samsung System Reboots</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/07</span>
            <a class="archive-post-title" href="/en/2020/05/07/Android-App-Chain-Wakeup/">Analysis of Android App Chain Wakeups</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">02/14</span>
            <a class="archive-post-title" href="/en/2020/02/14/Android-Systrace-SurfaceFlinger/">Android Systrace Basics - SurfaceFlinger Explained</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">02/03</span>
            <a class="archive-post-title" href="/en/2020/02/03/android-development-learning-path-2020-edition/">Android Developer Learning Path (2020 Edition)</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/28</span>
            <a class="archive-post-title" href="/en/2020/01/28/2020-read/">My 2020 Reading List</a>
        </li>
                </ul>
            <div class="archive-year"> 2019 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">12/21</span>
            <a class="archive-post-title" href="/en/2019/12/21/Android-Systrace-CPU/">Android Systrace Basics - CPU Info Interpretation</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">12/15</span>
            <a class="archive-post-title" href="/en/2019/12/15/Android-Systrace-Triple-Buffer/">Android Systrace Basics - Triple Buffer Explained</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">12/06</span>
            <a class="archive-post-title" href="/en/2019/12/06/Android-Systrace-Binder/">Android Systrace Basics - Binder and Lock Contention Explained</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">12/01</span>
            <a class="archive-post-title" href="/en/2019/12/01/BlogMap/">[Sticky] Blog Article Directory</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">12/01</span>
            <a class="archive-post-title" href="/en/2019/12/01/Android-Systrace-Vsync/">Android Systrace Basics - Vsync Explained</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/18</span>
            <a class="archive-post-title" href="/en/2019/11/18/Android-App-Lunch-Optimize-NEW/">Complete Guide to Android App Startup Optimization</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/18</span>
            <a class="archive-post-title" href="/en/2019/11/18/Android-App-Lunch-Optimize/">Comprehensive Record of Android App Startup Optimization</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/06</span>
            <a class="archive-post-title" href="/en/2019/11/06/Android-Systrace-MainThread-And-RenderThread/">Android Systrace Basics - MainThread and RenderThread Explained</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/04</span>
            <a class="archive-post-title" href="/en/2019/11/04/Android-Systrace-Input/">Android Systrace Basics - Input Interpretation</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/24</span>
            <a class="archive-post-title" href="/en/2019/10/24/Android-Background-Animation/">Analysis of 'Zombie Animations' in the Android Background</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/22</span>
            <a class="archive-post-title" href="/en/2019/10/22/Android-Choreographer/">Detailed Explanation of Android Rendering Mechanism Based on Choreographer</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/18</span>
            <a class="archive-post-title" href="/en/2019/09/18/Android-Jank-Due-To-Low-Memory/">Overview of Jank and Frame Drops in Android - Low Memory</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/17</span>
            <a class="archive-post-title" href="/en/2019/09/17/Android-Kill-Background-App-Debug/">Case Study: Debugging the Android Launcher Kill Problem</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/05</span>
            <a class="archive-post-title" href="/en/2019/09/05/Android-Jank-Due-To-App/">Overview of Jank and Frame Drops in Android - Application Layer</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/05</span>
            <a class="archive-post-title" href="/en/2019/09/05/Android-Jank-Due-To-System/">Overview of Jank and Frame Drops in Android - System Layer</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/05</span>
            <a class="archive-post-title" href="/en/2019/09/05/Android-Jank-Debug/">Overview of Jank and Frame Drops in Android - Methodology</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/01</span>
            <a class="archive-post-title" href="/en/2019/09/01/Android-Activity-Lunch-Mode/">A Detailed Guide to Activity Launch Modes in Android</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/27</span>
            <a class="archive-post-title" href="/en/2019/07/27/Android-Hardware-Layer-NEW/">Detailed Explanation of Hardware Layer in Android</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/27</span>
            <a class="archive-post-title" href="/en/2019/07/27/Android-Hardware-Layer/">A Deep Dive into Hardware Layers in Android</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/23</span>
            <a class="archive-post-title" href="/en/2019/07/23/Android-Systrace-Pre/">Android Systrace Basics - Prerequisites for Analyzing Systrace</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">06/29</span>
            <a class="archive-post-title" href="/en/2019/06/29/Android-Systrace-SystemServer/">Android Systrace Basics - SystemServer Explained</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/28</span>
            <a class="archive-post-title" href="/en/2019/05/28/Android-Systrace-About/">Android Systrace Basics - Introduction to Systrace</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/27</span>
            <a class="archive-post-title" href="/en/2019/05/27/why-60-fps/">Android Systrace Basics - Why 60 FPS?</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/26</span>
            <a class="archive-post-title" href="/en/2019/05/26/Android_Systrace_0/">Android Systrace -- Series Article Index</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/15</span>
            <a class="archive-post-title" href="/en/2019/05/15/90hz-on-android/">A New Era of Smoothness: Thoughts on 90Hz on Android</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/07</span>
            <a class="archive-post-title" href="/en/2019/04/07/Sharp-Tools/">Sharp Tools - Efficient Tool Recommendations</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/07</span>
            <a class="archive-post-title" href="/en/2019/04/07/liqi/">Liqi - High-Efficiency Tools Recommendation</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/21</span>
            <a class="archive-post-title" href="/en/2019/01/21/android-performance-case-jank-accessbility/">Case Analysis of System-wide Stutter Caused by Android Accessibility Service</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/12</span>
            <a class="archive-post-title" href="/en/2019/01/12/recommend-of-2018/">2018 Best Items Recommendations - A Reward for Your Hard Work</a>
        </li>
                </ul>
            <div class="archive-year"> 2018 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">11/01</span>
            <a class="archive-post-title" href="/en/2018/11/01/android-system-develop-0/">Setting Up the Android System Development Environment</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/25</span>
            <a class="archive-post-title" href="/en/2018/10/25/How-do-engineers-count-well/">Lu Qi: Besides Good Code, What Makes an Engineer Excellent?</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/01</span>
            <a class="archive-post-title" href="/en/2018/10/01/how-to-stop-sucking-and-be-awesome-instead-8/">The Programmer's Apprenticeship - 08: The Beauty of Reading</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/30</span>
            <a class="archive-post-title" href="/en/2018/09/30/how-to-stop-sucking-and-be-awesome-instead-7/">The Programmer's Apprenticeship - 07: Games and Programming</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/29</span>
            <a class="archive-post-title" href="/en/2018/09/29/how-to-stop-sucking-and-be-awesome-instead-6/">The Programmer's Apprenticeship - 06: All About the Internet</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/28</span>
            <a class="archive-post-title" href="/en/2018/09/28/how-to-stop-sucking-and-be-awesome-instead-5/">The Programmer's Apprenticeship - 05: Know Your Users</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/27</span>
            <a class="archive-post-title" href="/en/2018/09/27/how-to-stop-sucking-and-be-awesome-instead-4/">The Programmer's Apprenticeship - 04: Reflections on Testing</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/26</span>
            <a class="archive-post-title" href="/en/2018/09/26/how-to-stop-sucking-and-be-awesome-instead-3/">The Programmer's Apprenticeship - 03: Web Design Principles</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/20</span>
            <a class="archive-post-title" href="/en/2018/09/20/how-to-stop-sucking-and-be-awesome-instead-2/">The Programmer's Apprenticeship - 02: The Way of Programming</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/19</span>
            <a class="archive-post-title" href="/en/2018/09/19/how-to-stop-sucking-and-be-awesome-instead-1/">The Programmer's Apprenticeship - 01: The Art of Fighting Back</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">09/13</span>
            <a class="archive-post-title" href="/en/2018/09/13/android-memory/">Does the Android System Not Release Memory?</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">08/13</span>
            <a class="archive-post-title" href="/en/2018/08/13/Some-Thoughts-on-the-Fluency-of-Android/">Some Thoughts on Android System Fluency</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/20</span>
            <a class="archive-post-title" href="/en/2018/05/20/zhihu-startingwindow/">Zhihu: Save Your StartingWindow</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/07</span>
            <a class="archive-post-title" href="/en/2018/05/07/Android-performance-optimization-skills-and-tools/">[Sticky] Android Performance Optimization: Must-Know Skills and Tools</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/06</span>
            <a class="archive-post-title" href="/en/2018/01/06/2017-most-recommended/">2017 Best Recommendations - A Reward for Hard-Working Self</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/06</span>
            <a class="archive-post-title" href="/en/2018/01/06/Most-Recommended-of-2017/">2017 Annual Best Recommendations - Reward Yourself for Hard Work</a>
        </li>
                </ul>
            <div class="archive-year"> 2017 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">04/23</span>
            <a class="archive-post-title" href="/en/2017/04/23/About-work/">Reflections on Work and Growth (2017)</a>
        </li>
                </ul>
            <div class="archive-year"> 2016 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">04/05</span>
            <a class="archive-post-title" href="/en/2016/04/05/android-bottom-bar-2/">Android Bottom Navigation Spec Part 2: Style, Behavior, and Dimensions</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/05</span>
            <a class="archive-post-title" href="/en/2016/04/05/android-bottom-bar-1/">Android Bottom Navigation Spec Part 1: Usage</a>
        </li>
                </ul>
            <div class="archive-year"> 2015 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">12/31</span>
            <a class="archive-post-title" href="/en/2015/12/31/How-to-calculation-android-app-lunch-time/">How to Calculate App Startup Time in Android?</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">12/29</span>
            <a class="archive-post-title" href="/en/2015/12/29/Android-App-Launch-Optimization-DelayLoad-Part-2/">Android App Launch Optimization: Implementation and Principles of DelayLoad (Part 2)</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">11/18</span>
            <a class="archive-post-title" href="/en/2015/11/18/Android-app-lunch-optimize-delay-load/">Android App Startup Optimization - DelayLoad Implementation and Principles (Part 1)</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">08/12</span>
            <a class="archive-post-title" href="/en/2015/08/12/AndroidL-hwui-RenderThread-workflow/">RenderThread Workflow in Android hwui</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">08/05</span>
            <a class="archive-post-title" href="/en/2015/08/05/HashMap/">Java 7 HashMap Source Code Analysis</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/20</span>
            <a class="archive-post-title" href="/en/2015/07/20/Android-Performance-Memory-onTrimMemory/">Android Code Memory Optimization Suggestions - OnTrimMemory</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/20</span>
            <a class="archive-post-title" href="/en/2015/07/20/Android-Performance-Memory-AndroidResource/">Android Code Memory Optimization Suggestions - Android Resources</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/20</span>
            <a class="archive-post-title" href="/en/2015/07/20/Android-Performance-Memory-Google/">Android Code Memory Optimization Suggestions - Android (Official)</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/20</span>
            <a class="archive-post-title" href="/en/2015/07/20/Android-Performance-Memory-Java/">Android Code Memory Optimization Suggestions - Java (Official)</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/29</span>
            <a class="archive-post-title" href="/en/2015/05/29/Nexus6-with-Android-M/">Enabling Multi-Window Mode on Nexus 6 with Android M</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/06</span>
            <a class="archive-post-title" href="/en/2015/05/06/Java-Singleton/">A Detailed Guide to Java Singleton Pattern</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/19</span>
            <a class="archive-post-title" href="/en/2015/04/19/Android-Performance-Patterns-2/">Android Performance Patterns: Understanding Overdraw</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/19</span>
            <a class="archive-post-title" href="/en/2015/04/19/Android-Performance-Patterns-1/">Android Performance Patterns: Render Performance</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/19</span>
            <a class="archive-post-title" href="/en/2015/04/19/Android-Performance-Patterns-3/">Android Performance Patterns: Understanding VSYNC</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/19</span>
            <a class="archive-post-title" href="/en/2015/04/19/Android-Performance-Patterns-4/">Android Performance Patterns: Profile GPU Rendering</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/19</span>
            <a class="archive-post-title" href="/en/2015/04/19/Android-Performance-Patterns/">Overview of Android Performance Patterns</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/11</span>
            <a class="archive-post-title" href="/en/2015/04/11/AndroidMemory-Usage-Of-MAT-Pro/">Android Memory Optimization (2) - Advanced MAT Usage</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/11</span>
            <a class="archive-post-title" href="/en/2015/04/11/AndroidMemory-Open-Bitmap-Object-In-MAT/">Android Memory Optimization (3) - Viewing Original Bitmaps in MAT</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/11</span>
            <a class="archive-post-title" href="/en/2015/04/11/AndroidMemory-Usage-Of-MAT/">Android Memory Optimization (1) - Getting Started with MAT</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/31</span>
            <a class="archive-post-title" href="/en/2015/03/31/android-performance-case-study-follow-up/">Android Performance Case Study Follow-up</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/15</span>
            <a class="archive-post-title" href="/en/2015/03/15/android-tips-round-up-3/">Android Tips Round-Up, Part 3</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/15</span>
            <a class="archive-post-title" href="/en/2015/03/15/android-tips-round-up-4/">Android Tips Round-Up, Part 4</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/15</span>
            <a class="archive-post-title" href="/en/2015/03/15/android-tips-round-up-5/">Android Tips Round-Up, Part 5</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">02/04</span>
            <a class="archive-post-title" href="/en/2015/02/04/build-rom-for-nexus5/">Compiling Android Lollipop Firmware for Nexus 5</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/30</span>
            <a class="archive-post-title" href="/en/2015/01/30/android-performance-tools-systrace-1/">Android Performance Optimization - Introduction to Systrace (Part 1)</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/16</span>
            <a class="archive-post-title" href="/en/2015/01/16/view-android-source-code-with-androidstudio/">Viewing Android Lollipop Source Code with Android Studio</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/13</span>
            <a class="archive-post-title" href="/en/2015/01/13/android-performance-optimization-overdraw-2/">Android Performance Optimization: Overdraw - Practical Application</a>
        </li>
                </ul>
            <div class="archive-year"> 2014 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">10/20</span>
            <a class="archive-post-title" href="/en/2014/10/20/android-performance-optimization-overdraw-1/">Android Performance Optimization: Overdraw - Theory</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">06/03</span>
            <a class="archive-post-title" href="/en/2014/06/03/android-edittext-do-not-auto-get-focus/">Android Tips: How to Prevent EditText from Automatically Getting Focus</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/31</span>
            <a class="archive-post-title" href="/en/2014/05/31/android-tips-round-up-2/">Android Tips Round-Up, Part 2</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/28</span>
            <a class="archive-post-title" href="/en/2014/05/28/android-tips-round-up-1/">Android Tips Round-Up, Part 1</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/02</span>
            <a class="archive-post-title" href="/en/2014/05/02/android_log_to_file/">Android Tools - Log2File</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/25</span>
            <a class="archive-post-title" href="/en/2014/03/25/ubuntu-adb-can-not-find-devices/">Ubuntu: Adb Command Cannot Find Device</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/17</span>
            <a class="archive-post-title" href="/en/2014/03/17/android-build-your-own-android-notification-service-app/">Android Service: Building Your Own Notification Center (1) - Introduction to Accessibility Service</a>
        </li>
            </ul>
    </div>
</div>

        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
            <span class="sidebar-tag-name" data-tags="Yearly Recommendations">
                <span class="iconfont-archer">&#xe606;</span>
                Yearly Recommendations
            </span>
            <span class="sidebar-tag-name" data-tags="Startup">
                <span class="iconfont-archer">&#xe606;</span>
                Startup
            </span>
            <span class="sidebar-tag-name" data-tags="Memory">
                <span class="iconfont-archer">&#xe606;</span>
                Memory
            </span>
            <span class="sidebar-tag-name" data-tags="Android">
                <span class="iconfont-archer">&#xe606;</span>
                Android
            </span>
            <span class="sidebar-tag-name" data-tags="Jank">
                <span class="iconfont-archer">&#xe606;</span>
                Jank
            </span>
            <span class="sidebar-tag-name" data-tags="Perfetto">
                <span class="iconfont-archer">&#xe606;</span>
                Perfetto
            </span>
            <span class="sidebar-tag-name" data-tags="Systrace">
                <span class="iconfont-archer">&#xe606;</span>
                Systrace
            </span>
            <span class="sidebar-tag-name" data-tags="Year in Review">
                <span class="iconfont-archer">&#xe606;</span>
                Year in Review
            </span>
            <span class="sidebar-tag-name" data-tags="Knowledge Planet">
                <span class="iconfont-archer">&#xe606;</span>
                Knowledge Planet
            </span>
            <span class="sidebar-tag-name" data-tags="Essays">
                <span class="iconfont-archer">&#xe606;</span>
                Essays
            </span>
            <span class="sidebar-tag-name" data-tags="ANR">
                <span class="iconfont-archer">&#xe606;</span>
                ANR
            </span>
            <span class="sidebar-tag-name" data-tags="Performance">
                <span class="iconfont-archer">&#xe606;</span>
                Performance
            </span>
            <span class="sidebar-tag-name" data-tags="Tools">
                <span class="iconfont-archer">&#xe606;</span>
                Tools
            </span>
            <span class="sidebar-tag-name" data-tags="DelayLoad">
                <span class="iconfont-archer">&#xe606;</span>
                DelayLoad
            </span>
            <span class="sidebar-tag-name" data-tags="Java">
                <span class="iconfont-archer">&#xe606;</span>
                Java
            </span>
            <span class="sidebar-tag-name" data-tags="RenderThread">
                <span class="iconfont-archer">&#xe606;</span>
                RenderThread
            </span>
            <span class="sidebar-tag-name" data-tags="Linux">
                <span class="iconfont-archer">&#xe606;</span>
                Linux
            </span>
            <span class="sidebar-tag-name" data-tags="Framework">
                <span class="iconfont-archer">&#xe606;</span>
                Framework
            </span>
            <span class="sidebar-tag-name" data-tags="Binder">
                <span class="iconfont-archer">&#xe606;</span>
                Binder
            </span>
            <span class="sidebar-tag-name" data-tags="Locking">
                <span class="iconfont-archer">&#xe606;</span>
                Locking
            </span>
            <span class="sidebar-tag-name" data-tags="Scheduling">
                <span class="iconfont-archer">&#xe606;</span>
                Scheduling
            </span>
            <span class="sidebar-tag-name" data-tags="Performance Optimization">
                <span class="iconfont-archer">&#xe606;</span>
                Performance Optimization
            </span>
            <span class="sidebar-tag-name" data-tags="Thread Optimization">
                <span class="iconfont-archer">&#xe606;</span>
                Thread Optimization
            </span>
            <span class="sidebar-tag-name" data-tags="Jank Optimization">
                <span class="iconfont-archer">&#xe606;</span>
                Jank Optimization
            </span>
            <span class="sidebar-tag-name" data-tags="Battery Optimization">
                <span class="iconfont-archer">&#xe606;</span>
                Battery Optimization
            </span>
            <span class="sidebar-tag-name" data-tags="ANR Analysis">
                <span class="iconfont-archer">&#xe606;</span>
                ANR Analysis
            </span>
            <span class="sidebar-tag-name" data-tags="Page Response">
                <span class="iconfont-archer">&#xe606;</span>
                Page Response
            </span>
            <span class="sidebar-tag-name" data-tags="MAT">
                <span class="iconfont-archer">&#xe606;</span>
                MAT
            </span>
            <span class="sidebar-tag-name" data-tags="Compose">
                <span class="iconfont-archer">&#xe606;</span>
                Compose
            </span>
            <span class="sidebar-tag-name" data-tags="Kotlin">
                <span class="iconfont-archer">&#xe606;</span>
                Kotlin
            </span>
            <span class="sidebar-tag-name" data-tags="HashMap">
                <span class="iconfont-archer">&#xe606;</span>
                HashMap
            </span>
            <span class="sidebar-tag-name" data-tags="Programmer">
                <span class="iconfont-archer">&#xe606;</span>
                Programmer
            </span>
            <span class="sidebar-tag-name" data-tags="Singleton">
                <span class="iconfont-archer">&#xe606;</span>
                Singleton
            </span>
            <span class="sidebar-tag-name" data-tags="Nexus">
                <span class="iconfont-archer">&#xe606;</span>
                Nexus
            </span>
            <span class="sidebar-tag-name" data-tags="Annual Recommendations">
                <span class="iconfont-archer">&#xe606;</span>
                Annual Recommendations
            </span>
            <span class="sidebar-tag-name" data-tags="Design Specs">
                <span class="iconfont-archer">&#xe606;</span>
                Design Specs
            </span>
            <span class="sidebar-tag-name" data-tags="Sharp Tools">
                <span class="iconfont-archer">&#xe606;</span>
                Sharp Tools
            </span>
            <span class="sidebar-tag-name" data-tags="Productivity">
                <span class="iconfont-archer">&#xe606;</span>
                Productivity
            </span>
            <span class="sidebar-tag-name" data-tags="Process">
                <span class="iconfont-archer">&#xe606;</span>
                Process
            </span>
            <span class="sidebar-tag-name" data-tags="Stutter">
                <span class="iconfont-archer">&#xe606;</span>
                Stutter
            </span>
            <span class="sidebar-tag-name" data-tags="Overdraw">
                <span class="iconfont-archer">&#xe606;</span>
                Overdraw
            </span>
            <span class="sidebar-tag-name" data-tags="Reading Notes">
                <span class="iconfont-archer">&#xe606;</span>
                Reading Notes
            </span>
            <span class="sidebar-tag-name" data-tags="The Programmer's Apprenticeship">
                <span class="iconfont-archer">&#xe606;</span>
                The Programmer's Apprenticeship
            </span>
            <span class="sidebar-tag-name" data-tags="Design Principles">
                <span class="iconfont-archer">&#xe606;</span>
                Design Principles
            </span>
            <span class="sidebar-tag-name" data-tags="User Experience">
                <span class="iconfont-archer">&#xe606;</span>
                User Experience
            </span>
            <span class="sidebar-tag-name" data-tags="Testing">
                <span class="iconfont-archer">&#xe606;</span>
                Testing
            </span>
            <span class="sidebar-tag-name" data-tags="Internet">
                <span class="iconfont-archer">&#xe606;</span>
                Internet
            </span>
            <span class="sidebar-tag-name" data-tags="Game Programming">
                <span class="iconfont-archer">&#xe606;</span>
                Game Programming
            </span>
            <span class="sidebar-tag-name" data-tags="Reading">
                <span class="iconfont-archer">&#xe606;</span>
                Reading
            </span>
            <span class="sidebar-tag-name" data-tags="Liqi">
                <span class="iconfont-archer">&#xe606;</span>
                Liqi
            </span>
            <span class="sidebar-tag-name" data-tags="Community">
                <span class="iconfont-archer">&#xe606;</span>
                Community
            </span>
            <span class="sidebar-tag-name" data-tags="Smooth">
                <span class="iconfont-archer">&#xe606;</span>
                Smooth
            </span>
            <span class="sidebar-tag-name" data-tags="Experience Optimization">
                <span class="iconfont-archer">&#xe606;</span>
                Experience Optimization
            </span>
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
        缺失模块，请参考主题文档进行安装配置：https://github.com/fi3ework/hexo-theme-archer#%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98
    </div> 
    <div class="sidebar-tags-list"></div>
</div>

        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
        <span class="sidebar-category-name" data-categories="Casual Notes">
            <span class="iconfont-archer">&#xe60a;</span>
            Casual Notes
        </span>
        <span class="sidebar-category-name" data-categories="Reading Notes">
            <span class="iconfont-archer">&#xe60a;</span>
            Reading Notes
        </span>
        <span class="sidebar-category-name" data-categories="Essays">
            <span class="iconfont-archer">&#xe60a;</span>
            Essays
        </span>
        <span class="sidebar-category-name" data-categories="Android">
            <span class="iconfont-archer">&#xe60a;</span>
            Android
        </span>
        <span class="sidebar-category-name" data-categories="Java">
            <span class="iconfont-archer">&#xe60a;</span>
            Java
        </span>
        <span class="sidebar-category-name" data-categories="Android Performance Optimization">
            <span class="iconfont-archer">&#xe60a;</span>
            Android Performance Optimization
        </span>
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>

    </div>
</div>

        <!-- site-meta -->
        <script>
    var siteMetaRoot = "/en/"
    if (siteMetaRoot === "undefined") {
        siteMetaRoot = '/'
    }
    var siteMeta = {
        url: "https://androidperformance.com/en",
        root: siteMetaRoot,
        author: "Gracker"
    }
</script>

        <!-- import experimental options here -->
        <!-- Custom Font -->

        <!-- jquery (must load before main.js) -->
        <script defer src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <!-- main func (depends on jQuery) -->
        <script src="/en/scripts/main.js" defer></script>
        <!-- fancybox -->
        <script>
            (function(){
              var urls = [
                'https://cdn.bootcdn.net/ajax/libs/fancyapps-ui/5.0.36/fancybox/fancybox.umd.js',
                'https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.36/dist/fancybox/fancybox.umd.js'
              ];
              function loadNext(){
                var u = urls.shift();
                if(!u) return;
                var s = document.createElement('script');
                s.src = u; s.defer = true;
                s.onload = function(){ if (window.Fancybox) { window.Fancybox.bind('[data-fancybox]'); } };
                s.onerror = loadNext;
                document.head.appendChild(s);
              }
              loadNext();
            })();
        </script>
        <!-- algolia -->
        <!-- busuanzi (delay load + silent fail) -->
        <!-- async load share.js on first click -->
            <script>
                (function(){
                  var loaded = false
                  function loadShare(){
                    if (loaded) return
                    loaded = true
                    var s = document.createElement('script')
                    s.src = '/en/scripts/share.js'
                    s.async = true
                    document.head.appendChild(s)
                  }
                  document.addEventListener('click', function(e){
                    var t = e.target
                    if (!t) return
                    if (t.closest && t.closest('.share-wrapper')) { loadShare() }
                    else if (t.classList && t.classList.contains('share-wrapper')) { loadShare() }
                  }, true)
                })();
            </script>
        <!-- mermaid -->
    </body>
</html>
