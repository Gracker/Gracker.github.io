{"version":3,"sources":["webpack://hexo-theme-archer/./node_modules/anchor-js/anchor.js","webpack://hexo-theme-archer/./node_modules/eventemitter3/index.js","webpack://hexo-theme-archer/webpack/bootstrap","webpack://hexo-theme-archer/webpack/runtime/compat get default export","webpack://hexo-theme-archer/webpack/runtime/define property getters","webpack://hexo-theme-archer/webpack/runtime/hasOwnProperty shorthand","webpack://hexo-theme-archer/./src/js/init.js","webpack://hexo-theme-archer/./src/js/util.js","webpack://hexo-theme-archer/./node_modules/perfect-scrollbar/dist/perfect-scrollbar.esm.js","webpack://hexo-theme-archer/./src/js/sidebar.js","webpack://hexo-theme-archer/./src/js/initSidebar.js","webpack://hexo-theme-archer/./src/js/mobile.js","webpack://hexo-theme-archer/./src/js/tag.js","webpack://hexo-theme-archer/./src/js/toc.js","webpack://hexo-theme-archer/./src/js/fancybox.js","webpack://hexo-theme-archer/./src/js/main.js","webpack://hexo-theme-archer/./src/js/scroll.js"],"names":["root","factory","options","_applyRemainingDefaultOptions","opts","icon","Object","prototype","hasOwnProperty","call","visible","placement","ariaLabel","class","base","truncate","Math","floor","titleText","_getElements","input","elements","String","slice","document","querySelectorAll","Array","isArray","NodeList","TypeError","this","isTouchDevice","Boolean","window","TouchEvent","DocumentTouch","add","selector","elsWithIds","idList","elementID","i","index","count","tidyText","newTidyText","anchor","visibleOptionToUse","hrefBase","indexesToDrop","length","head","querySelector","firstStyleEl","style","createElement","className","appendChild","createTextNode","undefined","insertBefore","sheet","insertRule","cssRules","_addBaselineStyles","map","el","id","hasAnchorJSLink","push","hasAttribute","getAttribute","urlify","textContent","indexOf","setAttribute","title","location","pathname","search","href","opacity","font","lineHeight","position","marginLeft","paddingRight","firstChild","paddingLeft","splice","concat","remove","domAnchor","removeChild","removeAll","text","textareaElement","innerHTML","value","trim","replace","substring","toLowerCase","hasLeftAnchor","hasRightAnchor","lastChild","has","prefix","Events","EE","fn","context","once","addListener","emitter","event","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","apply","j","on","removeAllListeners","off","prefixed","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","defineProperty","enumerable","get","obj","prop","preventDefault","scrollTo","top","behavior","e","x","offsetLeft","y","offsetTop","offsetParent","date","fmt","getMonth","getDate","getHours","getMinutes","getSeconds","S","getMilliseconds","k","test","RegExp","$1","getFullYear","substr","ticking","updateFunc","requestAnimationFrame","func","wait","timer","immediate","setTimeout","element","getComputedStyle","set","val","div","elMatches","Element","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","query","Error","parentNode","queryChildren","filter","children","child","cls","scrollingClassTimeout","addScrollingClass","classList","contains","clearTimeout","removeScrollingClass","isAlive","settings","scrollingThreshold","EventElement","prototypeAccessors","isEmpty","configurable","bind","eventName","handler","addEventListener","unbind","target","this$1","removeEventListener","unbindAll","keys","every","defineProperties","EventManager","eventElements","createEvent","CustomEvent","initCustomEvent","processScrollDiff","axis","diff","useScrollingClass","forceFireReachEvent","fields","ref","contentHeight","containerHeight","scrollTop","up","down","reach","dispatchEvent","setScrollingClassInstantly","processScrollDiff$1","toInt","parseInt","eventElement","forEach","onceHandler","env","isWebKit","documentElement","supportsTouch","navigator","maxTouchPoints","supportsIePointer","msMaxTouchPoints","isChrome","userAgent","updateGeometry","roundedScrollTop","rect","getBoundingClientRect","containerWidth","ceil","width","height","contentWidth","scrollWidth","scrollHeight","scrollbarXRail","scrollbarYRail","suppressScrollX","scrollXMarginOffset","scrollbarXActive","railXWidth","railXMarginWidth","railXRatio","scrollbarXWidth","getThumbSize","scrollbarXLeft","negativeScrollAdjustment","scrollLeft","suppressScrollY","scrollYMarginOffset","scrollbarYActive","railYHeight","railYMarginHeight","railYRatio","scrollbarYHeight","scrollbarYTop","xRailOffset","isRtl","left","isScrollbarXUsingBottom","bottom","scrollbarXBottom","scrollbarXTop","yRailOffset","isScrollbarYUsingRight","right","scrollbarYRight","scrollbarYOuterWidth","scrollbarYLeft","scrollbarX","railBorderXWidth","scrollbarY","railBorderYWidth","updateCss","thumbSize","minScrollbarLength","max","maxScrollbarLength","min","bindMouseScrollHandler","pageY","startingScrollTop","startingMousePageY","scrollBy","mouseMoveHandler","touches","stopPropagation","mouseUpHandler","ownerDocument","bindMoves","touchMode","direction","pageYOffset","pageX","pageXOffset","keyboard","isDefaultPrevented","defaultPrevented","activeElement","tagName","contentDocument","shadowRoot","deltaX","deltaY","which","metaKey","altKey","shiftKey","wheelPropagation","shouldPreventDefault","wheel","mousewheelHandler","wheelDeltaX","wheelDeltaY","deltaMode","wheelDelta","getDeltaFromEvent","cursor","overflowY","match","maxScrollTop","clientHeight","overflowX","maxScrollLeft","clientWidth","shouldBeConsumedByChild","shouldPrevent","useBothWheelAxes","wheelSpeed","isTop","isBottom","offsetHeight","isLeft","isRight","offsetWidth","abs","ctrlKey","onwheel","onmousewheel","touch","startOffset","startTime","speed","easingLoop","touchStart","touchMove","touchEnd","PointerEvent","MSPointerEvent","applyTouchMove","differenceX","differenceY","getTouch","targetTouches","shouldHandle","pointerType","buttons","MSPOINTER_TYPE_MOUSE","Date","getTime","clearInterval","currentOffset","currentTime","timeGap","magnitudeX","magnitudeY","scrollY","swipeEasing","setInterval","isInitialized","PerfectScrollbar","userSettings","nodeName","result","originalScrollLeft","focus","blur","isNegativeScroll","railXStyle","isNaN","borderLeftWidth","borderRightWidth","display","marginRight","railYStyle","styles","borderTopWidth","borderBottomWidth","marginTop","marginBottom","handlerName","lastScrollTop","lastScrollLeft","onScroll","update","destroy","removePsClasses","split","join","Sidebar","defaultOptions","activeIndex","_initElements","_initTabs","_bindTabsClick","_bindButtonClick","_bindWrapperClick","_bindWrapperTransitionEnd","perfectScrollbar","$sidebar","$","sidebar","$tabs","tabs","$panels","panels","$menuButton","menuButton","$nav","nav","$content","content","each","tab","data","addClass","removeClass","toIndex","_switchTo","hasClass","_switchTab","_switchPanel","click","$target","switchTo","activateSidebar","_inactivateSidebar","MetaInfo","metaName","labelsContainer","postContainer","currLabelName","isInited","postsArr","indexMap","Map","_bindLabelClick","_changeList","_changeFocus","changeLabel","label","getElementsByClassName","item","indexArr","corrArr","_createPostsDom","error","console","log","frag","createDocumentFragment","_createPostDom","postInfo","$tagItem","archerUtil","parse","$aItem","siteMeta","path","append","toString","postIndex","currPostLabels","tagOrCatetory","size","tabCount","Emitter","metas","_initMap","dataMaps","_subscribe","_fetchInfo","_bindOtherClick","para","newMeta","postsContainer","tryInit","_tryInitMetas","contentURL","Number","xhr","XMLHttpRequest","responseType","open","$loadFailed","that","onload","contentJSON","posts","status","JSON","responseText","$currPostsContainer","send","body","prevHeight","isPassingThrough","currHeight","linkHeight","initFold","toc","li","showAllChildren","node","showItem","tocItems","heights","link","currHeightIndex","anchorLinkIndex","calcAnchorLink","calcScrollIntoScreenIndex","currItem","resetFold","tocItem","currNode","spreadParentNodeOfTargetItem","fancyBoxInit","img","outer","outerHTML","imgSrc","exec","imgAlt","logStyle","info","$introImg","introPlaceholder","bgRegResult","css","bgURL","Image","src","anchors","AnchorJS","init","$banner","$postBanner","find","$bgEle","$homeLink","$backTop","$sidebarMenu","$tocWrapper","$tocCatalog","$progressBar","bgTitleHeight","offset","outerHeight","toggleClass","previousHeight","continueScroll","crossingState","isHigherThanIntro","isCrossingIntro","currTop","articleHeight","articleTop","isPostPage","tickingScroll","updateScroll","upDownState","beginY","readPercent","windowHeight","restPercent","transform","updateProgress","throttleOnScroll","bindedUpdate","ele","scroll","InitSidebarLink","addTab","matchMedia","mql","mediaChangeHandler","innerWidth","initMobile"],"mappings":"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","file":"main.js","sourcesContent":["/* eslint-env amd */\n/* globals module:false */\n\n// https://github.com/umdjs/umd/blob/master/templates/returnExports.js\n(function (root, factory) {\n  'use strict';\n\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    // Browser globals (root is window)\n    root.AnchorJS = factory();\n    root.anchors = new root.AnchorJS();\n  }\n}(this, function () {\n  'use strict';\n\n  function AnchorJS(options) {\n    this.options = options || {};\n    this.elements = [];\n\n    /**\n     * Assigns options to the internal options object, and provides defaults.\n     * @param {Object} opts - Options object\n     */\n    function _applyRemainingDefaultOptions(opts) {\n      opts.icon = Object.prototype.hasOwnProperty.call(opts, 'icon') ? opts.icon : '\\uE9CB'; // Accepts characters (and also URLs?), like  '#', '¶', '❡', or '§'.\n      opts.visible = Object.prototype.hasOwnProperty.call(opts, 'visible') ? opts.visible : 'hover'; // Also accepts 'always' & 'touch'\n      opts.placement = Object.prototype.hasOwnProperty.call(opts, 'placement') ? opts.placement : 'right'; // Also accepts 'left'\n      opts.ariaLabel = Object.prototype.hasOwnProperty.call(opts, 'ariaLabel') ? opts.ariaLabel : 'Anchor'; // Accepts any text.\n      opts.class = Object.prototype.hasOwnProperty.call(opts, 'class') ? opts.class : ''; // Accepts any class name.\n      opts.base = Object.prototype.hasOwnProperty.call(opts, 'base') ? opts.base : ''; // Accepts any base URI.\n      // Using Math.floor here will ensure the value is Number-cast and an integer.\n      opts.truncate = Object.prototype.hasOwnProperty.call(opts, 'truncate') ? Math.floor(opts.truncate) : 64; // Accepts any value that can be typecast to a number.\n      opts.titleText = Object.prototype.hasOwnProperty.call(opts, 'titleText') ? opts.titleText : ''; // Accepts any text.\n    }\n\n    _applyRemainingDefaultOptions(this.options);\n\n    /**\n     * Checks to see if this device supports touch. Uses criteria pulled from Modernizr:\n     * https://github.com/Modernizr/Modernizr/blob/da22eb27631fc4957f67607fe6042e85c0a84656/feature-detects/touchevents.js#L40\n     * @return {Boolean} - true if the current device supports touch.\n     */\n    this.isTouchDevice = function() {\n      return Boolean('ontouchstart' in window || window.TouchEvent || window.DocumentTouch && document instanceof DocumentTouch);\n    };\n\n    /**\n     * Add anchor links to page elements.\n     * @param  {String|Array|Nodelist} selector - A CSS selector for targeting the elements you wish to add anchor links\n     *                                            to. Also accepts an array or nodeList containing the relavant elements.\n     * @return {this}                           - The AnchorJS object\n     */\n    this.add = function(selector) {\n      var elements,\n          elsWithIds,\n          idList,\n          elementID,\n          i,\n          index,\n          count,\n          tidyText,\n          newTidyText,\n          anchor,\n          visibleOptionToUse,\n          hrefBase,\n          indexesToDrop = [];\n\n      // We reapply options here because somebody may have overwritten the default options object when setting options.\n      // For example, this overwrites all options but visible:\n      //\n      // anchors.options = { visible: 'always'; }\n      _applyRemainingDefaultOptions(this.options);\n\n      visibleOptionToUse = this.options.visible;\n      if (visibleOptionToUse === 'touch') {\n        visibleOptionToUse = this.isTouchDevice() ? 'always' : 'hover';\n      }\n\n      // Provide a sensible default selector, if none is given.\n      if (!selector) {\n        selector = 'h2, h3, h4, h5, h6';\n      }\n\n      elements = _getElements(selector);\n\n      if (elements.length === 0) {\n        return this;\n      }\n\n      _addBaselineStyles();\n\n      // We produce a list of existing IDs so we don't generate a duplicate.\n      elsWithIds = document.querySelectorAll('[id]');\n      idList = [].map.call(elsWithIds, function(el) {\n        return el.id;\n      });\n\n      for (i = 0; i < elements.length; i++) {\n        if (this.hasAnchorJSLink(elements[i])) {\n          indexesToDrop.push(i);\n          continue;\n        }\n\n        if (elements[i].hasAttribute('id')) {\n          elementID = elements[i].getAttribute('id');\n        } else if (elements[i].hasAttribute('data-anchor-id')) {\n          elementID = elements[i].getAttribute('data-anchor-id');\n        } else {\n          tidyText = this.urlify(elements[i].textContent);\n\n          // Compare our generated ID to existing IDs (and increment it if needed)\n          // before we add it to the page.\n          newTidyText = tidyText;\n          count = 0;\n          do {\n            if (index !== undefined) {\n              newTidyText = tidyText + '-' + count;\n            }\n\n            index = idList.indexOf(newTidyText);\n            count += 1;\n          } while (index !== -1);\n\n          index = undefined;\n          idList.push(newTidyText);\n\n          elements[i].setAttribute('id', newTidyText);\n          elementID = newTidyText;\n        }\n\n        // The following code efficiently builds this DOM structure:\n        // `<a class=\"anchorjs-link ${this.options.class}\"\n        //     aria-label=\"${this.options.ariaLabel}\"\n        //     data-anchorjs-icon=\"${this.options.icon}\"\n        //     title=\"${this.options.titleText}\"\n        //     href=\"this.options.base#${elementID}\">\n        // </a>;`\n        anchor = document.createElement('a');\n        anchor.className = 'anchorjs-link ' + this.options.class;\n        anchor.setAttribute('aria-label', this.options.ariaLabel);\n        anchor.setAttribute('data-anchorjs-icon', this.options.icon);\n        if (this.options.titleText) {\n          anchor.title = this.options.titleText;\n        }\n\n        // Adjust the href if there's a <base> tag. See https://github.com/bryanbraun/anchorjs/issues/98\n        hrefBase = document.querySelector('base') ? window.location.pathname + window.location.search : '';\n        hrefBase = this.options.base || hrefBase;\n        anchor.href = hrefBase + '#' + elementID;\n\n        if (visibleOptionToUse === 'always') {\n          anchor.style.opacity = '1';\n        }\n\n        if (this.options.icon === '\\uE9CB') {\n          anchor.style.font = '1em/1 anchorjs-icons';\n\n          // We set lineHeight = 1 here because the `anchorjs-icons` font family could otherwise affect the\n          // height of the heading. This isn't the case for icons with `placement: left`, so we restore\n          // line-height: inherit in that case, ensuring they remain positioned correctly. For more info,\n          // see https://github.com/bryanbraun/anchorjs/issues/39.\n          if (this.options.placement === 'left') {\n            anchor.style.lineHeight = 'inherit';\n          }\n        }\n\n        if (this.options.placement === 'left') {\n          anchor.style.position = 'absolute';\n          anchor.style.marginLeft = '-1em';\n          anchor.style.paddingRight = '.5em';\n          elements[i].insertBefore(anchor, elements[i].firstChild);\n        } else { // if the option provided is `right` (or anything else).\n          anchor.style.paddingLeft = '.375em';\n          elements[i].appendChild(anchor);\n        }\n      }\n\n      for (i = 0; i < indexesToDrop.length; i++) {\n        elements.splice(indexesToDrop[i] - i, 1);\n      }\n\n      this.elements = this.elements.concat(elements);\n\n      return this;\n    };\n\n    /**\n     * Removes all anchorjs-links from elements targeted by the selector.\n     * @param  {String|Array|Nodelist} selector - A CSS selector string targeting elements with anchor links,\n     *                                            OR a nodeList / array containing the DOM elements.\n     * @return {this}                           - The AnchorJS object\n     */\n    this.remove = function(selector) {\n      var index,\n          domAnchor,\n          elements = _getElements(selector);\n\n      for (var i = 0; i < elements.length; i++) {\n        domAnchor = elements[i].querySelector('.anchorjs-link');\n        if (domAnchor) {\n          // Drop the element from our main list, if it's in there.\n          index = this.elements.indexOf(elements[i]);\n          if (index !== -1) {\n            this.elements.splice(index, 1);\n          }\n\n          // Remove the anchor from the DOM.\n          elements[i].removeChild(domAnchor);\n        }\n      }\n\n      return this;\n    };\n\n    /**\n     * Removes all anchorjs links. Mostly used for tests.\n     */\n    this.removeAll = function() {\n      this.remove(this.elements);\n    };\n\n    /**\n     * Urlify - Refine text so it makes a good ID.\n     *\n     * To do this, we remove apostrophes, replace non-safe characters with hyphens,\n     * remove extra hyphens, truncate, trim hyphens, and make lowercase.\n     *\n     * @param  {String} text - Any text. Usually pulled from the webpage element we are linking to.\n     * @return {String}      - hyphen-delimited text for use in IDs and URLs.\n     */\n    this.urlify = function(text) {\n      // Decode HTML characters such as '&nbsp;' first.\n      var textareaElement = document.createElement('textarea');\n      textareaElement.innerHTML = text;\n      text = textareaElement.value;\n\n      // Regex for finding the non-safe URL characters (many need escaping):\n      //   & +$,:;=?@\"#{}|^~[`%!'<>]./()*\\ (newlines, tabs, backspace, vertical tabs, and non-breaking space)\n      var nonsafeChars = /[& +$,:;=?@\"#{}|^~[`%!'<>\\]./()*\\\\\\n\\t\\b\\v\\u00A0]/g;\n\n      // The reason we include this _applyRemainingDefaultOptions is so urlify can be called independently,\n      // even after setting options. This can be useful for tests or other applications.\n      if (!this.options.truncate) {\n        _applyRemainingDefaultOptions(this.options);\n      }\n\n      // Note: we trim hyphens after truncating because truncating can cause dangling hyphens.\n      // Example string:                      // \" ⚡⚡ Don't forget: URL fragments should be i18n-friendly, hyphenated, short, and clean.\"\n      return text.trim()                      // \"⚡⚡ Don't forget: URL fragments should be i18n-friendly, hyphenated, short, and clean.\"\n        .replace(/'/gi, '')                   // \"⚡⚡ Dont forget: URL fragments should be i18n-friendly, hyphenated, short, and clean.\"\n        .replace(nonsafeChars, '-')           // \"⚡⚡-Dont-forget--URL-fragments-should-be-i18n-friendly--hyphenated--short--and-clean-\"\n        .replace(/-{2,}/g, '-')               // \"⚡⚡-Dont-forget-URL-fragments-should-be-i18n-friendly-hyphenated-short-and-clean-\"\n        .substring(0, this.options.truncate)  // \"⚡⚡-Dont-forget-URL-fragments-should-be-i18n-friendly-hyphenated-\"\n        .replace(/^-+|-+$/gm, '')             // \"⚡⚡-Dont-forget-URL-fragments-should-be-i18n-friendly-hyphenated\"\n        .toLowerCase();                       // \"⚡⚡-dont-forget-url-fragments-should-be-i18n-friendly-hyphenated\"\n    };\n\n    /**\n     * Determines if this element already has an AnchorJS link on it.\n     * Uses this technique: https://stackoverflow.com/a/5898748/1154642\n     * @param    {HTMLElement}  el - a DOM node\n     * @return   {Boolean}     true/false\n     */\n    this.hasAnchorJSLink = function(el) {\n      var hasLeftAnchor = el.firstChild && (' ' + el.firstChild.className + ' ').indexOf(' anchorjs-link ') > -1,\n          hasRightAnchor = el.lastChild && (' ' + el.lastChild.className + ' ').indexOf(' anchorjs-link ') > -1;\n\n      return hasLeftAnchor || hasRightAnchor || false;\n    };\n\n    /**\n     * Turns a selector, nodeList, or array of elements into an array of elements (so we can use array methods).\n     * It also throws errors on any other inputs. Used to handle inputs to .add and .remove.\n     * @param  {String|Array|Nodelist} input - A CSS selector string targeting elements with anchor links,\n     *                                         OR a nodeList / array containing the DOM elements.\n     * @return {Array} - An array containing the elements we want.\n     */\n    function _getElements(input) {\n      var elements;\n      if (typeof input === 'string' || input instanceof String) {\n        // See https://davidwalsh.name/nodelist-array for the technique transforming nodeList -> Array.\n        elements = [].slice.call(document.querySelectorAll(input));\n      // I checked the 'input instanceof NodeList' test in IE9 and modern browsers and it worked for me.\n      } else if (Array.isArray(input) || input instanceof NodeList) {\n        elements = [].slice.call(input);\n      } else {\n        throw new TypeError('The selector provided to AnchorJS was invalid.');\n      }\n\n      return elements;\n    }\n\n    /**\n     * _addBaselineStyles\n     * Adds baseline styles to the page, used by all AnchorJS links irregardless of configuration.\n     */\n    function _addBaselineStyles() {\n      // We don't want to add global baseline styles if they've been added before.\n      if (document.head.querySelector('style.anchorjs') !== null) {\n        return;\n      }\n\n      var style = document.createElement('style'),\n          linkRule =\n          '.anchorjs-link{'                        +\n            'opacity:0;'                           +\n            'text-decoration:none;'                +\n            '-webkit-font-smoothing:antialiased;'  +\n            '-moz-osx-font-smoothing:grayscale'    +\n          '}',\n          hoverRule =\n          ':hover>.anchorjs-link,'                 +\n          '.anchorjs-link:focus{'                  +\n            'opacity:1'                            +\n          '}',\n          anchorjsLinkFontFace =\n          '@font-face{'                            +\n            'font-family:anchorjs-icons;'          + // Icon from icomoon; 10px wide & 10px tall; 2 empty below & 4 above\n            'src:url(data:n/a;base64,AAEAAAALAIAAAwAwT1MvMg8yG2cAAAE4AAAAYGNtYXDp3gC3AAABpAAAAExnYXNwAAAAEAAAA9wAAAAIZ2x5ZlQCcfwAAAH4AAABCGhlYWQHFvHyAAAAvAAAADZoaGVhBnACFwAAAPQAAAAkaG10eASAADEAAAGYAAAADGxvY2EACACEAAAB8AAAAAhtYXhwAAYAVwAAARgAAAAgbmFtZQGOH9cAAAMAAAAAunBvc3QAAwAAAAADvAAAACAAAQAAAAEAAHzE2p9fDzz1AAkEAAAAAADRecUWAAAAANQA6R8AAAAAAoACwAAAAAgAAgAAAAAAAAABAAADwP/AAAACgAAA/9MCrQABAAAAAAAAAAAAAAAAAAAAAwABAAAAAwBVAAIAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAMCQAGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAg//0DwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAAIAAAACgAAxAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADAAAAAIAAgAAgAAACDpy//9//8AAAAg6cv//f///+EWNwADAAEAAAAAAAAAAAAAAAAACACEAAEAAAAAAAAAAAAAAAAxAAACAAQARAKAAsAAKwBUAAABIiYnJjQ3NzY2MzIWFxYUBwcGIicmNDc3NjQnJiYjIgYHBwYUFxYUBwYGIwciJicmNDc3NjIXFhQHBwYUFxYWMzI2Nzc2NCcmNDc2MhcWFAcHBgYjARQGDAUtLXoWOR8fORYtLTgKGwoKCjgaGg0gEhIgDXoaGgkJBQwHdR85Fi0tOAobCgoKOBoaDSASEiANehoaCQkKGwotLXoWOR8BMwUFLYEuehYXFxYugC44CQkKGwo4GkoaDQ0NDXoaShoKGwoFBe8XFi6ALjgJCQobCjgaShoNDQ0NehpKGgobCgoKLYEuehYXAAAADACWAAEAAAAAAAEACAAAAAEAAAAAAAIAAwAIAAEAAAAAAAMACAAAAAEAAAAAAAQACAAAAAEAAAAAAAUAAQALAAEAAAAAAAYACAAAAAMAAQQJAAEAEAAMAAMAAQQJAAIABgAcAAMAAQQJAAMAEAAMAAMAAQQJAAQAEAAMAAMAAQQJAAUAAgAiAAMAAQQJAAYAEAAMYW5jaG9yanM0MDBAAGEAbgBjAGgAbwByAGoAcwA0ADAAMABAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAH//wAP) format(\"truetype\")' +\n          '}',\n          pseudoElContent =\n          '[data-anchorjs-icon]::after{'           +\n            'content:attr(data-anchorjs-icon)'     +\n          '}',\n          firstStyleEl;\n\n      style.className = 'anchorjs';\n      style.appendChild(document.createTextNode('')); // Necessary for Webkit.\n\n      // We place it in the head with the other style tags, if possible, so as to\n      // not look out of place. We insert before the others so these styles can be\n      // overridden if necessary.\n      firstStyleEl = document.head.querySelector('[rel=\"stylesheet\"],style');\n      if (firstStyleEl === undefined) {\n        document.head.appendChild(style);\n      } else {\n        document.head.insertBefore(style, firstStyleEl);\n      }\n\n      style.sheet.insertRule(linkRule, style.sheet.cssRules.length);\n      style.sheet.insertRule(hoverRule, style.sheet.cssRules.length);\n      style.sheet.insertRule(pseudoElContent, style.sheet.cssRules.length);\n      style.sheet.insertRule(anchorjsLinkFontFace, style.sheet.cssRules.length);\n    }\n  }\n\n  return AnchorJS;\n}));\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import AnchorJS from 'anchor-js'\n\nlet init = function () {\n  let $introImg = $('.site-intro-img:first'),\n    introPlaceholder = $('.site-intro-placeholder:first'),\n    bgCSS = $introImg.css('background-image'),\n    bgRegResult = bgCSS.match(/url\\(\"*([^\"]*)\"*\\)/)\n\n  if (bgRegResult.length < 2) {\n    console.log('...')\n    console.log(bgRegResult)\n    return\n  }\n\n  let bgURL = bgRegResult[1],\n    img = new Image()\n  img.onload = function () {\n    // window.alert()\n    // setTimeout(function () {\n    introPlaceholder.remove()\n    // }, 100)\n    console.info('PLACEHOLDER REMOVED')\n  }\n  img.src = bgURL\n\n  document.addEventListener(\n    'DOMContentLoaded',\n    function () {\n      $('.container').removeClass('container-unloaded')\n      $('.footer').removeClass('footer-unloaded')\n      $('.loading').remove()\n    },\n    false\n  )\n\n  // https://www.bryanbraun.com/anchorjs/\n  let anchors = new AnchorJS()\n  anchors.options = {\n    placement: 'right',\n    class: 'anchorjs-archer',\n  }\n  anchors.add()\n}\n\nexport default init\n","const archerUtil = {\n  // 回到顶部\n  backTop: function (event) {\n    event.preventDefault()\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth',\n    })\n  },\n\n  // 获取元素在页面上相对左上角的位置\n  getAbsPosition: function (e) {\n    let x = e.offsetLeft,\n      y = e.offsetTop\n    while ((e = e.offsetParent)) {\n      x += e.offsetLeft\n      y += e.offsetTop\n    }\n    return {\n      x: x,\n      y: y,\n    }\n  },\n\n  // 格式化日期\n  dateFormater: function (date, fmt) {\n    let o = {\n      'M+': date.getMonth() + 1, // 月份\n      'd+': date.getDate(), // 日\n      'h+': date.getHours(), // 小时\n      'm+': date.getMinutes(), // 分\n      's+': date.getSeconds(), // 秒\n      'q+': Math.floor((date.getMonth() + 3) / 3), // 季度\n      S: date.getMilliseconds(), // 毫秒\n    }\n    if (/(y+)/.test(fmt)) {\n      fmt = fmt.replace(\n        RegExp.$1,\n        String(date.getFullYear()).substr(4 - RegExp.$1.length)\n      )\n    }\n    for (let k in o) {\n      if (new RegExp('(' + k + ')').test(fmt)) {\n        fmt = fmt.replace(\n          RegExp.$1,\n          RegExp.$1.length === 1\n            ? o[k]\n            : ('00' + o[k]).substr(String(o[k]).length)\n        )\n      }\n    }\n    return fmt\n  },\n\n  // rAF 的 ticking\n  rafTick: function (ticking, updateFunc) {\n    if (!ticking) {\n      requestAnimationFrame(updateFunc)\n    }\n    ticking = true\n  },\n\n  // 函数节流\n  throttle: function (func, wait, immediate = false) {\n    let timer\n    return function () {\n      const args = arguments\n      if (!timer) {\n        if (immediate) {\n          timer = setTimeout(() => {\n            timer = undefined\n          }, wait)\n          func.apply(this, args)\n        } else {\n          timer = setTimeout(() => {\n            timer = undefined\n            func.apply(this, args)\n          }, wait)\n        }\n      }\n    }\n  },\n\n  // 函数防抖\n  debounce: function (func, wait, immediate = false) {\n    let timer\n    return function () {\n      const args = arguments\n\n      timer && clearTimeout(timer)\n\n      if (immediate) {\n        !timer && func.apply(this, args)\n        timer = setTimeout(() => {\n          timer = undefined\n        }, wait)\n      } else {\n        timer = setTimeout(() => {\n          func.apply(this, args)\n        }, wait)\n      }\n    }\n  },\n}\n\nexport default archerUtil\n","/*!\r\n * perfect-scrollbar v1.5.0\r\n * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors\r\n * Licensed under MIT\r\n */\r\n\r\nfunction get(element) {\r\n  return getComputedStyle(element);\r\n}\r\n\r\nfunction set(element, obj) {\r\n  for (var key in obj) {\r\n    var val = obj[key];\r\n    if (typeof val === 'number') {\r\n      val = val + \"px\";\r\n    }\r\n    element.style[key] = val;\r\n  }\r\n  return element;\r\n}\r\n\r\nfunction div(className) {\r\n  var div = document.createElement('div');\r\n  div.className = className;\r\n  return div;\r\n}\r\n\r\nvar elMatches =\r\n  typeof Element !== 'undefined' &&\r\n  (Element.prototype.matches ||\r\n    Element.prototype.webkitMatchesSelector ||\r\n    Element.prototype.mozMatchesSelector ||\r\n    Element.prototype.msMatchesSelector);\r\n\r\nfunction matches(element, query) {\r\n  if (!elMatches) {\r\n    throw new Error('No element matching method supported');\r\n  }\r\n\r\n  return elMatches.call(element, query);\r\n}\r\n\r\nfunction remove(element) {\r\n  if (element.remove) {\r\n    element.remove();\r\n  } else {\r\n    if (element.parentNode) {\r\n      element.parentNode.removeChild(element);\r\n    }\r\n  }\r\n}\r\n\r\nfunction queryChildren(element, selector) {\r\n  return Array.prototype.filter.call(element.children, function (child) { return matches(child, selector); }\r\n  );\r\n}\r\n\r\nvar cls = {\r\n  main: 'ps',\r\n  rtl: 'ps__rtl',\r\n  element: {\r\n    thumb: function (x) { return (\"ps__thumb-\" + x); },\r\n    rail: function (x) { return (\"ps__rail-\" + x); },\r\n    consuming: 'ps__child--consume',\r\n  },\r\n  state: {\r\n    focus: 'ps--focus',\r\n    clicking: 'ps--clicking',\r\n    active: function (x) { return (\"ps--active-\" + x); },\r\n    scrolling: function (x) { return (\"ps--scrolling-\" + x); },\r\n  },\r\n};\r\n\r\n/*\r\n * Helper methods\r\n */\r\nvar scrollingClassTimeout = { x: null, y: null };\r\n\r\nfunction addScrollingClass(i, x) {\r\n  var classList = i.element.classList;\r\n  var className = cls.state.scrolling(x);\r\n\r\n  if (classList.contains(className)) {\r\n    clearTimeout(scrollingClassTimeout[x]);\r\n  } else {\r\n    classList.add(className);\r\n  }\r\n}\r\n\r\nfunction removeScrollingClass(i, x) {\r\n  scrollingClassTimeout[x] = setTimeout(\r\n    function () { return i.isAlive && i.element.classList.remove(cls.state.scrolling(x)); },\r\n    i.settings.scrollingThreshold\r\n  );\r\n}\r\n\r\nfunction setScrollingClassInstantly(i, x) {\r\n  addScrollingClass(i, x);\r\n  removeScrollingClass(i, x);\r\n}\r\n\r\nvar EventElement = function EventElement(element) {\r\n  this.element = element;\r\n  this.handlers = {};\r\n};\r\n\r\nvar prototypeAccessors = { isEmpty: { configurable: true } };\r\n\r\nEventElement.prototype.bind = function bind (eventName, handler) {\r\n  if (typeof this.handlers[eventName] === 'undefined') {\r\n    this.handlers[eventName] = [];\r\n  }\r\n  this.handlers[eventName].push(handler);\r\n  this.element.addEventListener(eventName, handler, false);\r\n};\r\n\r\nEventElement.prototype.unbind = function unbind (eventName, target) {\r\n    var this$1 = this;\r\n\r\n  this.handlers[eventName] = this.handlers[eventName].filter(function (handler) {\r\n    if (target && handler !== target) {\r\n      return true;\r\n    }\r\n    this$1.element.removeEventListener(eventName, handler, false);\r\n    return false;\r\n  });\r\n};\r\n\r\nEventElement.prototype.unbindAll = function unbindAll () {\r\n  for (var name in this.handlers) {\r\n    this.unbind(name);\r\n  }\r\n};\r\n\r\nprototypeAccessors.isEmpty.get = function () {\r\n    var this$1 = this;\r\n\r\n  return Object.keys(this.handlers).every(\r\n    function (key) { return this$1.handlers[key].length === 0; }\r\n  );\r\n};\r\n\r\nObject.defineProperties( EventElement.prototype, prototypeAccessors );\r\n\r\nvar EventManager = function EventManager() {\r\n  this.eventElements = [];\r\n};\r\n\r\nEventManager.prototype.eventElement = function eventElement (element) {\r\n  var ee = this.eventElements.filter(function (ee) { return ee.element === element; })[0];\r\n  if (!ee) {\r\n    ee = new EventElement(element);\r\n    this.eventElements.push(ee);\r\n  }\r\n  return ee;\r\n};\r\n\r\nEventManager.prototype.bind = function bind (element, eventName, handler) {\r\n  this.eventElement(element).bind(eventName, handler);\r\n};\r\n\r\nEventManager.prototype.unbind = function unbind (element, eventName, handler) {\r\n  var ee = this.eventElement(element);\r\n  ee.unbind(eventName, handler);\r\n\r\n  if (ee.isEmpty) {\r\n    // remove\r\n    this.eventElements.splice(this.eventElements.indexOf(ee), 1);\r\n  }\r\n};\r\n\r\nEventManager.prototype.unbindAll = function unbindAll () {\r\n  this.eventElements.forEach(function (e) { return e.unbindAll(); });\r\n  this.eventElements = [];\r\n};\r\n\r\nEventManager.prototype.once = function once (element, eventName, handler) {\r\n  var ee = this.eventElement(element);\r\n  var onceHandler = function (evt) {\r\n    ee.unbind(eventName, onceHandler);\r\n    handler(evt);\r\n  };\r\n  ee.bind(eventName, onceHandler);\r\n};\r\n\r\nfunction createEvent(name) {\r\n  if (typeof window.CustomEvent === 'function') {\r\n    return new CustomEvent(name);\r\n  } else {\r\n    var evt = document.createEvent('CustomEvent');\r\n    evt.initCustomEvent(name, false, false, undefined);\r\n    return evt;\r\n  }\r\n}\r\n\r\nfunction processScrollDiff(\r\n  i,\r\n  axis,\r\n  diff,\r\n  useScrollingClass,\r\n  forceFireReachEvent\r\n) {\r\n  if ( useScrollingClass === void 0 ) useScrollingClass = true;\r\n  if ( forceFireReachEvent === void 0 ) forceFireReachEvent = false;\r\n\r\n  var fields;\r\n  if (axis === 'top') {\r\n    fields = [\r\n      'contentHeight',\r\n      'containerHeight',\r\n      'scrollTop',\r\n      'y',\r\n      'up',\r\n      'down' ];\r\n  } else if (axis === 'left') {\r\n    fields = [\r\n      'contentWidth',\r\n      'containerWidth',\r\n      'scrollLeft',\r\n      'x',\r\n      'left',\r\n      'right' ];\r\n  } else {\r\n    throw new Error('A proper axis should be provided');\r\n  }\r\n\r\n  processScrollDiff$1(i, diff, fields, useScrollingClass, forceFireReachEvent);\r\n}\r\n\r\nfunction processScrollDiff$1(\r\n  i,\r\n  diff,\r\n  ref,\r\n  useScrollingClass,\r\n  forceFireReachEvent\r\n) {\r\n  var contentHeight = ref[0];\r\n  var containerHeight = ref[1];\r\n  var scrollTop = ref[2];\r\n  var y = ref[3];\r\n  var up = ref[4];\r\n  var down = ref[5];\r\n  if ( useScrollingClass === void 0 ) useScrollingClass = true;\r\n  if ( forceFireReachEvent === void 0 ) forceFireReachEvent = false;\r\n\r\n  var element = i.element;\r\n\r\n  // reset reach\r\n  i.reach[y] = null;\r\n\r\n  // 1 for subpixel rounding\r\n  if (element[scrollTop] < 1) {\r\n    i.reach[y] = 'start';\r\n  }\r\n\r\n  // 1 for subpixel rounding\r\n  if (element[scrollTop] > i[contentHeight] - i[containerHeight] - 1) {\r\n    i.reach[y] = 'end';\r\n  }\r\n\r\n  if (diff) {\r\n    element.dispatchEvent(createEvent((\"ps-scroll-\" + y)));\r\n\r\n    if (diff < 0) {\r\n      element.dispatchEvent(createEvent((\"ps-scroll-\" + up)));\r\n    } else if (diff > 0) {\r\n      element.dispatchEvent(createEvent((\"ps-scroll-\" + down)));\r\n    }\r\n\r\n    if (useScrollingClass) {\r\n      setScrollingClassInstantly(i, y);\r\n    }\r\n  }\r\n\r\n  if (i.reach[y] && (diff || forceFireReachEvent)) {\r\n    element.dispatchEvent(createEvent((\"ps-\" + y + \"-reach-\" + (i.reach[y]))));\r\n  }\r\n}\r\n\r\nfunction toInt(x) {\r\n  return parseInt(x, 10) || 0;\r\n}\r\n\r\nfunction isEditable(el) {\r\n  return (\r\n    matches(el, 'input,[contenteditable]') ||\r\n    matches(el, 'select,[contenteditable]') ||\r\n    matches(el, 'textarea,[contenteditable]') ||\r\n    matches(el, 'button,[contenteditable]')\r\n  );\r\n}\r\n\r\nfunction outerWidth(element) {\r\n  var styles = get(element);\r\n  return (\r\n    toInt(styles.width) +\r\n    toInt(styles.paddingLeft) +\r\n    toInt(styles.paddingRight) +\r\n    toInt(styles.borderLeftWidth) +\r\n    toInt(styles.borderRightWidth)\r\n  );\r\n}\r\n\r\nvar env = {\r\n  isWebKit:\r\n    typeof document !== 'undefined' &&\r\n    'WebkitAppearance' in document.documentElement.style,\r\n  supportsTouch:\r\n    typeof window !== 'undefined' &&\r\n    ('ontouchstart' in window ||\r\n      ('maxTouchPoints' in window.navigator &&\r\n        window.navigator.maxTouchPoints > 0) ||\r\n      (window.DocumentTouch && document instanceof window.DocumentTouch)),\r\n  supportsIePointer:\r\n    typeof navigator !== 'undefined' && navigator.msMaxTouchPoints,\r\n  isChrome:\r\n    typeof navigator !== 'undefined' &&\r\n    /Chrome/i.test(navigator && navigator.userAgent),\r\n};\r\n\r\nfunction updateGeometry(i) {\r\n  var element = i.element;\r\n  var roundedScrollTop = Math.floor(element.scrollTop);\r\n  var rect = element.getBoundingClientRect();\r\n\r\n  i.containerWidth = Math.ceil(rect.width);\r\n  i.containerHeight = Math.ceil(rect.height);\r\n  i.contentWidth = element.scrollWidth;\r\n  i.contentHeight = element.scrollHeight;\r\n\r\n  if (!element.contains(i.scrollbarXRail)) {\r\n    // clean up and append\r\n    queryChildren(element, cls.element.rail('x')).forEach(function (el) { return remove(el); }\r\n    );\r\n    element.appendChild(i.scrollbarXRail);\r\n  }\r\n  if (!element.contains(i.scrollbarYRail)) {\r\n    // clean up and append\r\n    queryChildren(element, cls.element.rail('y')).forEach(function (el) { return remove(el); }\r\n    );\r\n    element.appendChild(i.scrollbarYRail);\r\n  }\r\n\r\n  if (\r\n    !i.settings.suppressScrollX &&\r\n    i.containerWidth + i.settings.scrollXMarginOffset < i.contentWidth\r\n  ) {\r\n    i.scrollbarXActive = true;\r\n    i.railXWidth = i.containerWidth - i.railXMarginWidth;\r\n    i.railXRatio = i.containerWidth / i.railXWidth;\r\n    i.scrollbarXWidth = getThumbSize(\r\n      i,\r\n      toInt((i.railXWidth * i.containerWidth) / i.contentWidth)\r\n    );\r\n    i.scrollbarXLeft = toInt(\r\n      ((i.negativeScrollAdjustment + element.scrollLeft) *\r\n        (i.railXWidth - i.scrollbarXWidth)) /\r\n        (i.contentWidth - i.containerWidth)\r\n    );\r\n  } else {\r\n    i.scrollbarXActive = false;\r\n  }\r\n\r\n  if (\r\n    !i.settings.suppressScrollY &&\r\n    i.containerHeight + i.settings.scrollYMarginOffset < i.contentHeight\r\n  ) {\r\n    i.scrollbarYActive = true;\r\n    i.railYHeight = i.containerHeight - i.railYMarginHeight;\r\n    i.railYRatio = i.containerHeight / i.railYHeight;\r\n    i.scrollbarYHeight = getThumbSize(\r\n      i,\r\n      toInt((i.railYHeight * i.containerHeight) / i.contentHeight)\r\n    );\r\n    i.scrollbarYTop = toInt(\r\n      (roundedScrollTop * (i.railYHeight - i.scrollbarYHeight)) /\r\n        (i.contentHeight - i.containerHeight)\r\n    );\r\n  } else {\r\n    i.scrollbarYActive = false;\r\n  }\r\n\r\n  if (i.scrollbarXLeft >= i.railXWidth - i.scrollbarXWidth) {\r\n    i.scrollbarXLeft = i.railXWidth - i.scrollbarXWidth;\r\n  }\r\n  if (i.scrollbarYTop >= i.railYHeight - i.scrollbarYHeight) {\r\n    i.scrollbarYTop = i.railYHeight - i.scrollbarYHeight;\r\n  }\r\n\r\n  updateCss(element, i);\r\n\r\n  if (i.scrollbarXActive) {\r\n    element.classList.add(cls.state.active('x'));\r\n  } else {\r\n    element.classList.remove(cls.state.active('x'));\r\n    i.scrollbarXWidth = 0;\r\n    i.scrollbarXLeft = 0;\r\n    element.scrollLeft = i.isRtl === true ? i.contentWidth : 0;\r\n  }\r\n  if (i.scrollbarYActive) {\r\n    element.classList.add(cls.state.active('y'));\r\n  } else {\r\n    element.classList.remove(cls.state.active('y'));\r\n    i.scrollbarYHeight = 0;\r\n    i.scrollbarYTop = 0;\r\n    element.scrollTop = 0;\r\n  }\r\n}\r\n\r\nfunction getThumbSize(i, thumbSize) {\r\n  if (i.settings.minScrollbarLength) {\r\n    thumbSize = Math.max(thumbSize, i.settings.minScrollbarLength);\r\n  }\r\n  if (i.settings.maxScrollbarLength) {\r\n    thumbSize = Math.min(thumbSize, i.settings.maxScrollbarLength);\r\n  }\r\n  return thumbSize;\r\n}\r\n\r\nfunction updateCss(element, i) {\r\n  var xRailOffset = { width: i.railXWidth };\r\n  var roundedScrollTop = Math.floor(element.scrollTop);\r\n\r\n  if (i.isRtl) {\r\n    xRailOffset.left =\r\n      i.negativeScrollAdjustment +\r\n      element.scrollLeft +\r\n      i.containerWidth -\r\n      i.contentWidth;\r\n  } else {\r\n    xRailOffset.left = element.scrollLeft;\r\n  }\r\n  if (i.isScrollbarXUsingBottom) {\r\n    xRailOffset.bottom = i.scrollbarXBottom - roundedScrollTop;\r\n  } else {\r\n    xRailOffset.top = i.scrollbarXTop + roundedScrollTop;\r\n  }\r\n  set(i.scrollbarXRail, xRailOffset);\r\n\r\n  var yRailOffset = { top: roundedScrollTop, height: i.railYHeight };\r\n  if (i.isScrollbarYUsingRight) {\r\n    if (i.isRtl) {\r\n      yRailOffset.right =\r\n        i.contentWidth -\r\n        (i.negativeScrollAdjustment + element.scrollLeft) -\r\n        i.scrollbarYRight -\r\n        i.scrollbarYOuterWidth -\r\n        9;\r\n    } else {\r\n      yRailOffset.right = i.scrollbarYRight - element.scrollLeft;\r\n    }\r\n  } else {\r\n    if (i.isRtl) {\r\n      yRailOffset.left =\r\n        i.negativeScrollAdjustment +\r\n        element.scrollLeft +\r\n        i.containerWidth * 2 -\r\n        i.contentWidth -\r\n        i.scrollbarYLeft -\r\n        i.scrollbarYOuterWidth;\r\n    } else {\r\n      yRailOffset.left = i.scrollbarYLeft + element.scrollLeft;\r\n    }\r\n  }\r\n  set(i.scrollbarYRail, yRailOffset);\r\n\r\n  set(i.scrollbarX, {\r\n    left: i.scrollbarXLeft,\r\n    width: i.scrollbarXWidth - i.railBorderXWidth,\r\n  });\r\n  set(i.scrollbarY, {\r\n    top: i.scrollbarYTop,\r\n    height: i.scrollbarYHeight - i.railBorderYWidth,\r\n  });\r\n}\r\n\r\nfunction clickRail(i) {\r\n  var element = i.element;\r\n\r\n  i.event.bind(i.scrollbarY, 'mousedown', function (e) { return e.stopPropagation(); });\r\n  i.event.bind(i.scrollbarYRail, 'mousedown', function (e) {\r\n    var positionTop =\r\n      e.pageY -\r\n      window.pageYOffset -\r\n      i.scrollbarYRail.getBoundingClientRect().top;\r\n    var direction = positionTop > i.scrollbarYTop ? 1 : -1;\r\n\r\n    i.element.scrollTop += direction * i.containerHeight;\r\n    updateGeometry(i);\r\n\r\n    e.stopPropagation();\r\n  });\r\n\r\n  i.event.bind(i.scrollbarX, 'mousedown', function (e) { return e.stopPropagation(); });\r\n  i.event.bind(i.scrollbarXRail, 'mousedown', function (e) {\r\n    var positionLeft =\r\n      e.pageX -\r\n      window.pageXOffset -\r\n      i.scrollbarXRail.getBoundingClientRect().left;\r\n    var direction = positionLeft > i.scrollbarXLeft ? 1 : -1;\r\n\r\n    i.element.scrollLeft += direction * i.containerWidth;\r\n    updateGeometry(i);\r\n\r\n    e.stopPropagation();\r\n  });\r\n}\r\n\r\nfunction dragThumb(i) {\r\n  bindMouseScrollHandler(i, [\r\n    'containerWidth',\r\n    'contentWidth',\r\n    'pageX',\r\n    'railXWidth',\r\n    'scrollbarX',\r\n    'scrollbarXWidth',\r\n    'scrollLeft',\r\n    'x',\r\n    'scrollbarXRail' ]);\r\n  bindMouseScrollHandler(i, [\r\n    'containerHeight',\r\n    'contentHeight',\r\n    'pageY',\r\n    'railYHeight',\r\n    'scrollbarY',\r\n    'scrollbarYHeight',\r\n    'scrollTop',\r\n    'y',\r\n    'scrollbarYRail' ]);\r\n}\r\n\r\nfunction bindMouseScrollHandler(\r\n  i,\r\n  ref\r\n) {\r\n  var containerHeight = ref[0];\r\n  var contentHeight = ref[1];\r\n  var pageY = ref[2];\r\n  var railYHeight = ref[3];\r\n  var scrollbarY = ref[4];\r\n  var scrollbarYHeight = ref[5];\r\n  var scrollTop = ref[6];\r\n  var y = ref[7];\r\n  var scrollbarYRail = ref[8];\r\n\r\n  var element = i.element;\r\n\r\n  var startingScrollTop = null;\r\n  var startingMousePageY = null;\r\n  var scrollBy = null;\r\n\r\n  function mouseMoveHandler(e) {\r\n    if (e.touches && e.touches[0]) {\r\n      e[pageY] = e.touches[0].pageY;\r\n    }\r\n    element[scrollTop] =\r\n      startingScrollTop + scrollBy * (e[pageY] - startingMousePageY);\r\n    addScrollingClass(i, y);\r\n    updateGeometry(i);\r\n\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  function mouseUpHandler() {\r\n    removeScrollingClass(i, y);\r\n    i[scrollbarYRail].classList.remove(cls.state.clicking);\r\n    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);\r\n  }\r\n\r\n  function bindMoves(e, touchMode) {\r\n    startingScrollTop = element[scrollTop];\r\n    if (touchMode && e.touches) {\r\n      e[pageY] = e.touches[0].pageY;\r\n    }\r\n    startingMousePageY = e[pageY];\r\n    scrollBy =\r\n      (i[contentHeight] - i[containerHeight]) /\r\n      (i[railYHeight] - i[scrollbarYHeight]);\r\n    if (!touchMode) {\r\n      i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);\r\n      i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);\r\n      e.preventDefault();\r\n    } else {\r\n      i.event.bind(i.ownerDocument, 'touchmove', mouseMoveHandler);\r\n    }\r\n\r\n    i[scrollbarYRail].classList.add(cls.state.clicking);\r\n\r\n    e.stopPropagation();\r\n  }\r\n\r\n  i.event.bind(i[scrollbarY], 'mousedown', function (e) {\r\n    bindMoves(e);\r\n  });\r\n  i.event.bind(i[scrollbarY], 'touchstart', function (e) {\r\n    bindMoves(e, true);\r\n  });\r\n}\r\n\r\nfunction keyboard(i) {\r\n  var element = i.element;\r\n\r\n  var elementHovered = function () { return matches(element, ':hover'); };\r\n  var scrollbarFocused = function () { return matches(i.scrollbarX, ':focus') || matches(i.scrollbarY, ':focus'); };\r\n\r\n  function shouldPreventDefault(deltaX, deltaY) {\r\n    var scrollTop = Math.floor(element.scrollTop);\r\n    if (deltaX === 0) {\r\n      if (!i.scrollbarYActive) {\r\n        return false;\r\n      }\r\n      if (\r\n        (scrollTop === 0 && deltaY > 0) ||\r\n        (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)\r\n      ) {\r\n        return !i.settings.wheelPropagation;\r\n      }\r\n    }\r\n\r\n    var scrollLeft = element.scrollLeft;\r\n    if (deltaY === 0) {\r\n      if (!i.scrollbarXActive) {\r\n        return false;\r\n      }\r\n      if (\r\n        (scrollLeft === 0 && deltaX < 0) ||\r\n        (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)\r\n      ) {\r\n        return !i.settings.wheelPropagation;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  i.event.bind(i.ownerDocument, 'keydown', function (e) {\r\n    if (\r\n      (e.isDefaultPrevented && e.isDefaultPrevented()) ||\r\n      e.defaultPrevented\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (!elementHovered() && !scrollbarFocused()) {\r\n      return;\r\n    }\r\n\r\n    var activeElement = document.activeElement\r\n      ? document.activeElement\r\n      : i.ownerDocument.activeElement;\r\n    if (activeElement) {\r\n      if (activeElement.tagName === 'IFRAME') {\r\n        activeElement = activeElement.contentDocument.activeElement;\r\n      } else {\r\n        // go deeper if element is a webcomponent\r\n        while (activeElement.shadowRoot) {\r\n          activeElement = activeElement.shadowRoot.activeElement;\r\n        }\r\n      }\r\n      if (isEditable(activeElement)) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var deltaX = 0;\r\n    var deltaY = 0;\r\n\r\n    switch (e.which) {\r\n      case 37: // left\r\n        if (e.metaKey) {\r\n          deltaX = -i.contentWidth;\r\n        } else if (e.altKey) {\r\n          deltaX = -i.containerWidth;\r\n        } else {\r\n          deltaX = -30;\r\n        }\r\n        break;\r\n      case 38: // up\r\n        if (e.metaKey) {\r\n          deltaY = i.contentHeight;\r\n        } else if (e.altKey) {\r\n          deltaY = i.containerHeight;\r\n        } else {\r\n          deltaY = 30;\r\n        }\r\n        break;\r\n      case 39: // right\r\n        if (e.metaKey) {\r\n          deltaX = i.contentWidth;\r\n        } else if (e.altKey) {\r\n          deltaX = i.containerWidth;\r\n        } else {\r\n          deltaX = 30;\r\n        }\r\n        break;\r\n      case 40: // down\r\n        if (e.metaKey) {\r\n          deltaY = -i.contentHeight;\r\n        } else if (e.altKey) {\r\n          deltaY = -i.containerHeight;\r\n        } else {\r\n          deltaY = -30;\r\n        }\r\n        break;\r\n      case 32: // space bar\r\n        if (e.shiftKey) {\r\n          deltaY = i.containerHeight;\r\n        } else {\r\n          deltaY = -i.containerHeight;\r\n        }\r\n        break;\r\n      case 33: // page up\r\n        deltaY = i.containerHeight;\r\n        break;\r\n      case 34: // page down\r\n        deltaY = -i.containerHeight;\r\n        break;\r\n      case 36: // home\r\n        deltaY = i.contentHeight;\r\n        break;\r\n      case 35: // end\r\n        deltaY = -i.contentHeight;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    if (i.settings.suppressScrollX && deltaX !== 0) {\r\n      return;\r\n    }\r\n    if (i.settings.suppressScrollY && deltaY !== 0) {\r\n      return;\r\n    }\r\n\r\n    element.scrollTop -= deltaY;\r\n    element.scrollLeft += deltaX;\r\n    updateGeometry(i);\r\n\r\n    if (shouldPreventDefault(deltaX, deltaY)) {\r\n      e.preventDefault();\r\n    }\r\n  });\r\n}\r\n\r\nfunction wheel(i) {\r\n  var element = i.element;\r\n\r\n  function shouldPreventDefault(deltaX, deltaY) {\r\n    var roundedScrollTop = Math.floor(element.scrollTop);\r\n    var isTop = element.scrollTop === 0;\r\n    var isBottom =\r\n      roundedScrollTop + element.offsetHeight === element.scrollHeight;\r\n    var isLeft = element.scrollLeft === 0;\r\n    var isRight =\r\n      element.scrollLeft + element.offsetWidth === element.scrollWidth;\r\n\r\n    var hitsBound;\r\n\r\n    // pick axis with primary direction\r\n    if (Math.abs(deltaY) > Math.abs(deltaX)) {\r\n      hitsBound = isTop || isBottom;\r\n    } else {\r\n      hitsBound = isLeft || isRight;\r\n    }\r\n\r\n    return hitsBound ? !i.settings.wheelPropagation : true;\r\n  }\r\n\r\n  function getDeltaFromEvent(e) {\r\n    var deltaX = e.deltaX;\r\n    var deltaY = -1 * e.deltaY;\r\n\r\n    if (typeof deltaX === 'undefined' || typeof deltaY === 'undefined') {\r\n      // OS X Safari\r\n      deltaX = (-1 * e.wheelDeltaX) / 6;\r\n      deltaY = e.wheelDeltaY / 6;\r\n    }\r\n\r\n    if (e.deltaMode && e.deltaMode === 1) {\r\n      // Firefox in deltaMode 1: Line scrolling\r\n      deltaX *= 10;\r\n      deltaY *= 10;\r\n    }\r\n\r\n    if (deltaX !== deltaX && deltaY !== deltaY /* NaN checks */) {\r\n      // IE in some mouse drivers\r\n      deltaX = 0;\r\n      deltaY = e.wheelDelta;\r\n    }\r\n\r\n    if (e.shiftKey) {\r\n      // reverse axis with shift key\r\n      return [-deltaY, -deltaX];\r\n    }\r\n    return [deltaX, deltaY];\r\n  }\r\n\r\n  function shouldBeConsumedByChild(target, deltaX, deltaY) {\r\n    // FIXME: this is a workaround for <select> issue in FF and IE #571\r\n    if (!env.isWebKit && element.querySelector('select:focus')) {\r\n      return true;\r\n    }\r\n\r\n    if (!element.contains(target)) {\r\n      return false;\r\n    }\r\n\r\n    var cursor = target;\r\n\r\n    while (cursor && cursor !== element) {\r\n      if (cursor.classList.contains(cls.element.consuming)) {\r\n        return true;\r\n      }\r\n\r\n      var style = get(cursor);\r\n\r\n      // if deltaY && vertical scrollable\r\n      if (deltaY && style.overflowY.match(/(scroll|auto)/)) {\r\n        var maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\r\n        if (maxScrollTop > 0) {\r\n          if (\r\n            (cursor.scrollTop > 0 && deltaY < 0) ||\r\n            (cursor.scrollTop < maxScrollTop && deltaY > 0)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      // if deltaX && horizontal scrollable\r\n      if (deltaX && style.overflowX.match(/(scroll|auto)/)) {\r\n        var maxScrollLeft = cursor.scrollWidth - cursor.clientWidth;\r\n        if (maxScrollLeft > 0) {\r\n          if (\r\n            (cursor.scrollLeft > 0 && deltaX < 0) ||\r\n            (cursor.scrollLeft < maxScrollLeft && deltaX > 0)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n\r\n      cursor = cursor.parentNode;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function mousewheelHandler(e) {\r\n    var ref = getDeltaFromEvent(e);\r\n    var deltaX = ref[0];\r\n    var deltaY = ref[1];\r\n\r\n    if (shouldBeConsumedByChild(e.target, deltaX, deltaY)) {\r\n      return;\r\n    }\r\n\r\n    var shouldPrevent = false;\r\n    if (!i.settings.useBothWheelAxes) {\r\n      // deltaX will only be used for horizontal scrolling and deltaY will\r\n      // only be used for vertical scrolling - this is the default\r\n      element.scrollTop -= deltaY * i.settings.wheelSpeed;\r\n      element.scrollLeft += deltaX * i.settings.wheelSpeed;\r\n    } else if (i.scrollbarYActive && !i.scrollbarXActive) {\r\n      // only vertical scrollbar is active and useBothWheelAxes option is\r\n      // active, so let's scroll vertical bar using both mouse wheel axes\r\n      if (deltaY) {\r\n        element.scrollTop -= deltaY * i.settings.wheelSpeed;\r\n      } else {\r\n        element.scrollTop += deltaX * i.settings.wheelSpeed;\r\n      }\r\n      shouldPrevent = true;\r\n    } else if (i.scrollbarXActive && !i.scrollbarYActive) {\r\n      // useBothWheelAxes and only horizontal bar is active, so use both\r\n      // wheel axes for horizontal bar\r\n      if (deltaX) {\r\n        element.scrollLeft += deltaX * i.settings.wheelSpeed;\r\n      } else {\r\n        element.scrollLeft -= deltaY * i.settings.wheelSpeed;\r\n      }\r\n      shouldPrevent = true;\r\n    }\r\n\r\n    updateGeometry(i);\r\n\r\n    shouldPrevent = shouldPrevent || shouldPreventDefault(deltaX, deltaY);\r\n    if (shouldPrevent && !e.ctrlKey) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  if (typeof window.onwheel !== 'undefined') {\r\n    i.event.bind(element, 'wheel', mousewheelHandler);\r\n  } else if (typeof window.onmousewheel !== 'undefined') {\r\n    i.event.bind(element, 'mousewheel', mousewheelHandler);\r\n  }\r\n}\r\n\r\nfunction touch(i) {\r\n  if (!env.supportsTouch && !env.supportsIePointer) {\r\n    return;\r\n  }\r\n\r\n  var element = i.element;\r\n\r\n  function shouldPrevent(deltaX, deltaY) {\r\n    var scrollTop = Math.floor(element.scrollTop);\r\n    var scrollLeft = element.scrollLeft;\r\n    var magnitudeX = Math.abs(deltaX);\r\n    var magnitudeY = Math.abs(deltaY);\r\n\r\n    if (magnitudeY > magnitudeX) {\r\n      // user is perhaps trying to swipe up/down the page\r\n\r\n      if (\r\n        (deltaY < 0 && scrollTop === i.contentHeight - i.containerHeight) ||\r\n        (deltaY > 0 && scrollTop === 0)\r\n      ) {\r\n        // set prevent for mobile Chrome refresh\r\n        return window.scrollY === 0 && deltaY > 0 && env.isChrome;\r\n      }\r\n    } else if (magnitudeX > magnitudeY) {\r\n      // user is perhaps trying to swipe left/right across the page\r\n\r\n      if (\r\n        (deltaX < 0 && scrollLeft === i.contentWidth - i.containerWidth) ||\r\n        (deltaX > 0 && scrollLeft === 0)\r\n      ) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  function applyTouchMove(differenceX, differenceY) {\r\n    element.scrollTop -= differenceY;\r\n    element.scrollLeft -= differenceX;\r\n\r\n    updateGeometry(i);\r\n  }\r\n\r\n  var startOffset = {};\r\n  var startTime = 0;\r\n  var speed = {};\r\n  var easingLoop = null;\r\n\r\n  function getTouch(e) {\r\n    if (e.targetTouches) {\r\n      return e.targetTouches[0];\r\n    } else {\r\n      // Maybe IE pointer\r\n      return e;\r\n    }\r\n  }\r\n\r\n  function shouldHandle(e) {\r\n    if (e.pointerType && e.pointerType === 'pen' && e.buttons === 0) {\r\n      return false;\r\n    }\r\n    if (e.targetTouches && e.targetTouches.length === 1) {\r\n      return true;\r\n    }\r\n    if (\r\n      e.pointerType &&\r\n      e.pointerType !== 'mouse' &&\r\n      e.pointerType !== e.MSPOINTER_TYPE_MOUSE\r\n    ) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function touchStart(e) {\r\n    if (!shouldHandle(e)) {\r\n      return;\r\n    }\r\n\r\n    var touch = getTouch(e);\r\n\r\n    startOffset.pageX = touch.pageX;\r\n    startOffset.pageY = touch.pageY;\r\n\r\n    startTime = new Date().getTime();\r\n\r\n    if (easingLoop !== null) {\r\n      clearInterval(easingLoop);\r\n    }\r\n  }\r\n\r\n  function shouldBeConsumedByChild(target, deltaX, deltaY) {\r\n    if (!element.contains(target)) {\r\n      return false;\r\n    }\r\n\r\n    var cursor = target;\r\n\r\n    while (cursor && cursor !== element) {\r\n      if (cursor.classList.contains(cls.element.consuming)) {\r\n        return true;\r\n      }\r\n\r\n      var style = get(cursor);\r\n\r\n      // if deltaY && vertical scrollable\r\n      if (deltaY && style.overflowY.match(/(scroll|auto)/)) {\r\n        var maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\r\n        if (maxScrollTop > 0) {\r\n          if (\r\n            (cursor.scrollTop > 0 && deltaY < 0) ||\r\n            (cursor.scrollTop < maxScrollTop && deltaY > 0)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      // if deltaX && horizontal scrollable\r\n      if (deltaX && style.overflowX.match(/(scroll|auto)/)) {\r\n        var maxScrollLeft = cursor.scrollWidth - cursor.clientWidth;\r\n        if (maxScrollLeft > 0) {\r\n          if (\r\n            (cursor.scrollLeft > 0 && deltaX < 0) ||\r\n            (cursor.scrollLeft < maxScrollLeft && deltaX > 0)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n\r\n      cursor = cursor.parentNode;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function touchMove(e) {\r\n    if (shouldHandle(e)) {\r\n      var touch = getTouch(e);\r\n\r\n      var currentOffset = { pageX: touch.pageX, pageY: touch.pageY };\r\n\r\n      var differenceX = currentOffset.pageX - startOffset.pageX;\r\n      var differenceY = currentOffset.pageY - startOffset.pageY;\r\n\r\n      if (shouldBeConsumedByChild(e.target, differenceX, differenceY)) {\r\n        return;\r\n      }\r\n\r\n      applyTouchMove(differenceX, differenceY);\r\n      startOffset = currentOffset;\r\n\r\n      var currentTime = new Date().getTime();\r\n\r\n      var timeGap = currentTime - startTime;\r\n      if (timeGap > 0) {\r\n        speed.x = differenceX / timeGap;\r\n        speed.y = differenceY / timeGap;\r\n        startTime = currentTime;\r\n      }\r\n\r\n      if (shouldPrevent(differenceX, differenceY)) {\r\n        e.preventDefault();\r\n      }\r\n    }\r\n  }\r\n  function touchEnd() {\r\n    if (i.settings.swipeEasing) {\r\n      clearInterval(easingLoop);\r\n      easingLoop = setInterval(function() {\r\n        if (i.isInitialized) {\r\n          clearInterval(easingLoop);\r\n          return;\r\n        }\r\n\r\n        if (!speed.x && !speed.y) {\r\n          clearInterval(easingLoop);\r\n          return;\r\n        }\r\n\r\n        if (Math.abs(speed.x) < 0.01 && Math.abs(speed.y) < 0.01) {\r\n          clearInterval(easingLoop);\r\n          return;\r\n        }\r\n\r\n        applyTouchMove(speed.x * 30, speed.y * 30);\r\n\r\n        speed.x *= 0.8;\r\n        speed.y *= 0.8;\r\n      }, 10);\r\n    }\r\n  }\r\n\r\n  if (env.supportsTouch) {\r\n    i.event.bind(element, 'touchstart', touchStart);\r\n    i.event.bind(element, 'touchmove', touchMove);\r\n    i.event.bind(element, 'touchend', touchEnd);\r\n  } else if (env.supportsIePointer) {\r\n    if (window.PointerEvent) {\r\n      i.event.bind(element, 'pointerdown', touchStart);\r\n      i.event.bind(element, 'pointermove', touchMove);\r\n      i.event.bind(element, 'pointerup', touchEnd);\r\n    } else if (window.MSPointerEvent) {\r\n      i.event.bind(element, 'MSPointerDown', touchStart);\r\n      i.event.bind(element, 'MSPointerMove', touchMove);\r\n      i.event.bind(element, 'MSPointerUp', touchEnd);\r\n    }\r\n  }\r\n}\r\n\r\nvar defaultSettings = function () { return ({\r\n  handlers: ['click-rail', 'drag-thumb', 'keyboard', 'wheel', 'touch'],\r\n  maxScrollbarLength: null,\r\n  minScrollbarLength: null,\r\n  scrollingThreshold: 1000,\r\n  scrollXMarginOffset: 0,\r\n  scrollYMarginOffset: 0,\r\n  suppressScrollX: false,\r\n  suppressScrollY: false,\r\n  swipeEasing: true,\r\n  useBothWheelAxes: false,\r\n  wheelPropagation: true,\r\n  wheelSpeed: 1,\r\n}); };\r\n\r\nvar handlers = {\r\n  'click-rail': clickRail,\r\n  'drag-thumb': dragThumb,\r\n  keyboard: keyboard,\r\n  wheel: wheel,\r\n  touch: touch,\r\n};\r\n\r\nvar PerfectScrollbar = function PerfectScrollbar(element, userSettings) {\r\n  var this$1 = this;\r\n  if ( userSettings === void 0 ) userSettings = {};\r\n\r\n  if (typeof element === 'string') {\r\n    element = document.querySelector(element);\r\n  }\r\n\r\n  if (!element || !element.nodeName) {\r\n    throw new Error('no element is specified to initialize PerfectScrollbar');\r\n  }\r\n\r\n  this.element = element;\r\n\r\n  element.classList.add(cls.main);\r\n\r\n  this.settings = defaultSettings();\r\n  for (var key in userSettings) {\r\n    this.settings[key] = userSettings[key];\r\n  }\r\n\r\n  this.containerWidth = null;\r\n  this.containerHeight = null;\r\n  this.contentWidth = null;\r\n  this.contentHeight = null;\r\n\r\n  var focus = function () { return element.classList.add(cls.state.focus); };\r\n  var blur = function () { return element.classList.remove(cls.state.focus); };\r\n\r\n  this.isRtl = get(element).direction === 'rtl';\r\n  if (this.isRtl === true) {\r\n    element.classList.add(cls.rtl);\r\n  }\r\n  this.isNegativeScroll = (function () {\r\n    var originalScrollLeft = element.scrollLeft;\r\n    var result = null;\r\n    element.scrollLeft = -1;\r\n    result = element.scrollLeft < 0;\r\n    element.scrollLeft = originalScrollLeft;\r\n    return result;\r\n  })();\r\n  this.negativeScrollAdjustment = this.isNegativeScroll\r\n    ? element.scrollWidth - element.clientWidth\r\n    : 0;\r\n  this.event = new EventManager();\r\n  this.ownerDocument = element.ownerDocument || document;\r\n\r\n  this.scrollbarXRail = div(cls.element.rail('x'));\r\n  element.appendChild(this.scrollbarXRail);\r\n  this.scrollbarX = div(cls.element.thumb('x'));\r\n  this.scrollbarXRail.appendChild(this.scrollbarX);\r\n  this.scrollbarX.setAttribute('tabindex', 0);\r\n  this.event.bind(this.scrollbarX, 'focus', focus);\r\n  this.event.bind(this.scrollbarX, 'blur', blur);\r\n  this.scrollbarXActive = null;\r\n  this.scrollbarXWidth = null;\r\n  this.scrollbarXLeft = null;\r\n  var railXStyle = get(this.scrollbarXRail);\r\n  this.scrollbarXBottom = parseInt(railXStyle.bottom, 10);\r\n  if (isNaN(this.scrollbarXBottom)) {\r\n    this.isScrollbarXUsingBottom = false;\r\n    this.scrollbarXTop = toInt(railXStyle.top);\r\n  } else {\r\n    this.isScrollbarXUsingBottom = true;\r\n  }\r\n  this.railBorderXWidth =\r\n    toInt(railXStyle.borderLeftWidth) + toInt(railXStyle.borderRightWidth);\r\n  // Set rail to display:block to calculate margins\r\n  set(this.scrollbarXRail, { display: 'block' });\r\n  this.railXMarginWidth =\r\n    toInt(railXStyle.marginLeft) + toInt(railXStyle.marginRight);\r\n  set(this.scrollbarXRail, { display: '' });\r\n  this.railXWidth = null;\r\n  this.railXRatio = null;\r\n\r\n  this.scrollbarYRail = div(cls.element.rail('y'));\r\n  element.appendChild(this.scrollbarYRail);\r\n  this.scrollbarY = div(cls.element.thumb('y'));\r\n  this.scrollbarYRail.appendChild(this.scrollbarY);\r\n  this.scrollbarY.setAttribute('tabindex', 0);\r\n  this.event.bind(this.scrollbarY, 'focus', focus);\r\n  this.event.bind(this.scrollbarY, 'blur', blur);\r\n  this.scrollbarYActive = null;\r\n  this.scrollbarYHeight = null;\r\n  this.scrollbarYTop = null;\r\n  var railYStyle = get(this.scrollbarYRail);\r\n  this.scrollbarYRight = parseInt(railYStyle.right, 10);\r\n  if (isNaN(this.scrollbarYRight)) {\r\n    this.isScrollbarYUsingRight = false;\r\n    this.scrollbarYLeft = toInt(railYStyle.left);\r\n  } else {\r\n    this.isScrollbarYUsingRight = true;\r\n  }\r\n  this.scrollbarYOuterWidth = this.isRtl ? outerWidth(this.scrollbarY) : null;\r\n  this.railBorderYWidth =\r\n    toInt(railYStyle.borderTopWidth) + toInt(railYStyle.borderBottomWidth);\r\n  set(this.scrollbarYRail, { display: 'block' });\r\n  this.railYMarginHeight =\r\n    toInt(railYStyle.marginTop) + toInt(railYStyle.marginBottom);\r\n  set(this.scrollbarYRail, { display: '' });\r\n  this.railYHeight = null;\r\n  this.railYRatio = null;\r\n\r\n  this.reach = {\r\n    x:\r\n      element.scrollLeft <= 0\r\n        ? 'start'\r\n        : element.scrollLeft >= this.contentWidth - this.containerWidth\r\n        ? 'end'\r\n        : null,\r\n    y:\r\n      element.scrollTop <= 0\r\n        ? 'start'\r\n        : element.scrollTop >= this.contentHeight - this.containerHeight\r\n        ? 'end'\r\n        : null,\r\n  };\r\n\r\n  this.isAlive = true;\r\n\r\n  this.settings.handlers.forEach(function (handlerName) { return handlers[handlerName](this$1); });\r\n\r\n  this.lastScrollTop = Math.floor(element.scrollTop); // for onScroll only\r\n  this.lastScrollLeft = element.scrollLeft; // for onScroll only\r\n  this.event.bind(this.element, 'scroll', function (e) { return this$1.onScroll(e); });\r\n  updateGeometry(this);\r\n};\r\n\r\nPerfectScrollbar.prototype.update = function update () {\r\n  if (!this.isAlive) {\r\n    return;\r\n  }\r\n\r\n  // Recalcuate negative scrollLeft adjustment\r\n  this.negativeScrollAdjustment = this.isNegativeScroll\r\n    ? this.element.scrollWidth - this.element.clientWidth\r\n    : 0;\r\n\r\n  // Recalculate rail margins\r\n  set(this.scrollbarXRail, { display: 'block' });\r\n  set(this.scrollbarYRail, { display: 'block' });\r\n  this.railXMarginWidth =\r\n    toInt(get(this.scrollbarXRail).marginLeft) +\r\n    toInt(get(this.scrollbarXRail).marginRight);\r\n  this.railYMarginHeight =\r\n    toInt(get(this.scrollbarYRail).marginTop) +\r\n    toInt(get(this.scrollbarYRail).marginBottom);\r\n\r\n  // Hide scrollbars not to affect scrollWidth and scrollHeight\r\n  set(this.scrollbarXRail, { display: 'none' });\r\n  set(this.scrollbarYRail, { display: 'none' });\r\n\r\n  updateGeometry(this);\r\n\r\n  processScrollDiff(this, 'top', 0, false, true);\r\n  processScrollDiff(this, 'left', 0, false, true);\r\n\r\n  set(this.scrollbarXRail, { display: '' });\r\n  set(this.scrollbarYRail, { display: '' });\r\n};\r\n\r\nPerfectScrollbar.prototype.onScroll = function onScroll (e) {\r\n  if (!this.isAlive) {\r\n    return;\r\n  }\r\n\r\n  updateGeometry(this);\r\n  processScrollDiff(this, 'top', this.element.scrollTop - this.lastScrollTop);\r\n  processScrollDiff(\r\n    this,\r\n    'left',\r\n    this.element.scrollLeft - this.lastScrollLeft\r\n  );\r\n\r\n  this.lastScrollTop = Math.floor(this.element.scrollTop);\r\n  this.lastScrollLeft = this.element.scrollLeft;\r\n};\r\n\r\nPerfectScrollbar.prototype.destroy = function destroy () {\r\n  if (!this.isAlive) {\r\n    return;\r\n  }\r\n\r\n  this.event.unbindAll();\r\n  remove(this.scrollbarX);\r\n  remove(this.scrollbarY);\r\n  remove(this.scrollbarXRail);\r\n  remove(this.scrollbarYRail);\r\n  this.removePsClasses();\r\n\r\n  // unset elements\r\n  this.element = null;\r\n  this.scrollbarX = null;\r\n  this.scrollbarY = null;\r\n  this.scrollbarXRail = null;\r\n  this.scrollbarYRail = null;\r\n\r\n  this.isAlive = false;\r\n};\r\n\r\nPerfectScrollbar.prototype.removePsClasses = function removePsClasses () {\r\n  this.element.className = this.element.className\r\n    .split(' ')\r\n    .filter(function (name) { return !name.match(/^ps([-_].+|)$/); })\r\n    .join(' ');\r\n};\r\n\r\nexport default PerfectScrollbar;\r\n//# sourceMappingURL=perfect-scrollbar.esm.js.map\r\n","import PerfectScrollbar from 'perfect-scrollbar'\n\nconst Selector = (classPrefix) => ({\n  ACTIVE: `${classPrefix}-active`,\n})\n\nclass Sidebar {\n  static defaultOptions = {\n    activeIndex: 0,\n  }\n  constructor(options) {\n    this.options = { ...Sidebar.defaultOptions, ...options }\n    this.activeIndex = this.options.activeIndex\n    this._initElements()\n    this._initTabs()\n    this._bindTabsClick()\n    this._bindButtonClick()\n    this._bindWrapperClick()\n    this._bindWrapperTransitionEnd()\n    this.perfectScrollbar()\n  }\n\n  _initElements() {\n    this.$sidebar = $(this.options.sidebar)\n    this.$tabs = $(this.options.tabs)\n    this.$panels = $(this.options.panels)\n    this.$menuButton = $(this.options.menuButton)\n    this.$nav = $(this.options.nav)\n    this.$content = $(this.options.content)\n  }\n\n  _initTabs() {\n    this.$tabs.each((index, tab) => {\n      $(tab).data('tabIndex', index)\n    })\n  }\n\n  activateSidebar() {\n    $('.wrapper').addClass('wrapper-sidebar-active')\n    $('.header').addClass('header-sidebar-active')\n    $('.footer-fixed').addClass('footer-fixed-sidebar-active')\n    $('.toc-wrapper').addClass('toc-slide')\n    this.$menuButton.addClass('header-sidebar-menu-active')\n    this.$sidebar.removeClass('sidebar-hide')\n    this.$sidebar.addClass('sidebar-active')\n  }\n\n  _inactivateSidebar() {\n    $('.wrapper').removeClass('wrapper-sidebar-active')\n    $('.header').removeClass('header-sidebar-active')\n    $('.footer-fixed').removeClass('footer-fixed-sidebar-active')\n    $('.toc-wrapper').removeClass('toc-slide')\n    this.$menuButton.removeClass('header-sidebar-menu-active')\n    this.$sidebar.removeClass(`sidebar-active`)\n  }\n\n  switchTo(toIndex) {\n    this._switchTo(toIndex)\n  }\n\n  _switchTab(toIndex) {\n    for (let i = 0; i < 3; i++) {\n      if (i !== toIndex) {\n        this.$nav.removeClass(`sidebar-tabs-active-${i}`)\n      } else {\n        this.$nav.addClass(`sidebar-tabs-active-${i}`)\n      }\n    }\n  }\n\n  _bindWrapperTransitionEnd() {\n    $('.wrapper').on('transitionend', (e) => {\n      if (!this.$sidebar.hasClass('sidebar-active')) {\n        this.$sidebar.addClass('sidebar-hide')\n      }\n    })\n  }\n\n  _switchPanel(toIndex) {\n    for (let i = 0; i < 3; i++) {\n      if (i !== toIndex) {\n        this.$content.removeClass(`sidebar-content-active-${i}`)\n      } else {\n        this.$content.addClass(`sidebar-content-active-${i}`)\n      }\n    }\n  }\n\n  _switchTo(toIndex) {\n    this._switchTab(toIndex)\n    this._switchPanel(toIndex)\n  }\n\n  _bindTabsClick() {\n    this.$tabs.click((e) => {\n      const $target = $(e.target)\n      this.switchTo($target.data('tabIndex'))\n    })\n  }\n\n  _bindButtonClick() {\n    this.$menuButton.click((e) => {\n      if (this.$sidebar.hasClass('sidebar-hide')) {\n        this.activateSidebar()\n      } else {\n        this._inactivateSidebar()\n      }\n    })\n  }\n\n  _bindWrapperClick() {\n    $('.wrapper').click((e) => {\n      this._inactivateSidebar()\n    })\n  }\n\n  // 阻止sidebarContent在滚动到顶部或底部时继续滚动\n  perfectScrollbar() {\n    const ps = new PerfectScrollbar('.sidebar', {\n      suppressScrollX: true,\n    })\n  }\n}\n\nexport default Sidebar\n","import Sidebar from './sidebar'\n\nlet mySidebar = new Sidebar({\n  sidebar: '.sidebar',\n  nav: '.sidebar-tabs',\n  tabs: '.sidebar-tabs li',\n  content: '.sidebar-content',\n  panels: '.sideabar-contents > div',\n  menuButton: '.header-sidebar-menu',\n})\n\nexport default mySidebar\n","let initMobile = function () {\n  if (window.matchMedia) {\n    let mql = window.matchMedia('(max-width: 980px)')\n    mql.addListener(mediaChangeHandler)\n    mediaChangeHandler(mql)\n  } else {\n    window.addListener(\n      'resize',\n      function () {\n        let innerWidth =\n          window.innerWidth ||\n          document.documentElement.clientWidth ||\n          document.body.clientWidth\n        mediaChangeHandler(\n          innerWidth > 900\n            ? {\n                matches: false,\n              }\n            : {\n                matches: true,\n              }\n        )\n      },\n      false\n    )\n  }\n\n  function mediaChangeHandler(mql) {\n    if (mql.matches) {\n      console.log('mobile')\n      // TODO: why\n      mobilePreventScrollBreakdown()\n      // document.body.addEventListener('touchstart', function () {})\n    } else {\n      console.log('desktop')\n    }\n  }\n\n  function mobilePreventScrollBreakdown() {}\n}\n\nexport { initMobile }\n","import archerUtil from './util'\nimport sidebar from './initSidebar'\nimport Emitter from 'eventemitter3'\n\nclass MetaInfo {\n  constructor(metaName, labelsContainer, postContainer) {\n    this.currLabelName = ''\n    this.isInited = false\n    this.postsArr = null\n    this.metaName = metaName\n    this.labelsContainer = $(labelsContainer)[0]\n    this.postContainer = $(postContainer)[0]\n    this.indexMap = new Map()\n    this._bindLabelClick()\n  }\n\n  changeLabel(currLabelName) {\n    if (typeof currLabelName === 'string') {\n      this.currLabelName = currLabelName\n      this._changeList()\n      this._changeFocus()\n    }\n  }\n\n  _bindLabelClick() {\n    this.labelsContainer.addEventListener('click', (e) => {\n      let currLabelName = e.target.getAttribute(`data-${this.metaName}`)\n      this.changeLabel(currLabelName)\n    })\n  }\n\n  _changeFocus(label) {\n    let currFocus = this.labelsContainer.getElementsByClassName(\n      'sidebar-label-focus'\n    )\n    ;[...currFocus].forEach((item) =>\n      item.classList.remove('sidebar-label-focus')\n    )\n    ;[...this.labelsContainer.children].forEach((item) => {\n      if (item.getAttribute(`data-${this.metaName}`) === this.currLabelName) {\n        item.classList.add('sidebar-label-focus')\n      }\n    })\n  }\n\n  _changeList() {\n    let indexArr = this.indexMap.get(this.currLabelName)\n    try {\n      let corrArr = indexArr.map((index) => {\n        return this.postsArr[index]\n      })\n      this._createPostsDom(corrArr)\n    } catch (error) {\n      console.error(\n        'Please ensure set `tags: true` and `categories: true` of the hexo-content-json config'\n      )\n    }\n  }\n\n  _createPostsDom(corrArr) {\n    console.log(corrArr)\n    let frag = document.createDocumentFragment()\n    this.postContainer.innerHTML = ''\n    for (let i = 0; i < corrArr.length; i++) {\n      frag.appendChild(this._createPostDom(corrArr[i]))\n    }\n    this.postContainer.appendChild(frag)\n  }\n\n  _createPostDom(postInfo) {\n    let $tagItem = $(\n      '<li class=\"meta-post-item\"><span class=\"meta-post-date\">' +\n        archerUtil.dateFormater(\n          new Date(Date.parse(postInfo.date)),\n          'yyyy/MM/dd'\n        ) +\n        '</span></li>'\n    )\n    let $aItem = $(\n      '<a class=\"meta-post-title\" href=\"' +\n        siteMeta.root +\n        postInfo.path +\n        '\">' +\n        postInfo.title +\n        '</a>'\n    )\n    $tagItem.append($aItem)\n    return $tagItem[0]\n  }\n\n  tryInit(postsArr) {\n    if (\n      this.isInited ||\n      Object.prototype.toString.call(postsArr) === '[object Null]'\n    ) {\n      return\n    }\n    for (let postIndex = 0; postIndex < postsArr.length; postIndex++) {\n      let currPostLabels = postsArr[postIndex][this.metaName]\n      // if there is any post has a tag\n      if (currPostLabels && currPostLabels.length) {\n        currPostLabels.forEach((tagOrCatetory) => {\n          // if this.metaName is 'categories', tagOrCatetory['slug'] will be used as key in this.indexMap\n          // else if this.metaName is 'tag', tagOrCatetory['name'] will be used as key in this.indexMap\n          // check the array postsArr and you'll know why. (actually you can just use 'slug' in both case)\n          let key = this.metaName === 'categories' ? 'slug' : 'name'\n          if (this.indexMap.has(tagOrCatetory[key])) {\n            this.indexMap.get(tagOrCatetory[key]).push(postIndex)\n          } else {\n            this.indexMap.set(tagOrCatetory[key], [postIndex])\n          }\n        })\n      }\n    }\n\n    if (!this.indexMap.size) {\n      document\n        .getElementsByClassName(`sidebar-${this.metaName}-empty`)[0]\n        .classList.add(`sidebar-${this.metaName}-empty-active`)\n    }\n\n    this.postsArr = postsArr\n    this.isInited = true\n  }\n}\n\nclass SidebarMeta {\n  constructor(tabCount) {\n    this.tabCount = 0\n    this.emitter = new Emitter()\n    this.postsArr = null\n    this.metas = []\n    this._initMap = this._initMap.bind(this)\n    this.dataMaps = new Map()\n    this._subscribe()\n    this._fetchInfo()\n    this._bindOtherClick()\n  }\n\n  // add a new tab and updata all metas\n  addTab(para) {\n    this.tabCount++\n    let newMeta = new MetaInfo(\n      para.metaName,\n      para.labelsContainer,\n      para.postsContainer\n    )\n    newMeta.tryInit(this.postsArr)\n    this.metas.push(newMeta)\n  }\n\n  // update every MetaInfo\n  _tryInitMetas() {\n    for (let i = 0; i < this.metas.length; i++) {\n      this.metas[i].tryInit(this.postsArr)\n    }\n  }\n\n  // subscribe data onload\n  _subscribe() {\n    this.emitter.on('DATA_FETCHED_SUCCESS', this._initMap)\n  }\n\n  // init maps\n  _initMap() {\n    if (!this.postsArr.length) {\n      return\n    }\n    this._tryInitMetas()\n  }\n\n  // fetch content.json\n  _fetchInfo() {\n    // siteMeta is from js-info.ejs\n    let contentURL = siteMeta.root + 'content.json?t=' + Number(new Date())\n    let xhr = new XMLHttpRequest()\n    xhr.responseType = ''\n    xhr.open('get', contentURL, true)\n    let $loadFailed = $('.tag-load-fail')\n    let that = this\n    xhr.onload = function () {\n      if (this.status === 200 || this.status === 304) {\n        $loadFailed.remove()\n        // defensive programming if content.json formart is not correct\n        // pr: https://github.com/fi3ework/hexo-theme-archer/pull/37\n        let contentJSON\n        let posts\n        contentJSON = JSON.parse(this.responseText)\n        posts = Array.isArray(contentJSON) ? contentJSON : contentJSON.posts\n        if (posts && posts.length) {\n          that.postsArr = posts\n          that.emitter.emit('DATA_FETCHED_SUCCESS')\n        }\n      } else {\n        this.$currPostsContainer.remove()\n      }\n    }\n    xhr.send()\n  }\n\n  _bindOtherClick() {\n    document.body.addEventListener('click', (e) => {\n      if (e.target.className === 'post-tag') {\n        e.stopPropagation()\n        sidebar.activateSidebar()\n        sidebar.switchTo(1)\n        let currLabelName = e.target.getAttribute(`data-tags`)\n        this.currLabelName = currLabelName\n        let tagMeta = this.metas[0]\n        tagMeta.changeLabel(this.currLabelName)\n      }\n    })\n  }\n}\n\nexport default SidebarMeta\n","import archerUtil from './util'\nlet prevHeight = 0\nfunction initTocLinksScrollTop(tocLinks) {\n  return [...tocLinks].map((link) => {\n    return archerUtil.getAbsPosition(link).y\n  })\n}\n\nlet calcAnchorLink = (heights, currHeight) => {\n  for (let i = 0; i < heights.length; i++) {\n    if (Math.abs(currHeight - heights[i]) < 1.1) {\n      return i\n    }\n  }\n  return -1\n}\n\nlet isPassingThrough = (currHeight, prevHeight, linkHeight) => {\n  return (currHeight + 1 - linkHeight) * (prevHeight + 1 - linkHeight) <= 0\n}\n\nfunction calcScrollIntoScreenIndex(heights, prevHeight, currHeight) {\n  let anchorLinkIndex = calcAnchorLink(heights, currHeight)\n  if (anchorLinkIndex >= 0) {\n    return anchorLinkIndex\n  }\n\n  for (let i = 0; i < heights.length; i++) {\n    if (isPassingThrough(currHeight, prevHeight, heights[i])) {\n      // if is scrolling down, select current\n      if (currHeight > prevHeight) {\n        return i\n      } else {\n        // if is scrolling up, select previous\n        return i - 1\n      }\n    }\n  }\n}\n\n// hide all ol\nfunction hideAllOl(root) {\n  ;[...root.querySelectorAll('ol')].forEach((li) => {\n    hideItem(li)\n  })\n}\n\n// back to default state\nfunction initFold(toc) {\n  ;[...toc.children].forEach((child) => {\n    hideAllOl(child)\n  })\n  ;[...toc.querySelectorAll('.toc-active')].forEach((child) => {\n    child.classList.remove('toc-active')\n  })\n}\n\nfunction resetFold(toc) {\n  initFold(toc)\n}\n\nfunction hideItem(node) {\n  node.style.display = 'none'\n}\n\nfunction showItem(node) {\n  node.style.display = ''\n}\n\nfunction activeTocItem(node) {\n  node.classList.add('toc-active')\n}\n\nfunction showAllChildren(node) {\n  ;[...node.children].forEach((child) => {\n    showItem(child)\n  })\n}\n\nfunction spreadParentNodeOfTargetItem(tocItem) {\n  let currNode = tocItem\n  while (currNode && currNode.parentNode) {\n    showAllChildren(currNode.parentNode)\n    showAllChildren(currNode)\n    currNode = currNode.parentNode\n    if (currNode.classList.contains('toc')) {\n      break\n    }\n  }\n}\n\nlet main = () => {\n  let toc = document.querySelector('.toc')\n  let tocItems = document.querySelectorAll('.toc-item')\n  if (!tocItems.length) {\n    return\n  }\n  initFold(toc)\n  let headers = document.querySelectorAll(\n    '.article-entry h1, h2, h3, h4, h5, h6'\n  )\n  // get links height\n  let heights = initTocLinksScrollTop(headers)\n  document.addEventListener('scroll', () => {\n    let currHeight = $(document).scrollTop()\n    let currHeightIndex = calcScrollIntoScreenIndex(\n      heights,\n      prevHeight,\n      currHeight\n    )\n    prevHeight = currHeight\n    if (typeof currHeightIndex === 'undefined') {\n      return\n    }\n    // spread, fold and active\n    let currItem = tocItems[currHeightIndex]\n    // 1. fold\n    resetFold(toc)\n    // 2. spread\n    spreadParentNodeOfTargetItem(currItem)\n    // 3. active\n    if (currItem) {\n      activeTocItem(currItem.querySelector('a'))\n    }\n  })\n}\n\nexport default main\n","const fancyBoxInit = (img) => {\n  let outer = img.outerHTML\n  let imgSrc = /src=\"(.*)\"/.exec(outer) && /src=\"(.*)\"/.exec(outer)[1]\n  let imgAlt =\n    (/alt=\"(.*)\"/.exec(outer) && /alt=\"(.*)\"/.exec(outer)[1]) ||\n    (/title=\"(.*)\"/.exec(outer) && /title=\"(.*)\"/.exec(outer)[1]) ||\n    ''\n  img.outerHTML =\n    '<a class=\"fancy-link\" href=\"' +\n    imgSrc +\n    '\" data-fancybox=\"group\" data-caption=\"' +\n    imgAlt +\n    '\">' +\n    outer +\n    '</a>'\n}\n\nexport default () => {\n  document.querySelectorAll('.article-entry img').forEach(fancyBoxInit)\n  document.querySelectorAll('.about-body container img').forEach(fancyBoxInit)\n}\n","import init from './init'\nimport { scroll } from './scroll'\nimport './initSidebar'\nimport { initMobile } from './mobile'\nimport InitSidebarLink from './tag'\nimport toc from './toc'\nimport fancybox from './fancybox'\n\n// print custom info\nconst logStyle =\n  'color: #fff; background: #f75357; padding: 1px; border-radius: 5px;'\nconsole.info('%c 🎯 hexo-theme-archer ⬇️ ', logStyle)\nconsole.info('%c 🏷 Version: 1.6.2 ', logStyle)\nconsole.info('%c 📅 Version date: 20210531', logStyle)\nconsole.info('%c 📦 https://github.com/fi3ework/hexo-theme-archer ', logStyle)\n\n// remove background placeholder\ninit()\n\n// scroll event\nscroll()\n\n// init sidebar link\nlet metas = new InitSidebarLink()\nmetas.addTab({\n  metaName: 'tags',\n  labelsContainer: '.sidebar-tags-name',\n  postsContainer: '.sidebar-tags-list',\n})\n\nmetas.addTab({\n  metaName: 'categories',\n  labelsContainer: '.sidebar-categories-name',\n  postsContainer: '.sidebar-categories-list',\n})\n\n// init toc\nwindow.addEventListener('load', function (event) {\n  console.log('All resources finished loading!')\n  toc()\n})\n\ninitMobile()\n// initSearch()\n\n// fancybox\nfancybox()\n","import archerUtil from './util'\n\nlet scroll = function () {\n  let $banner = $('.banner:first'),\n    $postBanner = $banner.find('.post-title a'),\n    $bgEle = $('.site-intro:first'),\n    $homeLink = $('.home-link:first'),\n    $backTop = $('.back-top:first'),\n    $sidebarMenu = $('.header-sidebar-menu:first'),\n    $tocWrapper = $('.toc-wrapper:first'),\n    $tocCatalog = $tocWrapper.find('.toc-catalog'),\n    $progressBar = $('.read-progress'),\n    bgTitleHeight = $bgEle.offset().top + $bgEle.outerHeight()\n\n  // toc 的收缩\n  $tocCatalog.on('click', function () {\n    $tocWrapper.toggleClass('toc-hide-children')\n  })\n\n  // 滚动式切换文章标题和站点标题\n  const showBannerScrollHeight = -500\n  let previousHeight = 0,\n    continueScroll = 0\n\n  function isScrollingUpOrDown(currTop) {\n    continueScroll += currTop - previousHeight\n    if (continueScroll > 30) {\n      // 向下滑动\n      continueScroll = 0\n      return 1\n    } else if (continueScroll < showBannerScrollHeight) {\n      // 向上滑动\n      continueScroll = 0\n      return -1\n    } else {\n      return 0\n    }\n  }\n\n  // 是否在向上或向下滚动\n  let crossingState = -1\n  let isHigherThanIntro = true\n  function isCrossingIntro(currTop) {\n    // 向下滑动超过 intro\n    if (currTop > bgTitleHeight) {\n      if (crossingState !== 1) {\n        crossingState = 1\n        isHigherThanIntro = false\n        return 1\n      }\n    } else {\n      // 向上滑动超过 intro\n      if (crossingState !== -1) {\n        crossingState = -1\n        isHigherThanIntro = true\n        return -1\n      }\n    }\n    return 0\n  }\n\n  // 判断是否为 post-page\n  let isPostPage = false\n  let articleHeight, articleTop\n  if ($('.post-body').length) {\n    isPostPage = true\n    articleTop = bgTitleHeight\n    // 如果执行时动画已执行完毕\n    articleHeight = $('.article-entry').outerHeight()\n    // 如果执行时动画未执行完毕\n    articleHeight = $('.container')[0].addEventListener('transitionend', () => {\n      articleHeight = $('.article-entry').outerHeight()\n    })\n  }\n\n  function updateProgress(scrollTop, beginY, contentHeight) {\n    let windowHeight = $(window).height()\n    let readPercent\n    if (scrollTop < bgTitleHeight) {\n      readPercent = 0\n    } else {\n      readPercent =\n        ((scrollTop - beginY) / (contentHeight - windowHeight)) * 100\n    }\n    // 防止文章过短，产生负百分比\n    readPercent = readPercent >= 0 ? readPercent : 100\n    let restPercent = readPercent - 100 <= 0 ? readPercent - 100 : 0\n    $progressBar[0].style.transform = `translate3d(${restPercent}%, 0, 0)`\n  }\n\n  // rAF 操作\n  let tickingScroll = false\n  function updateScroll(scrollTop) {\n    let crossingState = isCrossingIntro(scrollTop)\n    // intro 边界切换\n    if (crossingState === 1) {\n      $tocWrapper.addClass('toc-fixed')\n      $homeLink.addClass('home-link-hide')\n      $backTop.addClass('back-top-show')\n      $sidebarMenu.addClass('header-sidebar-menu-black')\n    } else if (crossingState === -1) {\n      $tocWrapper.removeClass('toc-fixed')\n      $homeLink.removeClass('home-link-hide')\n      $banner.removeClass('banner-show')\n      $backTop.removeClass('back-top-show')\n      $sidebarMenu.removeClass('header-sidebar-menu-black')\n    }\n    // 如果不是 post-page 以下忽略\n    if (isPostPage) {\n      // 上下滑动一定距离显示/隐藏 header\n      let upDownState = isScrollingUpOrDown(scrollTop)\n      if (upDownState === 1) {\n        $banner.removeClass('banner-show')\n      } else if (upDownState === -1 && !isHigherThanIntro) {\n        $banner.addClass('banner-show')\n      }\n      // 进度条君的长度\n      updateProgress(scrollTop, articleTop, articleHeight)\n    }\n    previousHeight = scrollTop\n    tickingScroll = false\n  }\n\n  // scroll 回调\n  function onScroll() {\n    const scrollTop = $(document).scrollTop()\n    const bindedUpdate = updateScroll.bind(null, scrollTop)\n    archerUtil.rafTick(tickingScroll, bindedUpdate)\n  }\n\n  const throttleOnScroll = archerUtil.throttle(onScroll, 25, true)\n  $(document).on('scroll', throttleOnScroll) // 每 25 ms 执行一次 onScroll() 方法\n\n  // 绑定返回顶部事件\n  ;[$postBanner, $backTop].forEach(function (ele) {\n    ele.on('click', archerUtil.backTop)\n  })\n}\n\nexport { scroll }\n"],"sourceRoot":""}